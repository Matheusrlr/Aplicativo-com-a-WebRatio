(function(GLOBAL,jQuery,undefined,define){if(GLOBAL["wr"]){return};(function(a){function q(j){j.each(function(){var j=h(this);if(j){var s=a(this),g=o.call(s);a.each(c(j),function(b,e){(!g||!g.hasOwnProperty(b))&&o.call(s,b,e)});a(j).remove()}})}function i(c){c.each(function(){var c=h(this);c&&a(c).remove()})}function h(a){return(a=a.nextSibling)&&8===a.nodeType&&0===(""+a.nodeValue).indexOf("[data]")?a:null}function c(c){c=c.nodeValue;return 0===c.indexOf("[data]")?(c=c.substring(6).replace(/^\s+|\s+$/g,""),a.parseJSON(c)):{}}var o=a.fn.data,j=a.fn.removeData;a.fn.data=
function(){q(this);return o.apply(this,arguments)};a.fn.removeData=function(){0<arguments.length?q(this):i(this);return j.apply(this,arguments)}})(jQuery);(function(a){a.deparam=function(q,i){var h={},c={"true":!0,"false":!1,"null":null};a.each(q.replace(/\+/g," ").split("&"),function(o,j){var s,k=j.split("="),n=decodeURIComponent(k[0]),g=h,b=0,e=n.split("]["),m=e.length-1;/\[/.test(e[0])&&/\]$/.test(e[m])?(e[m]=e[m].replace(/\]$/,""),e=e.shift().split("[").concat(e),m=e.length-1):m=0;if(2===k.length)if(k=decodeURIComponent(k[1]),i&&(k=k&&!isNaN(k)?+k:"undefined"===k?void 0:void 0!==c[k]?c[k]:k),m)for(;b<=m;b++)n=""===e[b]?g.length:e[b],s=g[n]=b<m?
g[n]||(e[b+1]&&isNaN(e[b+1])?{}:[]):k,g=s;else a.isArray(h[n])?h[n].push(k):h[n]=void 0!==h[n]?[h[n],k]:k;else n&&(h[n]=i?void 0:"")});return h}})(jQuery);(function(a){var q={maximize:!1,minimize:!1,dblclick:!1,titlebar:!1,icons:{maximize:"ui-icon-extlink",minimize:"ui-icon-minus",restore:"ui-icon-newwin"},events:{load:null,beforeCollapse:null,beforeMaximize:null,beforeMinimize:null,beforeRestore:null,collapse:null,maximize:null,minimize:null,restore:null}},i,h={init:function(c){a(this).dialog||a.error("jQuery.dialogExtend Error : Only jQuery UI Dialog element is accepted");c=c||{};c.icons=c.icons||{};c.events=c.events||{};i=a.extend({},q,c);i.icons=
a.extend({},q.icons,c.icons);i.events=a.extend({},q.events,c.events);a(this).each(function(){a(this).data("dialog-state","normal").dialogExtend("_verifySettings").dialogExtend("_initEvents").dialogExtend("_initStyles").dialogExtend("_initButtons").dialogExtend("_initTitleBar").dialogExtend("_trigger","load")});return this},collapse:function(){var c=a(this).dialog("widget").find(".ui-dialog-titlebar").height()+15;a(this).dialogExtend("_trigger","beforeCollapse").dialogExtend("_saveSnapshot").data("dialog-state",
"collapsed").dialog("option",{height:c,maxHeight:c}).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space","nowrap").end().find(".ui-dialog-content").dialogExtend("_trigger","collapse");return this},maximize:function(){var c=a(window).height()-11,o=a(window).width()-11;a(this).dialogExtend("_trigger","beforeMaximize").dialogExtend("_saveSnapshot").data("dialog-state","maximized").dialogExtend("_toggleButtons").dialog("widget").css("position",
"fixed").find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane").show().end().find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:c,width:o,position:[1,1]}).dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end().find(".ui-dialog-content").dialogExtend("_trigger","maximize");return this},minimize:function(){var c=a(this).dialog("widget").find(".ui-dialog-titlebar").height()+15;a("#minimized-dialog-container").length||
a("<div />").attr("id","#minimized-dialog-container".replace("#","")).css({left:1,bottom:1,position:"fixed"}).appendTo("body");a(this).dialogExtend("_trigger","beforeMinimize").dialogExtend("_saveSnapshot").data("dialog-state","minimized").dialogExtend("_toggleButtons").dialog("widget").css({"float":"left",margin:1,position:"static"}).appendTo("#minimized-dialog-container").find(".ui-dialog-content").dialog("option",{resizable:!1,draggable:!1,height:c,width:200}).hide().dialog("widget").find(".ui-dialog-buttonpane:visible").hide().end().find(".ui-dialog-titlebar").css("white-space",
"nowrap").end().find(".ui-dialog-content").dialog("widget").draggable("option","handle",null).find(".ui-dialog-draggable-handle").css("cursor","text").end().find(".ui-dialog-content").dialogExtend("_trigger","minimize");return this},restore:function(){var c=a(this).data("dialog-state");a(this).dialogExtend("_trigger","beforeRestore").data("dialog-state","normal").dialogExtend("_toggleButtons").dialogExtend("maximized"==c?"_restoreFromMaximized":"minimized"==c?"_restoreFromMinimized":"collapsed"==
c?"_restoreFromCollapsed":a.error("jQuery.dialogExtend Error : Cannot restore dialog from unknown state '"+c+"'")).dialogExtend("_trigger","restore");return this},_initButtons:function(){var c=this,o=a(c).dialog("widget").find(".ui-dialog-titlebar");a(o).append('<a class="ui-dialog-titlebar-maximize ui-corner-all" href="#"><span class="ui-icon '+i.icons.maximize+'">maximize</span></a>').append('<a class="ui-dialog-titlebar-minimize ui-corner-all" href="#"><span class="ui-icon '+i.icons.minimize+'">minimize</span></a>').append('<a class="ui-dialog-titlebar-restore ui-corner-all" href="#"><span class="ui-icon '+
i.icons.restore+'">restore</span></a>').find(".ui-dialog-titlebar-maximize,.ui-dialog-titlebar-minimize,.ui-dialog-titlebar-restore").attr("role","button").mouseover(function(){a(this).addClass("ui-state-hover")}).mouseout(function(){a(this).removeClass("ui-state-hover")}).focus(function(){a(this).addClass("ui-state-focus")}).blur(function(){a(this).removeClass("ui-state-focus")}).end().find(".ui-dialog-titlebar-maximize").toggle(i.maximize).css({right:i.maximize?"1.4em":"-9999em"}).click(function(j){j.preventDefault();
a(c).dialogExtend("maximize")}).end().find(".ui-dialog-titlebar-minimize").toggle(i.minimize).css({right:i.maximize?"2.5em":i.minimize?"1.4em":"-9999em"}).click(function(j){j.preventDefault();a(c).dialogExtend("minimize")}).end().find(".ui-dialog-titlebar-restore").hide().css({right:"-9999em"}).click(function(j){j.preventDefault();a(c).dialogExtend("restore")}).end().dblclick(function(){i.dblclick&&i.dblclick.length&&a(c).dialogExtend("normal"!=a(c).data("dialog-state")?"restore":i.dblclick)}).each(function(){a(this).select(function(){return!1})});
return c},_initEvents:function(){var c=this;a.each(i.events,function(o){a.isFunction(i.events[o])&&a(c).bind(o+".dialogExtend",i.events[o])});return c},_initStyles:function(){var c;a('<style type="text/css">.ui-dialog .ui-dialog-titlebar-maximize,.ui-dialog .ui-dialog-titlebar-minimize,.ui-dialog .ui-dialog-titlebar-restore { position: absolute; top: 50%; width: 19px; margin: -10px 0 0 0; padding: 1px; height: 18px; }.ui-dialog .ui-dialog-titlebar-maximize span,.ui-dialog .ui-dialog-titlebar-minimize span,.ui-dialog .ui-dialog-titlebar-restore span { display: block; margin: 1px; }.ui-dialog .ui-dialog-titlebar-maximize:hover,.ui-dialog .ui-dialog-titlebar-maximize:focus,.ui-dialog .ui-dialog-titlebar-minimize:hover,.ui-dialog .ui-dialog-titlebar-minimize:focus,.ui-dialog .ui-dialog-titlebar-restore:hover,.ui-dialog .ui-dialog-titlebar-restore:focus { padding: 0; }.ui-dialog .ui-dialog-titlebar ::selection { background-color: transparent; }</style>').appendTo("body");
return this},_initTitleBar:function(){switch(i.titlebar){case !1:break;case "none":if(a(this).dialog("option","draggable")){var c=a("<div />").addClass("ui-dialog-draggable-handle").css("cursor","move").height(5);a(this).dialog("widget").prepend(c).draggable("option","handle",c)}a(this).dialog("widget").find(".ui-dialog-titlebar").find(".ui-dialog-title").html("\ufffd").end().css({"background-color":"transparent","background-image":"none",border:0,position:"absolute",right:0,top:0,"z-index":9999}).end();
break;case "transparent":a(this).dialog("widget").find(".ui-dialog-titlebar").css({"background-color":"transparent","background-image":"none",border:0});break;default:a.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+i.titlebar+"'")}return this},_loadSnapshot:function(){return{config:{resizable:a(this).data("original-config-resizable"),draggable:a(this).data("original-config-draggable")},size:{height:a(this).data("original-size-height"),width:a(this).data("original-size-width"),maxHeight:a(this).data("original-size-maxHeight")},
position:{mode:a(this).data("original-position-mode"),left:a(this).data("original-position-left"),top:a(this).data("original-position-top")},titlebar:{wrap:a(this).data("original-titlebar-wrap")}}},_restoreFromCollapsed:function(){var c=a(this).dialogExtend("_loadSnapshot");a(this).show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",c.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{height:c.size.height,maxHeight:c.size.maxHeight});
return this},_restoreFromMaximized:function(){var c=a(this).dialogExtend("_loadSnapshot");a(this).dialog("widget").css("position",c.position.mode).find(".ui-dialog-titlebar").css("white-space",c.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:c.config.resizable,draggable:c.config.draggable,height:c.size.height,width:c.size.width,maxHeight:c.size.maxHeight,position:[c.position.left,c.position.top]}).dialog("widget").draggable("option","handle",a(this).find(".ui-dialog-draggable-handle")).find(".ui-dialog-draggable-handle").css("cursor",
"move");return this},_restoreFromMinimized:function(){var c=a(this).dialogExtend("_loadSnapshot");a(this).dialog("widget").appendTo("body").css({"float":"none",margin:0,position:c.position.mode}).find(".ui-dialog-content").show().dialog("widget").find(".ui-dialog-buttonpane:hidden").show().end().find(".ui-dialog-titlebar").css("white-space",c.titlebar.wrap).end().find(".ui-dialog-content").dialog("option",{resizable:c.config.resizable,draggable:c.config.draggable,height:c.size.height,width:c.size.width,
maxHeight:c.size.maxHeight,position:[c.position.left,c.position.top]}).dialog("widget").draggable("option","handle",a(this).find(".ui-dialog-draggable-handle")).find(".ui-dialog-draggable-handle").css("cursor","move");return this},_saveSnapshot:function(){"normal"==a(this).data("dialog-state")&&a(this).data("original-config-resizable",a(this).dialog("option","resizable")).data("original-config-draggable",a(this).dialog("option","draggable")).data("original-size-height",a(this).dialog("widget").height()).data("original-size-width",
a(this).dialog("option","width")).data("original-size-maxHeight",a(this).dialog("option","maxHeight")).data("original-position-mode",a(this).dialog("widget").css("position")).data("original-position-left",a(this).dialog("widget").offset().left).data("original-position-top",a(this).dialog("widget").offset().top).data("original-titlebar-wrap",a(this).dialog("widget").find(".ui-dialog-titlebar").css("white-space"));return this},_toggleButtons:function(){a(this).dialog("widget").find(".ui-dialog-titlebar-maximize").toggle("maximized"!=
a(this).data("dialog-state")&&i.maximize).end().find(".ui-dialog-titlebar-minimize").toggle("minimized"!=a(this).data("dialog-state")&&i.minimize).end().find(".ui-dialog-titlebar-restore").toggle("normal"!=a(this).data("dialog-state")&&(i.maximize||i.minimize)).css({right:"maximized"==a(this).data("dialog-state")?"1.4em":"minimized"==a(this).data("dialog-state")?!i.maximize?"1.4em":"2.5em":"-9999em"}).end();return this},_trigger:function(c){a(this).triggerHandler(c+".dialogExtend",this);return this},
_verifySettings:function(){if(i.dblclick&&"maximize"!=i.dblclick&&"minimize"!=i.dblclick&&"collapse"!=i.dblclick)a.error("jQuery.dialogExtend Error : Invalid <dblclick> value '"+i.dblclick+"'"),i.dblclick=!1;if(i.titlebar&&"none"!=i.titlebar&&"transparent"!=i.titlebar)a.error("jQuery.dialogExtend Error : Invalid <titlebar> value '"+i.titlebar+"'"),i.titlebar=!1;return this}};a.fn.dialogExtend=function(c){if(h[c])return h[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof c||
!c)return h.init.apply(this,arguments);a.error("jQuery.dialogExtend Error : Method <"+c+"> does not exist")}})(jQuery);(function(a,q,i){function h(a){return a}function c(a){a=decodeURIComponent(a.replace(o," "));0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));return a}var o=/\+/g,j=a.cookie=function(o,k,n){if(k!==i){n=a.extend({},j.defaults,n);if(null===k)n.expires=-1;if("number"===typeof n.expires){var g=n.expires,b=n.expires=new Date;b.setDate(b.getDate()+g)}k=j.json?JSON.stringify(k):""+k;return q.cookie=[encodeURIComponent(o),"=",j.raw?k:encodeURIComponent(k),n.expires?"; expires="+
n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var k=j.raw?h:c,n=q.cookie.split("; "),g=o?null:{},b=0,e=n.length;b<e;b++){var m=n[b].split("="),p=k(m.shift()),m=k(m.join("="));if(o&&o===p){g=j.json?JSON.parse(m):m;break}o||(g[p]=j.json?JSON.parse(m):m)}return g};j.defaults={};a.removeCookie=function(c,j){return null!==a.cookie(c)?(a.cookie(c,null,j),!0):!1}})(jQuery,document);var jsDump;
(function(){function a(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'}function q(a){return a+""}function i(a,c,i){var k=jsDump.separator(),n=jsDump.indent();inner=jsDump.indent(1);c.join&&(c=c.join(","+k+inner));return!c?a+i:[a,inner+c,n+i].join(k)}function h(a){var c=a.length,h=Array(c);for(this.up();c--;)h[c]=this.parse(a[c]);this.down();return i("[",h,"]")}var c=/^function (\w+)/;jsDump={parse:function(a,c){var i=this.parsers[c||this.typeOf(a)],c=typeof i;return"function"==c?i.call(this,a):
"string"==c?i:this.parsers.error},typeOf:function(a){var c=typeof a;return"object"!=c&&"function"!=c?c:!a?"null":a.exec?"regexp":a.getHours?"date":a.scrollBy?"window":"#document"==a.nodeName?"document":a.nodeName?"node":a.item?"nodelist":a.callee?"arguments":a.call||a.constructor!=Array&&-1!=(a+"").indexOf("function")?"function":"length"in a?"array":c},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?"&nbsp;":" "},indent:function(a){if(!this.multiline)return"";var c=this.indentChar;
this.HTML&&(c=c.replace(/\t/g,"   ").replace(/ /g,"&nbsp;"));return Array(this._depth_+(a||0)).join(c)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(a,c){this.parsers[a]=c},quote:a,literal:q,join:i,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(a){var j="function",h="name"in a?a.name:(c.exec(a)||[])[1];h&&(j+=" "+h);j=[j+"(",this.parse(a,"functionArgs"),
"){"].join("");return i(j,this.parse(a,"functionCode"),"}")},array:h,nodelist:h,arguments:h,object:function(a){var c=[];this.up();for(var h in a)c.push(this.parse(h,"key")+": "+this.parse(a[h]));this.down();return i("{",c,"}")},node:function(a){var c=this.HTML?"&lt;":"<",i=this.HTML?"&gt;":">",k=a.nodeName.toLowerCase(),n=c+k,g;for(g in this.DOMAttrs){var b=a[this.DOMAttrs[g]];b&&(n+=" "+g+"="+this.parse(b,"attribute"))}return n+i+c+"/"+k+i},functionArgs:function(a){a=a.length;if(!a)return"";for(var c=
Array(a);a--;)c[a]=String.fromCharCode(97+a);return" "+c.join(", ")+" "},key:a,functionCode:"[code]",attribute:a,string:a,date:a,regexp:q,number:q,"boolean":q},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"   ",multiline:!0}})();var Hashtable=function(){function a(b){if("string"==typeof b)return b;return typeof b.hashCode==n?(b=b.hashCode(),"string"==typeof b?b:a(b)):typeof b.toString==n?b.toString():""+b}function q(b,a){return b.equals(a)}function i(b,a){return typeof a.equals==n?a.equals(b):b===a}function h(b){return function(a){if(null===a)throw Error("null is not a valid "+b);if("undefined"==typeof a)throw Error(b+" must not be undefined");}}function c(b,a,e,c){this[0]=b;this.entries=[];this.addEntry(a,e);if(null!==c)this.getEqualityFunction=
function(){return c}}function o(b){return function(a){for(var e=this.entries.length,c,g=this.getEqualityFunction(a);e--;)if(c=this.entries[e],g(a,c[0]))switch(b){case m:return!0;case p:return c;case r:return[e,c[1]]}return!1}}function j(b){return function(a){for(var e=a.length,c=0,m=this.entries.length;c<m;++c)a[e+c]=this.entries[c][b]}}function s(b,a){var e=b[a];return e&&e instanceof c?e:null}function k(m,p){var i=this,j=[],r={},d=typeof m==n?m:a,h=typeof p==n?p:null;this.put=function(a,m){b(a);
e(m);var l=d(a),u,g=null;(u=s(r,l))?(l=u.getEntryForKey(a))?(g=l[1],l[1]=m):u.addEntry(a,m):(u=new c(l,a,m,h),j[j.length]=u,r[l]=u);return g};this.get=function(a){b(a);var e=d(a);if(e=s(r,e))if(a=e.getEntryForKey(a))return a[1];return null};this.containsKey=function(a){b(a);var e=d(a);return(e=s(r,e))?e.containsKey(a):!1};this.containsValue=function(b){e(b);for(var a=j.length;a--;)if(j[a].containsValue(b))return!0;return!1};this.clear=function(){j.length=0;r={}};this.isEmpty=function(){return!j.length};
var o=function(b){return function(){for(var a=[],d=j.length;d--;)j[d][b](a);return a}};this.keys=o("keys");this.values=o("values");this.entries=o("getEntries");this.remove=function(a){b(a);var e=d(a),l=null,c=s(r,e);if(c&&(l=c.removeEntryForKey(a),null!==l&&!c.entries.length)){a:{for(a=j.length;a--;)if(c=j[a],e===c[0])break a;a=null}g(j,a);delete r[e]}return l};this.size=function(){for(var b=0,a=j.length;a--;)b+=j[a].entries.length;return b};this.each=function(b){for(var a=i.entries(),d=a.length,
e;d--;)e=a[d],b(e[0],e[1])};this.putAll=function(b,a){for(var d=b.entries(),e,c,m,g=d.length,p=typeof a==n;g--;){e=d[g];c=e[0];e=e[1];if(p&&(m=i.get(c)))e=a(c,m,e);i.put(c,e)}};this.clone=function(){var a=new k(m,p);a.putAll(i);return a}}var n="function",g=typeof Array.prototype.splice==n?function(a,b){a.splice(b,1)}:function(a,b){var e,c,m;if(b===a.length-1)a.length=b;else{e=a.slice(b+1);a.length=b;for(c=0,m=e.length;c<m;++c)a[b+c]=e[c]}},b=h("key"),e=h("value"),m=0,p=1,r=2;c.prototype={getEqualityFunction:function(a){return typeof a.equals==
n?q:i},getEntryForKey:o(p),getEntryAndIndexForKey:o(r),removeEntryForKey:function(a){return(a=this.getEntryAndIndexForKey(a))?(g(this.entries,a[0]),a[1]):null},addEntry:function(a,b){this.entries[this.entries.length]=[a,b]},keys:j(0),values:j(1),getEntries:function(a){for(var b=a.length,e=0,c=this.entries.length;e<c;++e)a[b+e]=this.entries[e].slice(0)},containsKey:o(m),containsValue:function(a){for(var b=this.entries.length;b--;)if(a===this.entries[b][1])return!0;return!1}};return k}();function parseUri(a){for(var q=parseUri.options,a=q.parser[q.strictMode?"strict":"loose"].exec(a),i={},h=14;h--;)i[q.key[h]]=a[h]||"";i[q.q.name]={};i[q.key[12]].replace(q.q.parser,function(a,h,j){h&&(i[q.q.name][h]=j)});return i}
parseUri.options={strictMode:!1,key:"source,protocol,authority,userInfo,user,password,host,port,relative,path,directory,file,query,anchor".split(","),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};(function(){function a(f,b,e){if(f===b)return 0!==f||1/f==1/b;if(null==f||null==b)return f===b;f._chain&&(f=f._wrapped);b._chain&&(b=b._wrapped);if(f.isEqual&&d.isFunction(f.isEqual))return f.isEqual(b);if(b.isEqual&&d.isFunction(b.isEqual))return b.isEqual(f);var c=k.call(f);if(c!=k.call(b))return!1;switch(c){case "[object String]":return f==""+b;case "[object Number]":return f!=+f?b!=+b:0==f?1/f==1/b:f==+b;case "[object Date]":case "[object Boolean]":return+f==+b;case "[object RegExp]":return f.source==
b.source&&f.global==b.global&&f.multiline==b.multiline&&f.ignoreCase==b.ignoreCase}if("object"!=typeof f||"object"!=typeof b)return!1;for(var l=e.length;l--;)if(e[l]==f)return!0;e.push(f);var l=0,m=!0;if("[object Array]"==c){if(l=f.length,m=l==b.length)for(;l--&&(m=l in f==l in b&&a(f[l],b[l],e)););}else{if("constructor"in f!="constructor"in b||f.constructor!=b.constructor)return!1;for(var g in f)if(d.has(f,g)&&(l++,!(m=d.has(b,g)&&a(f[g],b[g],e))))break;if(m){for(g in b)if(d.has(b,g)&&!l--)break;
m=!l}}e.pop();return m}var q=this,i=q._,h={},c=Array.prototype,o=Object.prototype,j=c.slice,s=c.unshift,k=o.toString,n=o.hasOwnProperty,g=c.forEach,b=c.map,e=c.reduce,m=c.reduceRight,p=c.filter,r=c.every,A=c.some,w=c.indexOf,C=c.lastIndexOf,o=Array.isArray,D=Object.keys,x=Function.prototype.bind,d=function(f){return new y(f)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=d),exports._=d):q._=d;d.VERSION="1.3.3";var t=d.each=d.forEach=function(f,
b,a){if(null!=f)if(g&&f.forEach===g)f.forEach(b,a);else if(f.length===+f.length)for(var e=0,l=f.length;e<l&&!(e in f&&b.call(a,f[e],e,f)===h);e++);else for(e in f)if(d.has(f,e)&&b.call(a,f[e],e,f)===h)break};d.map=d.collect=function(f,a,e){var d=[];if(null==f)return d;if(b&&f.map===b)return f.map(a,e);t(f,function(f,b,l){d[d.length]=a.call(e,f,b,l)});if(f.length===+f.length)d.length=f.length;return d};d.reduce=d.foldl=d.inject=function(f,b,a,l){var c=2<arguments.length;null==f&&(f=[]);if(e&&f.reduce===
e)return l&&(b=d.bind(b,l)),c?f.reduce(b,a):f.reduce(b);t(f,function(f,e,d){c?a=b.call(l,a,f,e,d):(a=f,c=!0)});if(!c)throw new TypeError("Reduce of empty array with no initial value");return a};d.reduceRight=d.foldr=function(f,b,a,e){var l=2<arguments.length;null==f&&(f=[]);if(m&&f.reduceRight===m)return e&&(b=d.bind(b,e)),l?f.reduceRight(b,a):f.reduceRight(b);var c=d.toArray(f).reverse();e&&!l&&(b=d.bind(b,e));return l?d.reduce(c,b,a,e):d.reduce(c,b)};d.find=d.detect=function(f,b,a){var e;z(f,function(f,
d,l){if(b.call(a,f,d,l))return e=f,!0});return e};d.filter=d.select=function(f,b,a){var e=[];if(null==f)return e;if(p&&f.filter===p)return f.filter(b,a);t(f,function(f,d,l){b.call(a,f,d,l)&&(e[e.length]=f)});return e};d.reject=function(f,b,a){var e=[];if(null==f)return e;t(f,function(f,d,l){b.call(a,f,d,l)||(e[e.length]=f)});return e};d.every=d.all=function(f,b,a){var e=!0;if(null==f)return e;if(r&&f.every===r)return f.every(b,a);t(f,function(f,d,l){if(!(e=e&&b.call(a,f,d,l)))return h});return!!e};
var z=d.some=d.any=function(f,b,a){b||(b=d.identity);var e=!1;if(null==f)return e;if(A&&f.some===A)return f.some(b,a);t(f,function(f,d,l){if(e||(e=b.call(a,f,d,l)))return h});return!!e};d.include=d.contains=function(f,b){var a;return null==f?!1:w&&f.indexOf===w?-1!=f.indexOf(b):a=z(f,function(f){return f===b})};d.invoke=function(f,b){var a=j.call(arguments,2);return d.map(f,function(f){return(d.isFunction(b)?b||f:f[b]).apply(f,a)})};d.pluck=function(f,b){return d.map(f,function(f){return f[b]})};
d.max=function(f,b,a){if(!b&&d.isArray(f)&&f[0]===+f[0])return Math.max.apply(Math,f);if(!b&&d.isEmpty(f))return-Infinity;var e={computed:-Infinity};t(f,function(f,d,l){d=b?b.call(a,f,d,l):f;d>=e.computed&&(e={value:f,computed:d})});return e.value};d.min=function(f,b,a){if(!b&&d.isArray(f)&&f[0]===+f[0])return Math.min.apply(Math,f);if(!b&&d.isEmpty(f))return Infinity;var e={computed:Infinity};t(f,function(f,d,l){d=b?b.call(a,f,d,l):f;d<e.computed&&(e={value:f,computed:d})});return e.value};d.shuffle=
function(f){var b=[],a;t(f,function(f,e){a=Math.floor(Math.random()*(e+1));b[e]=b[a];b[a]=f});return b};d.sortBy=function(f,b,a){var e=d.isFunction(b)?b:function(f){return f[b]};return d.pluck(d.map(f,function(f,b,d){return{value:f,criteria:e.call(a,f,b,d)}}).sort(function(f,b){var a=f.criteria,e=b.criteria;return void 0===a?1:void 0===e?-1:a<e?-1:a>e?1:0}),"value")};d.groupBy=function(f,b){var a={},e=d.isFunction(b)?b:function(f){return f[b]};t(f,function(f,b){var d=e(f,b);(a[d]||(a[d]=[])).push(f)});
return a};d.sortedIndex=function(f,b,a){a||(a=d.identity);for(var e=0,l=f.length;e<l;){var c=e+l>>1;a(f[c])<a(b)?e=c+1:l=c}return e};d.toArray=function(f){return!f?[]:d.isArray(f)||d.isArguments(f)?j.call(f):f.toArray&&d.isFunction(f.toArray)?f.toArray():d.values(f)};d.size=function(f){return d.isArray(f)?f.length:d.keys(f).length};d.first=d.head=d.take=function(f,b,a){return null!=b&&!a?j.call(f,0,b):f[0]};d.initial=function(f,b,a){return j.call(f,0,f.length-(null==b||a?1:b))};d.last=function(f,
b,a){return null!=b&&!a?j.call(f,Math.max(f.length-b,0)):f[f.length-1]};d.rest=d.tail=function(f,b,a){return j.call(f,null==b||a?1:b)};d.compact=function(f){return d.filter(f,function(f){return!!f})};d.flatten=function(f,b){return d.reduce(f,function(f,a){if(d.isArray(a))return f.concat(b?a:d.flatten(a));f[f.length]=a;return f},[])};d.without=function(f){return d.difference(f,j.call(arguments,1))};d.uniq=d.unique=function(f,b,a){var a=a?d.map(f,a):f,e=[];3>f.length&&(b=!0);d.reduce(a,function(a,l,
c){if(b?d.last(a)!==l||!a.length:!d.include(a,l))a.push(l),e.push(f[c]);return a},[]);return e};d.union=function(){return d.uniq(d.flatten(arguments,!0))};d.intersection=d.intersect=function(f){var b=j.call(arguments,1);return d.filter(d.uniq(f),function(f){return d.every(b,function(b){return 0<=d.indexOf(b,f)})})};d.difference=function(f){var b=d.flatten(j.call(arguments,1),!0);return d.filter(f,function(f){return!d.include(b,f)})};d.zip=function(){for(var f=j.call(arguments),b=d.max(d.pluck(f,"length")),
a=Array(b),e=0;e<b;e++)a[e]=d.pluck(f,""+e);return a};d.indexOf=function(f,b,a){if(null==f)return-1;var e;if(a)return a=d.sortedIndex(f,b),f[a]===b?a:-1;if(w&&f.indexOf===w)return f.indexOf(b);a=0;for(e=f.length;a<e;a++)if(a in f&&f[a]===b)return a;return-1};d.lastIndexOf=function(f,b){if(null==f)return-1;if(C&&f.lastIndexOf===C)return f.lastIndexOf(b);for(var a=f.length;a--;)if(a in f&&f[a]===b)return a;return-1};d.range=function(f,b,a){1>=arguments.length&&(b=f||0,f=0);for(var a=arguments[2]||1,
e=Math.max(Math.ceil((b-f)/a),0),d=0,l=Array(e);d<e;)l[d++]=f,f+=a;return l};var v=function(){};d.bind=function(f,b){var a,e;if(f.bind===x&&x)return x.apply(f,j.call(arguments,1));if(!d.isFunction(f))throw new TypeError;e=j.call(arguments,2);return a=function(){if(!(this instanceof a))return f.apply(b,e.concat(j.call(arguments)));v.prototype=f.prototype;var d=new v,l=f.apply(d,e.concat(j.call(arguments)));return Object(l)===l?l:d}};d.bindAll=function(f){var b=j.call(arguments,1);0==b.length&&(b=d.functions(f));
t(b,function(b){f[b]=d.bind(f[b],f)});return f};d.memoize=function(f,b){var a={};b||(b=d.identity);return function(){var e=b.apply(this,arguments);return d.has(a,e)?a[e]:a[e]=f.apply(this,arguments)}};d.delay=function(b,a){var e=j.call(arguments,2);return setTimeout(function(){return b.apply(null,e)},a)};d.defer=function(b){return d.delay.apply(d,[b,1].concat(j.call(arguments,1)))};d.throttle=function(b,a){var e,l,c,m,g,u,p=d.debounce(function(){g=m=!1},a);return function(){e=this;l=arguments;c||
(c=setTimeout(function(){c=null;g&&b.apply(e,l);p()},a));m?g=!0:u=b.apply(e,l);p();m=!0;return u}};d.debounce=function(b,a,e){var d;return function(){var l=this,c=arguments;e&&!d&&b.apply(l,c);clearTimeout(d);d=setTimeout(function(){d=null;e||b.apply(l,c)},a)}};d.once=function(b){var a=!1,e;return function(){if(a)return e;a=!0;return e=b.apply(this,arguments)}};d.wrap=function(b,a){return function(){var e=[b].concat(j.call(arguments,0));return a.apply(this,e)}};d.compose=function(){var b=arguments;
return function(){for(var a=arguments,e=b.length-1;0<=e;e--)a=[b[e].apply(this,a)];return a[0]}};d.after=function(b,a){return 0>=b?a():function(){if(1>--b)return a.apply(this,arguments)}};d.keys=D||function(b){if(b!==Object(b))throw new TypeError("Invalid object");var a=[],e;for(e in b)d.has(b,e)&&(a[a.length]=e);return a};d.values=function(b){return d.map(b,d.identity)};d.functions=d.methods=function(b){var a=[],e;for(e in b)d.isFunction(b[e])&&a.push(e);return a.sort()};d.extend=function(b){t(j.call(arguments,
1),function(a){for(var e in a)b[e]=a[e]});return b};d.pick=function(b){var a={};t(d.flatten(j.call(arguments,1)),function(e){e in b&&(a[e]=b[e])});return a};d.defaults=function(b){t(j.call(arguments,1),function(a){for(var e in a)null==b[e]&&(b[e]=a[e])});return b};d.clone=function(b){return!d.isObject(b)?b:d.isArray(b)?b.slice():d.extend({},b)};d.tap=function(b,a){a(b);return b};d.isEqual=function(b,e){return a(b,e,[])};d.isEmpty=function(b){if(null==b)return!0;if(d.isArray(b)||d.isString(b))return 0===
b.length;for(var a in b)if(d.has(b,a))return!1;return!0};d.isElement=function(b){return!!(b&&1==b.nodeType)};d.isArray=o||function(b){return"[object Array]"==k.call(b)};d.isObject=function(b){return b===Object(b)};d.isArguments=function(b){return"[object Arguments]"==k.call(b)};d.isArguments(arguments)||(d.isArguments=function(b){return!(!b||!d.has(b,"callee"))});d.isFunction=function(b){return"[object Function]"==k.call(b)};d.isString=function(b){return"[object String]"==k.call(b)};d.isNumber=function(b){return"[object Number]"==
k.call(b)};d.isFinite=function(b){return d.isNumber(b)&&isFinite(b)};d.isNaN=function(b){return b!==b};d.isBoolean=function(b){return!0===b||!1===b||"[object Boolean]"==k.call(b)};d.isDate=function(b){return"[object Date]"==k.call(b)};d.isRegExp=function(b){return"[object RegExp]"==k.call(b)};d.isNull=function(b){return null===b};d.isUndefined=function(b){return void 0===b};d.has=function(b,a){return n.call(b,a)};d.noConflict=function(){q._=i;return this};d.identity=function(b){return b};d.times=
function(b,a,e){for(var d=0;d<b;d++)a.call(e,d)};d.escape=function(b){return(""+b).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};d.result=function(b,a){if(null==b)return null;var e=b[a];return d.isFunction(e)?e.call(b):e};d.mixin=function(b){t(d.functions(b),function(a){J(a,d[a]=b[a])})};var B=0;d.uniqueId=function(b){var a=B++;return b?b+a:a};d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,
escape:/<%-([\s\S]+?)%>/g};var l=/.^/,u={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},E;for(E in u)u[u[E]]=E;var F=/\\|'|\r|\n|\t|\u2028|\u2029/g,I=/\\(\\|'|r|n|t|u2028|u2029)/g,G=function(b){return b.replace(I,function(b,a){return u[a]})};d.template=function(b,a,e){e=d.defaults(e||{},d.templateSettings);b="__p+='"+b.replace(F,function(b){return"\\"+u[b]}).replace(e.escape||l,function(b,a){return"'+\n_.escape("+G(a)+")+\n'"}).replace(e.interpolate||l,function(b,a){return"'+\n("+
G(a)+")+\n'"}).replace(e.evaluate||l,function(b,a){return"';\n"+G(a)+"\n;__p+='"})+"';\n";e.variable||(b="with(obj||{}){\n"+b+"}\n");var b="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+b+"return __p;\n",c=new Function(e.variable||"obj","_",b);if(a)return c(a,d);a=function(b){return c.call(this,b,d)};a.source="function("+(e.variable||"obj")+"){\n"+b+"}";return a};d.chain=function(b){return d(b).chain()};var y=function(b){this._wrapped=b};d.prototype=y.prototype;
var H=function(b,a){return a?d(b).chain():b},J=function(b,a){y.prototype[b]=function(){var b=j.call(arguments);s.call(b,this._wrapped);return H(a.apply(d,b),this._chain)}};d.mixin(d);t("pop,push,reverse,shift,sort,splice,unshift".split(","),function(b){var a=c[b];y.prototype[b]=function(){var e=this._wrapped;a.apply(e,arguments);var d=e.length;("shift"==b||"splice"==b)&&0===d&&delete e[0];return H(e,this._chain)}});t(["concat","join","slice"],function(b){var a=c[b];y.prototype[b]=function(){return H(a.apply(this._wrapped,
arguments),this._chain)}});y.prototype.chain=function(){this._chain=!0;return this};y.prototype.value=function(){return this._wrapped}}).call(this);(function(a){var q=String.prototype.trim,i=String.prototype.trimRight,h=String.prototype.trimLeft,c=function(b,a,c){b+="";a=~~a;for(var g=[];0<a;g[--a]=b);return g.join(null==c?"":c)},o=function(b){return null!=b?"["+g.escapeRegExp(b)+"]":"\\s"},j={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},s={},k;for(k in j)s[j[k]]=k;var n=function(){function b(b){return Object.prototype.toString.call(b).slice(8,-1).toLowerCase()}var a=function(){return a.cache.hasOwnProperty(arguments[0])||(a.cache[arguments[0]]=
a.parse(arguments[0])),a.format.call(null,a.cache[arguments[0]],arguments)};return a.format=function(a,e){var g=1,j=a.length,i="",h,k=[],o,d,q,s,v;for(o=0;o<j;o++)if(i=b(a[o]),"string"===i)k.push(a[o]);else if("array"===i){d=a[o];if(d[2]){h=e[g];for(i=0;i<d[2].length;i++){if(!h.hasOwnProperty(d[2][i]))throw Error(n('[_.sprintf] property "%s" does not exist',d[2][i]));h=h[d[2][i]]}}else d[1]?h=e[d[1]]:h=e[g++];if(/[^s]/.test(d[8])&&"number"!=b(h))throw Error(n("[_.sprintf] expecting number but found %s",
b(h)));switch(d[8]){case "b":h=h.toString(2);break;case "c":h=String.fromCharCode(h);break;case "d":h=parseInt(h,10);break;case "e":h=d[7]?h.toExponential(d[7]):h.toExponential();break;case "f":h=d[7]?parseFloat(h).toFixed(d[7]):parseFloat(h);break;case "o":h=h.toString(8);break;case "s":h=(h=""+h)&&d[7]?h.substring(0,d[7]):h;break;case "u":h=Math.abs(h);break;case "x":h=h.toString(16);break;case "X":h=h.toString(16).toUpperCase()}h=/[def]/.test(d[8])&&d[3]&&0<=h?"+"+h:h;s=d[4]?"0"==d[4]?"0":d[4].charAt(1):
" ";v=d[6]-(""+h).length;q=d[6]?c(s,v):"";k.push(d[5]?h+q:q+h)}return k.join("")},a.cache={},a.parse=function(b){for(var a=[],e=[],c=0;b;){if(null!==(a=/^[^\x25]+/.exec(b)))e.push(a[0]);else if(null!==(a=/^\x25{2}/.exec(b)))e.push("%");else{if(null===(a=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b)))throw Error("[_.sprintf] huh?");if(a[2]){var c=c|1,g=[],h=a[2],i=[];if(null===(i=/^([a-z_][a-z_\d]*)/i.exec(h)))throw Error("[_.sprintf] huh?");for(g.push(i[1]);""!==
(h=h.substring(i[0].length));){if(null===(i=/^\.([a-z_][a-z_\d]*)/i.exec(h)))if(null===(i=/^\[(\d+)\]/.exec(h)))throw Error("[_.sprintf] huh?");g.push(i[1])}a[2]=g}else c|=2;if(3===c)throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");e.push(a)}b=b.substring(a[0].length)}return e},a}(),g={VERSION:"2.2.0rc",isBlank:function(b){return/^\s*$/.test(b)},stripTags:function(b){return(""+b).replace(/<\/?[^>]+>/g,"")},capitalize:function(b){return b+="",b.charAt(0).toUpperCase()+
b.substr(1)},chop:function(b,a){return b+="",a=~~a,0<a?b.match(RegExp(".{1,"+a+"}","g")):[b]},clean:function(b){return g.strip(b).replace(/\s+/g," ")},count:function(b,a){return b+="",a+="",b.split(a).length-1},chars:function(b){return(""+b).split("")},escapeHTML:function(b){return(""+b).replace(/[&<>"']/g,function(b){return"&"+s[b]+";"})},unescapeHTML:function(b){return(""+b).replace(/\&([^;]+);/g,function(b,a){var c;return a in j?j[a]:(c=a.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(c[1],
16)):(c=a.match(/^#(\d+)$/))?String.fromCharCode(~~c[1]):b})},escapeRegExp:function(b){return(""+b).replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(b,a,c){b=g.chars(b);return b.splice(~~a,0,""+c),b.join("")},include:function(b,a){return!!~(""+b).indexOf(a)},join:function(){var b=Array.prototype.slice.call(arguments);return b.join(b.shift())},lines:function(b){return(""+b).split("\n")},reverse:function(b){return g.chars(b).reverse().join("")},splice:function(b,a,c,h){b=g.chars(b);return b.splice(~~a,
~~c,h),b.join("")},startsWith:function(b,a){return b+="",a+="",b.length>=a.length&&b.substr(0,a.length)===a},endsWith:function(b,a){return b+="",a+="",b.length>=a.length&&b.substr(b.length-a.length)===a},succ:function(b){var b=b+"",a=g.chars(b);return a.splice(b.length-1,1,String.fromCharCode(b.charCodeAt(b.length-1)+1)),a.join("")},titleize:function(b){return(""+b).replace(/(?:^|\s)\S/g,function(b){return b.toUpperCase()})},camelize:function(b){return g.trim(b).replace(/[-_\s]+(.)?/g,function(b,
a){return a.toUpperCase()})},underscored:function(b){return g.trim(b).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(b){return g.trim(b).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(b){return g.titleize((""+b).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(b){return g.capitalize(g.underscored(b).replace(/_id$/,"").replace(/_/g," "))},trim:function(b,a){return b+="",!a&&q?q.call(b):(a=o(a),b.replace(RegExp("^"+
a+"+|"+a+"+$","g"),""))},ltrim:function(b,a){return b+="",!a&&h?h.call(b):(a=o(a),b.replace(RegExp("^"+a+"+"),""))},rtrim:function(b,a){return b+="",!a&&i?i.call(b):(a=o(a),b.replace(RegExp(a+"+$"),""))},truncate:function(b,a,c){return b+="",c=c||"...",a=~~a,b.length>a?b.slice(0,a)+c:b},prune:function(b,a,c){b+="";a=~~a;c=null!=c?""+c:"...";var h,i,j=b.replace(/\W/g,function(b){return b.toUpperCase()!==b.toLowerCase()?"A":" "});return i=j.charAt(a),h=j.slice(0,a),i&&i.match(/\S/)&&(h=h.replace(/\s\S+$/,
"")),h=g.rtrim(h),(h+c).length>b.length?b:b.substr(0,h.length)+c},words:function(b,a){return g.trim(b,a).split(a||/\s+/)},pad:function(b,a,g,h){var b=b+"",i=0;a=~~a;g?1<g.length&&(g=g.charAt(0)):g=" ";switch(h){case "right":return i=a-b.length,b+c(g,i);case "both":return i=a-b.length,c(g,Math.ceil(i/2))+b+c(g,Math.floor(i/2));default:return i=a-b.length,c(g,i)+b}},lpad:function(b,a,c){return g.pad(b,a,c)},rpad:function(b,a,c){return g.pad(b,a,c,"right")},lrpad:function(b,a,c){return g.pad(b,a,c,"both")},
sprintf:n,vsprintf:function(b,a){return a.unshift(b),n.apply(null,a)},toNumber:function(b,a){var b=b+"",c;c=1*(1*b||0).toFixed(~~a)||0;return 0===c&&!b.match(/^0+$/)?Number.NaN:c},strRight:function(b,a){b+="";a=null!=a?""+a:a;var c=a?b.indexOf(a):-1;return~c?b.slice(c+a.length,b.length):b},strRightBack:function(b,a){b+="";a=null!=a?""+a:a;var c=a?b.lastIndexOf(a):-1;return~c?b.slice(c+a.length,b.length):b},strLeft:function(b,a){b+="";a=null!=a?""+a:a;var c=a?b.indexOf(a):-1;return~c?b.slice(0,c):
b},strLeftBack:function(a,e){a+="";e=null!=e?""+e:e;var c=a.lastIndexOf(e);return~c?a.slice(0,c):a},toSentence:function(a,e,c){e||(e=", ");c||(c=" and ");for(var g=a.length,h="",i=0;i<g;i++)h+=a[i],i===g-2?h+=c:i<g-1&&(h+=e);return h},slugify:function(a){var c=RegExp(o("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a"),"g");return a=(""+a).toLowerCase(),a=a.replace(c,
function(a){return"aaaaaaceeeeeiiiilnooooouuuunczz".charAt("\u0105\u00e0\u00e1\u00e4\u00e2\u00e3\u0107\u0119\u00e8\u00e9\u00eb\u00ea\u00ec\u00ed\u00ef\u00ee\u0142\u0144\u00f2\u00f3\u00f6\u00f4\u00f5\u00f9\u00fa\u00fc\u00fb\u00f1\u00e7\u017c\u017a".indexOf(a))||"-"}),g.dasherize(a.replace(/[^\w\s-]/g,""))},surround:function(a,c){return[c,a,c].join("")},quote:function(a){return g.surround(a,'"')},exports:function(){var a={},c;for(c in this)this.hasOwnProperty(c)&&!c.match(/^(?:include|contains|reverse)$/)&&
(a[c]=this[c]);return a},repeat:c,levenshtein:function(a,c){a+="";c+="";for(var g=[],h,i,j=0;j<=c.length;j++)for(var k=0;k<=a.length;k++)j&&k?a.charAt(k-1)===c.charAt(j-1)?i=h:i=Math.min(g[k],g[k-1],h)+1:i=j+k,h=g[k],g[k]=i;return g.pop()}};g.strip=g.trim;g.lstrip=g.ltrim;g.rstrip=g.rtrim;g.center=g.lrpad;g.rjust=g.lpad;g.ljust=g.rpad;g.contains=g.include;g.q=g.quote;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=g),exports._s=g):"function"==typeof define&&
define.amd?define("underscore.string",function(){return g}):(a._=a._||{},a._.string=a._.str=g)})(this);var XRegExp;
XRegExp=XRegExp||function(a){function q(a,b,c){for(var d in g.prototype)g.prototype.hasOwnProperty(d)&&(a[d]=g.prototype[d]);a.xregexp={captureNames:b,isNative:!!c};return a}function i(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function h(a,b,c){if(!g.isRegExp(a))throw new TypeError("type RegExp expected");b=p.replace.call(i(a)+(b||""),x,"");c&&(b=p.replace.call(b,RegExp("["+c+"]+","g"),""));return a=a.xregexp&&!a.xregexp.isNative?q(g(a.source,
b),a.xregexp.captureNames?a.xregexp.captureNames.slice(0):null):q(RegExp(a.source,b),null,!0)}function c(a,b){var c=a.length;if(Array.prototype.lastIndexOf)return a.lastIndexOf(b);for(;c--;)if(a[c]===b)return c;return-1}function o(a,b){return Object.prototype.toString.call(a).toLowerCase()==="[object "+b+"]"}function j(a){a=a||{};"all"===a||a.all?a={natives:!0,extensibility:!0}:o(a,"string")&&(a=g.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function s(a,b,c,d){var e=w.length,g=null,
h,i;v=!0;try{for(;e--;)if(i=w[e],("all"===i.scope||i.scope===c)&&(!i.trigger||i.trigger.call(d)))if(i.pattern.lastIndex=b,(h=r.exec.call(i.pattern,a))&&h.index===b){g={output:i.handler.call(d,h,c),match:h};break}}catch(j){throw j;}finally{v=!1}return g}function k(a){g.addToken=b[a?"on":"off"];m.extensibility=a}function n(a){RegExp.prototype.exec=(a?r:p).exec;RegExp.prototype.test=(a?r:p).test;String.prototype.match=(a?r:p).match;String.prototype.replace=(a?r:p).replace;String.prototype.split=(a?r:
p).split;m.natives=a}var g,b,e,m={natives:!1,extensibility:!1},p={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},r={},A={},w=[],C={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},D=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,
x=/([\s\S])(?=[\s\S]*\1)/g,d=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,t=p.exec.call(/()??/,"")[1]===a,z=RegExp.prototype.sticky!==a,v=!1,B="gim"+(z?"y":"");g=function(b,c){if(g.isRegExp(b)){if(c!==a)throw new TypeError("can't supply flags when constructing one RegExp from another");return h(b)}if(v)throw Error("can't call the XRegExp constructor within token definition functions");var d=[],e="default",i={hasNamedCapture:!1,captureNames:[],hasFlag:function(a){return-1<c.indexOf(a)}},j=0,k,b=b===a?"":""+b,c=
c===a?"":""+c;if(p.match.call(c,x))throw new SyntaxError("invalid duplicate regular expression flag");b=p.replace.call(b,/^\(\?([\w$]+)\)/,function(a,b){if(p.test.call(/[gy]/,b))throw new SyntaxError("can't use flag g or y in mode modifier");c=p.replace.call(c+b,x,"");return""});for(g.forEach(c,/[\s\S]/,function(a){if(0>B.indexOf(a[0]))throw new SyntaxError("invalid regular expression flag "+a[0]);});j<b.length;)(k=s(b,j,e,i))?(d.push(k.output),j+=k.match[0].length||1):(k=p.exec.call(C[e],b.slice(j)))?
(d.push(k[0]),j+=k[0].length):(k=b.charAt(j),"["===k?e="class":"]"===k&&(e="default"),d.push(k),++j);return q(RegExp(d.join(""),p.replace.call(c,/[^gimy]+/g,"")),i.hasNamedCapture?i.captureNames:null)};b={on:function(a,b,c){c=c||{};a&&w.push({pattern:h(a,"g"+(z?"y":"")),handler:b,scope:c.scope||"default",trigger:c.trigger||null});c.customFlags&&(B=p.replace.call(B+c.customFlags,x,""))},off:function(){throw Error("extensibility must be installed before using addToken");}};g.addToken=b.off;g.cache=
function(a,b){var c=a+"/"+(b||"");return A[c]||(A[c]=g(a,b))};g.escape=function(a){return p.replace.call(a,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};g.exec=function(a,b,c,d){var e=h(b,"g"+(d&&z?"y":""),!1===d?"y":"");e.lastIndex=c=c||0;a=r.exec.call(e,a);d&&a&&a.index!==c&&(a=null);if(b.global)b.lastIndex=a?e.lastIndex:0;return a};g.forEach=function(a,b,c,d){for(var e=0,h=-1;e=g.exec(a,b,e);)c.call(d,e,++h,a,b),e=e.index+(e[0].length||1);return d};g.globalize=function(a){return h(a,"g")};g.install=function(a){a=
j(a);!m.natives&&a.natives&&n(!0);!m.extensibility&&a.extensibility&&k(!0)};g.isInstalled=function(a){return!!m[a]};g.isRegExp=function(a){return o(a,"regexp")};g.matchChain=function(a,b){return function F(a,c){var d=b[c].regex?b[c]:{regex:b[c]},e=[],l=function(a){e.push(d.backref?a[d.backref]||"":a[0])},f;for(f=0;f<a.length;++f)g.forEach(a[f],d.regex,l);return c===b.length-1||!e.length?e:F(e,c+1)}([a],0)};g.replace=function(b,c,d,e){var i=g.isRegExp(c),j=c;i?(e===a&&c.global&&(e="all"),j=h(c,"all"===
e?"g":"","all"===e?"":"g")):"all"===e&&(j=RegExp(g.escape(""+c),"g"));b=r.replace.call(""+b,j,d);if(i&&c.global)c.lastIndex=0;return b};g.split=function(a,b,c){return r.split.call(a,b,c)};g.test=function(a,b,c,d){return!!g.exec(a,b,c,d)};g.uninstall=function(a){a=j(a);m.natives&&a.natives&&n(!1);m.extensibility&&a.extensibility&&k(!1)};g.union=function(a,b){var c=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,d=0,e,h,i=function(a,b,c){var f=h[d-e];if(b){if(++d,f)return"(?<"+f+">"}else if(c)return"\\"+
(+c+e);return a},j=[],k,f;if(!o(a,"array")||!a.length)throw new TypeError("patterns must be a nonempty array");for(f=0;f<a.length;++f)k=a[f],g.isRegExp(k)?(e=d,h=k.xregexp&&k.xregexp.captureNames||[],j.push(g(k.source).source.replace(c,i))):j.push(g.escape(k));return g(j.join("|"),b)};g.version="2.0.0";r.exec=function(b){var d,e,g,h;if(!this.global)g=this.lastIndex;if(d=p.exec.apply(this,arguments)){!t&&1<d.length&&-1<c(d,"")&&(e=RegExp(this.source,p.replace.call(i(this),"g","")),p.replace.call((""+
b).slice(d.index),e,function(){var b;for(b=1;b<arguments.length-2;++b)arguments[b]===a&&(d[b]=a)}));if(this.xregexp&&this.xregexp.captureNames)for(h=1;h<d.length;++h)(e=this.xregexp.captureNames[h-1])&&(d[e]=d[h]);if(this.global&&!d[0].length&&this.lastIndex>d.index)this.lastIndex=d.index}if(!this.global)this.lastIndex=g;return d};r.test=function(a){return!!r.exec.call(this,a)};r.match=function(a){if(g.isRegExp(a)){if(a.global){var b=p.match.apply(this,arguments);a.lastIndex=0;return b}}else a=RegExp(a);
return r.exec.call(a,this)};r.replace=function(a,b){var d=g.isRegExp(a),e,h,i;if(d){if(a.xregexp)e=a.xregexp.captureNames;if(!a.global)i=a.lastIndex}else a+="";h=o(b,"function")?p.replace.call(""+this,a,function(){var c=arguments,g;if(e){c[0]=new String(c[0]);for(g=0;g<e.length;++g)e[g]&&(c[0][e[g]]=c[g+1])}if(d&&a.global)a.lastIndex=c[c.length-2]+c[0].length;return b.apply(null,c)}):p.replace.call(""+this,a,function(){var a=arguments;return p.replace.call(""+b,D,function(b,d,f){if(d){f=+d;if(f<=
a.length-3)return a[f]||"";f=e?c(e,d):-1;if(0>f)throw new SyntaxError("backreference to undefined group "+b);return a[f+1]||""}if("$"===f)return"$";if("&"===f||0===+f)return a[0];if("`"===f)return a[a.length-1].slice(0,a[a.length-2]);if("'"===f)return a[a.length-1].slice(a[a.length-2]+a[0].length);f=+f;if(!isNaN(f)){if(f>a.length-3)throw new SyntaxError("backreference to undefined group "+b);return a[f]||""}throw new SyntaxError("invalid token "+b);})});if(d)a.lastIndex=a.global?0:i;return h};r.split=
function(b,c){if(!g.isRegExp(b))return p.split.apply(this,arguments);var d=""+this,e=b.lastIndex,h=[],i=0,j,c=(c===a?-1:c)>>>0;g.forEach(d,b,function(a){if(a.index+a[0].length>i)h.push(d.slice(i,a.index)),1<a.length&&a.index<d.length&&Array.prototype.push.apply(h,a.slice(1)),j=a[0].length,i=a.index+j});i===d.length?(!p.test.call(b,"")||j)&&h.push(""):h.push(d.slice(i));b.lastIndex=e;return h.length>c?h.slice(0,c):h};e=b.on;e(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,
function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("invalid escape "+a[0]);},{scope:"all"});e(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});e(/(?:\(\?#[^)]*\))+/,function(a){return p.test.call(d,a.input.slice(a.index+a[0].length))?"":"(?:)"});e(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?c(this.captureNames,a[1])+1:+a[1],d=a.index+a[0].length;if(!b||b>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+a[0]);return"\\"+b+(d===a.input.length||
isNaN(a.input.charAt(d))?"":"(?:)")});e(/(?:\s+|#.*)+/,function(a){return p.test.call(d,a.input.slice(a.index+a[0].length))?"":"(?:)"},{trigger:function(){return this.hasFlag("x")},customFlags:"x"});e(/\./,function(){return"[\\s\\S]"},{trigger:function(){return this.hasFlag("s")},customFlags:"s"});e(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("can't use integer as capture name "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});e(/\\(\d+)/,function(a,
b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});e(/\((?!\?)/,function(){if(this.hasFlag("n"))return"(?:";this.captureNames.push(null);return"("},{customFlags:"n"});if("undefined"!==typeof exports)exports.XRegExp=g;return g}();;(function(){"use strict";function f(a){throw a;}var i=void 0,j=!0,k=null,l=!1;function aa(){return function(a){return a}}function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function n(a){return function(){return this[a]}}function da(a){return function(){return a}}var o;function p(a,b){for(var c=a.split("."),d=GLOBAL,e;c.length&&(e=c.shift());)!c.length&&b!==i?d[e]=b:d=d[e]?d[e]:d[e]={}};jQuery.find.matchesSelector=function(){var a=jQuery.find.matchesSelector;return function(b,c){return/^[A-Za-z]+$/.test(c)?1===b.nodeType&&b.nodeName===(jQuery.isXMLDoc(b)?c:c.toUpperCase()):a.call(this,b,c)}}();parseUri.options.strictMode=j;jQuery.cookie.raw=j;var _=GLOBAL._.noConflict();function ea(){}function q(){f(Error("Unimplemented abstract method"))}function fa(){f(new ga("Unsupported operation"))}function ha(a,b){var c;a?(c=ba(),c.prototype=a,c=new c):c={};b&&jQuery.extend(c,b);return c}function s(a,b){a._super=b.prototype;a.prototype=ha(b.prototype);a.prototype.constructor=a}
function ia(a,b,c){function d(e){var e=e||a,g=b.call(this,e);jQuery.extend(this,g);this.name=a;this.message=g.message;"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(g,d);if(g.stack!==i)this.stack=g.stack.split(/\n+/).slice(1).join("\n");c&&c.apply(this,jQuery.makeArray(arguments))}b=b||GLOBAL.Error;s(d,b);return d}
function ja(a,b){if("undefined"===typeof a||a===k)return"Object is null or undefined";var c;c="function"===typeof b?b.prototype:b;var d,e,g;for(g in c){d=typeof c[g];e=typeof a[g];if("undefined"===e)return"Missing property '"+g+"'";if("function"===d&&"function"!==e||"function"!==d&&"function"===e)return"Property '"+g+"' "+("function"===d?"should be":"should not be")+" a function"}return k}function ka(a){try{return jsDump.parse(a)}catch(b){return"[Error dumping object: "+b+"]"}};function la(){}var ma=function(){var a=k;return function(){return a||(a=new la)}}();o=la.prototype;o.getInfo=function(){var a=GLOBAL.navigator;return a?a.userAgent||k:k};o.supportsStack=function(){var a="stack"in Error();la.prototype.supportsStack=function(){return a};return a};o.supportsStackLineNumbers=function(){return na().lines};o.supportsStackCharNumbers=function(){return na().chars};o.supportsStackParameters=function(){return na().params};
function na(){var a=oa();la.prototype.supportsStackLineNumbers=function(){return a.lines};la.prototype.supportsStackCharNumbers=function(){return a.chars};la.prototype.supportsStackParameters=function(){return a.params};return a}
function oa(){function a(a){var b=[];XRegExp.forEach(a,r,function(a){b.push(Number(a[0]))});return b}var b={params:l,lines:l,chars:l},c=l;if(c=function(){var a=k;Error.prepareStackTrace=function(b,c){a=c[0]||k};var c=Error().stack;delete Error.prepareStackTrace;return a?(b.lines="getLineNumber"in a,b.chars="getColumnNumber"in a,c===c):l}())return b;var c=new Function("function x(x1,x2) {\n    function y(y1,y2) {\n        throw new RangeError();\n    }\n    y(x1,x2);\n}\nx('par_one','par_two');"),
d=[["par_one","par_two"],["par_one","par_two"],[]],e=[2,2],g=[-10,-4],h=k;try{c()}catch(m){"string"===typeof m.stack&&(h=m.stack.split(/\n+/))}var r=/\b\d+\b/g;if(h){0<=h[0].indexOf("RangeError")&&h.shift();var R=[],J=[],Ka=j;jQuery(h).slice(0,d.length).each(function(b){var c=a(this),e;if(0<b){e=J.length;for(var g=R[b-1];0<=e--;)J[e].push((c[e]||0)-(g[e]||0))}else for(e=c.length;0<=e--;)J[e]=[];R.push(c);var h=[];jQuery.each(d[b],function(){h.push(XRegExp.escape(this))});b=XRegExp("\\b"+h.join("\\b.+?\\b")+
"\\b","");Ka&&!b.test(this)&&(Ka=l)});var Gd=function(a,b){if(a.length!==b.length)return l;for(var c=-1,d=a.length;++c<d;)if(a[c]!==b[c])return l;return j};jQuery.each(J,function(){if(Gd(this,e))b.lines=j;if(Gd(this,g))b.chars=j});b.params=Ka}return b}
o.supportsPropertyDefinition=function(){var a=l;if("function"===typeof Object.defineProperty){var b=document.createElement("test"),c={};try{var d={get:da("_test_value")};Object.defineProperty(b,"_test_property",d);Object.defineProperty(c,"_test_property",d);a="_test_value"===b._test_property&&"_test_value"===c._test_property}catch(e){}finally{b=k}}la.prototype.supportsPropertyDefinition=function(){return a};return a};var pa=ia("internal.ui.html.EvalError",GLOBAL.Error,function(a,b,c){this.cause=b;this.sourceCode=c});function qa(a){a=a||"0";ra.test(a)||f(Error("Invalid hexadecimal number: "+a));for(var b=a.length,c=4*b,d=Math.ceil(c/28),e=[],g=0;g<d;g++)e.push(parseInt(a.substring(b-7*(g+1),b-7*g),16));this._bitSize=c;this._chunks=e}var ra=/[0-9A-Fa-f]+/;qa.prototype.toString=function(){for(var a=[],b=this._chunks.length-1;0<=b;b--)a.push(_.str.lpad(this._chunks[b].toString(16),7,"0"));a=a.join("");return a.substring(a.length-this._bitSize/4)};function sa(){this._table=new Hashtable(ta,ua)}var va=0;function ta(a){if(a===k)return"l";if(a===i)return"u";if("function"===typeof a.hashCode)return"_"+ta(a.hashCode());var b=typeof a;return"object"===b||"function"===b?(b=a.__wr_map_hash,b===i&&(b=va++,wa(a,"__wr_map_hash",{value:b})),"o"+b):b.substring(0,1)+a.toString()}function ua(a,b){return a&&a.equals!==i?a.equals(b):b&&b.equals!==i?b.equals(a):a===b}var xa={};function ya(a){return a===xa?k:a}o=sa.prototype;
o.put=function(a,b){var a=a===k?xa:a,b=b===k?xa:b,c=this._table.put(a,b);return c===k?i:ya(c)};o.remove=function(a){a=a===k?xa:a;a=this._table.remove(a);return a===k?i:ya(a)};o.clear=function(){this._table.clear()};o.getSize=function(){return this._table.size()};o.get=function(a){a=a===k?xa:a;a=this._table.get(a);return a===k?i:ya(a)};o.getValues=function(){for(var a=this._table.values(),b=-1,c=a.length;++b<c;)a[b]=ya(a[b]);return a};
o.each=function(a){a&&this._table.each(function(b,c){b=ya(b);c=ya(c);a(b,c)})};function za(a,b){for(var c=-1,d=a.length;++c<d;)if(a[c]===b){a.splice(c,1);break}};function Aa(a,b){if(!a)return b;if(!b)return a;var c=parseUri(b);if(c.authority)return b;var d=parseUri(a);if(c.path)d.path=Ba(_.str.startsWith(c.path,"/")?c.path:d.path+"/"+c.path);if(c.path||c.query)d.query=c.query;if(c.path||c.query||c.anchor)d.anchor=c.anchor;return Ca(d)}
function Ba(a){var b;0===a.indexOf("/")?(b=j,a=a.substring(1)):b=l;var c=[],d=0;jQuery.each(a.split("/"),function(a,g){g&&"."!==g&&(".."===g?0<d?(c.pop(),d--):(b&&f(Error("Attempt to go up above root directory")),c.push("..")):(c.push(g),d++))});return(b?"/":"")+c.join("/")}
function Ca(a){function b(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];b.push(c+(d?"="+d:""))}return b.join("&")}var c=parseUri(a.source);if(a.user!==c.user||a.password!==c.password)a.userInfo=a.user?a.user+(a.password?":"+a.password:""):"";if(a.userInfo!==c.userInfo||a.host!==c.host||a.port!==c.port)a.authority=a.host?(a.userInfo?a.userInfo+"@":"")+a.host+(a.port?":"+a.port:""):"";if(a.file!==c.file||a.directory!==c.directory)a.path=a.file?(a.directory?a.directory+"/":"")+a.file:"";
var d=b(a.queryKey),e=b(c.queryKey);if(d!==e)a.query=d;if(a.path!==c.path||a.query!==c.query||a.anchor!==c.anchor)a.relative=a.path?a.path+(a.query?"?"+a.query:"")+(a.anchor?"#"+a.anchor:""):"";return a.protocol!==c.protocol||a.authority!==c.authority||a.relative!==c.relative?(a.protocol?a.protocol+"://":"")+(a.authority||"")+(a.relative||""):a.source}
function Da(a,b){if(!b)return a;var c="string"===typeof b?b:jQuery.param(b);if(!c)return a;var d=parseUri(a);d.query=d.query?d.query+"&"+c:c;return Ca(d)};function Ea(){}p("wr.Disposable",Ea);Ea.prototype.dispose=q;Ea.prototype.dispose=Ea.prototype.dispose;function Fa(){}p("wr.Initializable",Fa);Fa.prototype.init=q;Fa.prototype.init=Fa.prototype.init;function Ga(){}p("wr.Platform",Ga);Ga.prototype.getInfo=q;Ga.prototype.getInfo=Ga.prototype.getInfo;Ga.prototype.supportsStack=q;Ga.prototype.supportsStack=Ga.prototype.supportsStack;Ga.prototype.supportsStackLineNumbers=q;Ga.prototype.supportsStackLineNumbers=Ga.prototype.supportsStackLineNumbers;Ga.prototype.supportsStackCharNumbers=q;Ga.prototype.supportsStackCharNumbers=Ga.prototype.supportsStackCharNumbers;Ga.prototype.supportsStackParameters=q;Ga.prototype.supportsStackParameters=Ga.prototype.supportsStackParameters;
Ga.prototype.supportsPropertyDefinition=q;Ga.prototype.supportsPropertyDefinition=Ga.prototype.supportsPropertyDefinition;function Ha(){}p("wr.Startable",Ha);Ha.prototype.start=q;Ha.prototype.start=Ha.prototype.start;var t=ia("wr.StateError");p("wr.StateError",t);function Ia(){}p("wr.Stoppable",Ia);Ia.prototype.stop=q;Ia.prototype.stop=Ia.prototype.stop;var ga=ia("wr.UnsupportedError");p("wr.UnsupportedError",ga);function Ja(){this._app=k}p("wr.app.AbstractPlugin",Ja);Ja.prototype.getApp=n("_app");Ja.prototype.getApp=Ja.prototype.getApp;Ja.prototype.setApp=ca("_app");Ja.prototype.setApp=Ja.prototype.setApp;Ja.prototype.configure=ea;Ja.prototype.configure=Ja.prototype.configure;
Ja.prototype.configureObjectsList=function(a,b,c,d){var e=this,g=a[b];return this._app.getConfigPlugin().readInstanceListFactory(g||[]).newInstance().chain(function(a){var b=_.isArray(g)&&g.length===a.length?g:k;c.call(e);for(var r=-1,R=a.length;++r<R;){var J=b&&b[r];J&&(J=jQuery.extend({},J),delete J.name,delete J.url);d.call(e,a[r],J)}})};Ja.prototype.configureObjectsList=Ja.prototype.configureObjectsList;function La(){}p("wr.app.AppAware",La);La.prototype.setApp=q;La.prototype.setApp=La.prototype.setApp;p("wr.app.ResourceType",{SCRIPT:"script"});var Ma={config:{implementation:"wr.config.ConfigPlugin",handlers:["wr.config.ObjectConfigHandler","wr.config.JsonConfigHandler"]}};p("wr.app.defaultConfig",Ma);function u(a,b){var c=this;this._size=b.length;this._results=[];this._sortedResults=[];this._errors=[];this._result=new v;jQuery.each(b,function(b){this.onSuccess(function(e){c._results.push(e);c._sortedResults[b]=e;c._result._resolved||a.call(c,c._result)}).onFailure(function(b){c._errors.push(b);c._result._resolved||a.call(c,c._result)})});this._result._resolved||a.call(this,this._result)}p("wr.async.Condition",u);u.prototype.getSize=n("_size");u.prototype.getSize=u.prototype.getSize;
u.prototype.getResults=n("_results");u.prototype.getResults=u.prototype.getResults;u.prototype.getSortedResults=n("_sortedResults");u.prototype.getSortedResults=u.prototype.getSortedResults;u.prototype.getErrors=n("_errors");u.prototype.getErrors=u.prototype.getErrors;u.prototype.onSuccess=function(a){return this._result._promise.onSuccess(a)};u.prototype.onSuccess=u.prototype.onSuccess;u.prototype.onFailure=function(a){return this._result._promise.onFailure(a)};u.prototype.onFailure=u.prototype.onFailure;
u.prototype.onComplete=function(a){return this._result._promise.onComplete(a)};u.prototype.onComplete=u.prototype.onComplete;u.prototype.chain=function(a,b){return this._result._promise.chain(a,b)};u.prototype.chain=u.prototype.chain;function Na(a){return new u(function(a){var c=this._errors;0<c.length?a.failure(c[0]):this._results.length===this.getSize()&&a.success(this._sortedResults)},jQuery.makeArray(arguments))}u.allSuccess=Na;function Oa(){}p("wr.async.Promise",Oa);Oa.prototype.onSuccess=q;Oa.prototype.onSuccess=Oa.prototype.onSuccess;Oa.prototype.onFailure=q;Oa.prototype.onFailure=Oa.prototype.onFailure;Oa.prototype.onComplete=q;Oa.prototype.onComplete=Oa.prototype.onComplete;Oa.prototype.chain=q;Oa.prototype.chain=Oa.prototype.chain;function Pa(a){return ja(a,Oa)===k}p("wr.async.isPromise",Pa);function Qa(a,b,c){var d=jQuery.makeArray(arguments);d.shift();d.shift();return Ra(a,b,d)}p("wr.async.call",Qa);function Ra(a,b,c){var d;try{var e=a.apply(b||GLOBAL,c||[]);d=Pa(e)?e:new Sa(e)}catch(g){d=new Sa(g)}return d}p("wr.async.apply",Ra);function Ta(){}Ta.prototype.onSuccess=q;Ta.prototype.onFailure=q;Ta.prototype.onComplete=q;Ta.prototype.chain=function(a,b){function c(a){a.onSuccess(function(a){d.resolve(a)}).onFailure(function(a){d.reject(a)})}if(!a)return this;var d=jQuery.Deferred();this.onSuccess(function(b){b=a(b);Pa(b)?c(b):d.resolve(b)});if(b)this.onFailure(function(a){a=b(a);Pa(a)?c(a):d.reject(a)});else this.onFailure(function(a){d.reject(a)});return new Ua(d)};function Ua(a){this._deferred=a}s(Ua,Ta);Ua.prototype.onSuccess=function(a){this._deferred.done(a);return this};Ua.prototype.onFailure=function(a){this._deferred.fail(a);return this};Ua.prototype.onComplete=function(a){this._deferred.always(a);return this};function Va(a){this._deferred=a}s(Va,Ua);Va.prototype.onFailure=function(a){return Va._super.onFailure.call(this,function(b){a(Error(b.status+" "+b.statusText))})};Va.prototype.onComplete=function(a){var b=this;return Va._super.onComplete.call(b,function(c){"rejected"===b._deferred.state()?a(Error(c.status+" "+c.statusText)):"resolved"===b._deferred.state()&&a(c)})};function Sa(a){this._result=a}s(Sa,Ta);p("wr.async.FixedPromise",Sa);Sa.prototype.onSuccess=function(a){a&&!(this._result instanceof Error)&&a(this._result);return this};Sa.prototype.onSuccess=Sa.prototype.onSuccess;Sa.prototype.onFailure=function(a){a&&this._result instanceof Error&&a(this._result);return this};Sa.prototype.onFailure=Sa.prototype.onFailure;Sa.prototype.onComplete=function(a){a&&a(this._result);return this};Sa.prototype.onComplete=Sa.prototype.onComplete;var Wa=new Sa(i);
Sa.UNDEFINED=Wa;function v(){this._deferred=new jQuery.Deferred;this._resolved=l;this._promise=new Ua(this._deferred)}p("wr.async.Result",v);v.prototype.isResolved=n("_resolved");v.prototype.isResolved=v.prototype.isResolved;v.prototype.getPromise=n("_promise");v.prototype.getPromise=v.prototype.getPromise;v.prototype.success=function(a){this._resolved&&f(new t("Result already resolved"));this._resolved=j;this._deferred.resolve(a!==i?a:i)};v.prototype.success=v.prototype.success;
v.prototype.failure=function(a){this._resolved&&f(new t("Result already resolved"));this._resolved=j;this._deferred.reject(a)};v.prototype.failure=v.prototype.failure;function Xa(){}p("wr.config.ConfigHandler",Xa);Xa.prototype.accept=q;Xa.prototype.accept=Xa.prototype.accept;Xa.prototype.getRequiredFiles=q;Xa.prototype.getRequiredFiles=Xa.prototype.getRequiredFiles;Xa.prototype.merge=q;Xa.prototype.merge=Xa.prototype.merge;function Ya(){}p("wr.config.Configurable",Ya);Ya.prototype.configure=q;Ya.prototype.configure=Ya.prototype.configure;function Za(){}p("wr.app.Plugin",Za);Za.prototype.setApp=q;Za.prototype.setApp=Za.prototype.setApp;Za.prototype.getApp=q;Za.prototype.getApp=Za.prototype.getApp;function $a(){}p("wr.config.ObjectConfigHandler",$a);$a.prototype.accept=function(a){return a instanceof Object};$a.prototype.accept=$a.prototype.accept;$a.prototype.getRequiredFiles=function(a){a instanceof Object||f(Error("Invalid new configuration provided"));var b=[];if(a=a._require)jQuery.isArray(a)||(a=[a]),jQuery.each(a,function(a,d){"string"===typeof d&&1<d.length||f(Error("Invalid configuration file"));b.push(d)});return b};$a.prototype.getRequiredFiles=$a.prototype.getRequiredFiles;
$a.prototype.merge=function(a,b){b instanceof Object||f(Error("Invalid new configuration provided"));ab(this,a,b,"")};$a.prototype.merge=$a.prototype.merge;
function ab(a,b,c,d){for(var e in c)if(c.hasOwnProperty(e)&&"_require"!==e){var g,h;"+"===e.charAt(e.length-1)?(g=j,h=e.slice(0,-1)):(g=l,h=e);var m=c[e],r=b[h];if(g)if(r instanceof Object)if(jQuery.isArray(r))if(g=r,jQuery.isArray(m)){h=0;for(r=m.length;h<r;h++)g.push(m[h])}else g.push(m);else m instanceof Object?ab(a,r,m,d+"."+h):f(Error("Unable to merge a primitive value into object value of property '"+h+"'"+(d?" in '"+d+"'":"")));else f(Error("Unable to merge a new value into primitive or missing value of property '"+
h+"'"+(d?" in '"+d+"'":"")));else b[h]=m}};function bb(){this._objConfigHandler=new $a}p("wr.config.JsonConfigHandler",bb);bb.prototype.accept=function(a,b){if(b){var c=b.substring(b.lastIndexOf(".")+1);return"string"===typeof a&&"json"===c}return l};bb.prototype.accept=bb.prototype.accept;bb.prototype.getRequiredFiles=function(a,b){"string"!==typeof a&&f(Error("Invalid new configuration provided"));return this._objConfigHandler.getRequiredFiles(jQuery.parseJSON(a),b)};bb.prototype.getRequiredFiles=bb.prototype.getRequiredFiles;
bb.prototype.merge=function(a,b,c){"string"!==typeof b&&f(Error("Invalid new configuration provided"));b=jQuery.parseJSON(b);this._objConfigHandler.merge(a,b,c)};bb.prototype.merge=bb.prototype.merge;function cb(a,b,c){var d,e;"string"===typeof a?(d=a,e=k):"object"===typeof a&&a!==k?(d=a.name,e=a.url):f(Error("Invalid instance factory configuration"));return new db(d,b,e,c)}p("wr.config.readInstanceFactory",cb);function eb(a,b,c){if("string"===typeof a||"object"===typeof a&&a!==k){var d=[];jQuery.isArray(a)||(a=[a]);jQuery.each(a,function(a,g){d.push(cb(g,b,c))});return new fb(d)}f(Error("Invalid instance list factory configuration"))}p("wr.config.readInstanceListFactory",eb);function gb(a,b,c){this._type=a;this._sourceObject=b;this._property=c}p("wr.data.Event",gb);gb.prototype.getType=n("_type");gb.prototype.getType=gb.prototype.getType;gb.prototype.getSourceObject=n("_sourceObject");gb.prototype.getSourceObject=gb.prototype.getSourceObject;gb.prototype.getProperty=n("_property");gb.prototype.getProperty=gb.prototype.getProperty;p("wr.data.EventType",{ADD:"add",CHANGE:"change",REMOVE:"remove"});function hb(){}p("wr.data.Object",hb);hb.prototype.get=q;hb.prototype.get=hb.prototype.get;hb.prototype.set=q;hb.prototype.set=hb.prototype.set;hb.prototype.remove=q;hb.prototype.remove=hb.prototype.remove;hb.prototype.toObject=q;hb.prototype.toObject=hb.prototype.toObject;hb.prototype.addEventListener=q;hb.prototype.addEventListener=hb.prototype.addEventListener;hb.prototype.removeEventListener=q;hb.prototype.removeEventListener=hb.prototype.removeEventListener;hb.prototype.triggerEvent=q;
hb.prototype.triggerEvent=hb.prototype.triggerEvent;p("wr.data.Type",{BLOB:"blob",BOOLEAN:"boolean",DATE:"date",DECIMAL:"decimal",FLOAT:"float",INTEGER:"integer",PASSWORD:"password",STRING:"string",TEXT:"text",TIME:"time",TIMESTAMP:"timestamp",URL:"url"});var ib={ERROR:1,WARN:2,INFO:3,DEBUG:4};p("wr.log.Level",ib);function jb(){this._level=4}p("wr.log.AbstractAppender",jb);jb.prototype.setup=function(a){if(a=a&&a.level)this._level=a};jb.prototype.setup=jb.prototype.setup;jb.prototype.append=function(a){a.getLevel()<=this._level&&this.appendFiltered(a)};jb.prototype.append=jb.prototype.append;jb.prototype.appendFiltered=q;jb.prototype.appendFiltered=jb.prototype.appendFiltered;function kb(){}p("wr.log.Appender",kb);kb.prototype.setup=q;kb.prototype.setup=kb.prototype.setup;kb.prototype.append=q;kb.prototype.append=kb.prototype.append;function w(){}p("wr.log.Log",w);w.prototype.isErrorEnabled=q;w.prototype.isErrorEnabled=w.prototype.isErrorEnabled;w.prototype.error=q;w.prototype.error=w.prototype.error;w.prototype.isWarnEnabled=q;w.prototype.isWarnEnabled=w.prototype.isWarnEnabled;w.prototype.warn=q;w.prototype.warn=w.prototype.warn;w.prototype.isInfoEnabled=q;w.prototype.isInfoEnabled=w.prototype.isInfoEnabled;w.prototype.info=q;w.prototype.info=w.prototype.info;w.prototype.isDebugEnabled=q;w.prototype.isDebugEnabled=w.prototype.isDebugEnabled;
w.prototype.debug=q;w.prototype.debug=w.prototype.debug;function lb(){}p("wr.log.LogEvent",lb);lb.prototype.getTimestamp=q;lb.prototype.getTimestamp=lb.prototype.getTimestamp;lb.prototype.getCategory=q;lb.prototype.getCategory=lb.prototype.getCategory;lb.prototype.getLevel=q;lb.prototype.getLevel=lb.prototype.getLevel;lb.prototype.getMessage=q;lb.prototype.getMessage=lb.prototype.getMessage;lb.prototype.getErrorInfo=q;lb.prototype.getErrorInfo=lb.prototype.getErrorInfo;function mb(){}p("wr.logic.AbstractActor",mb);mb.prototype.execute=q;mb.prototype.execute=mb.prototype.execute;mb.prototype.setup=ba();mb.prototype.setup=mb.prototype.setup;mb.prototype.destroy=ba();mb.prototype.destroy=mb.prototype.destroy;function nb(){}p("wr.logic.Actor",nb);nb.prototype.setup=q;nb.prototype.setup=nb.prototype.setup;nb.prototype.destroy=q;nb.prototype.destroy=nb.prototype.destroy;nb.prototype.execute=q;nb.prototype.execute=nb.prototype.execute;function ob(a,b,c){!b&&c===i&&f(Error("Either source name or source value is required"));this._targetName=a;this._sourceName=b;this._sourceValue=c}p("wr.logic.Coupling",ob);ob.prototype.getTargetName=n("_targetName");ob.prototype.getTargetName=ob.prototype.getTargetName;ob.prototype.getSourceName=n("_sourceName");ob.prototype.getSourceName=ob.prototype.getSourceName;ob.prototype.getSourceValue=n("_sourceValue");ob.prototype.getSourceValue=ob.prototype.getSourceValue;function pb(){}p("wr.nav.AbstractRouter",pb);pb.prototype.route=function(a){var b=this.isRequestImplemented(a);this.alterRequest(a);b&&this.implementRequest(a)};pb.prototype.route=pb.prototype.route;pb.prototype.precompute=function(a){var b=this.isRequestImplemented(a);this.alterRequest(a);return b};pb.prototype.precompute=pb.prototype.precompute;pb.prototype.alterRequest=ba();pb.prototype.alterRequest=pb.prototype.alterRequest;pb.prototype.isRequestImplemented=da(l);
pb.prototype.isRequestImplemented=pb.prototype.isRequestImplemented;pb.prototype.implementRequest=fa;pb.prototype.implementRequest=pb.prototype.implementRequest;function x(){}p("wr.nav.NavListener",x);x.prototype.requestEnqueue=q;x.prototype.requestEnqueue=x.prototype.requestEnqueue;x.prototype.requestCancel=q;x.prototype.requestCancel=x.prototype.requestCancel;x.prototype.requestBeforeServe=q;x.prototype.requestBeforeServe=x.prototype.requestBeforeServe;x.prototype.requestServe=q;x.prototype.requestServe=x.prototype.requestServe;x.prototype.requestRoute=q;x.prototype.requestRoute=x.prototype.requestRoute;x.prototype.requestStart=q;
x.prototype.requestStart=x.prototype.requestStart;x.prototype.requestSuccess=q;x.prototype.requestSuccess=x.prototype.requestSuccess;x.prototype.requestFailure=q;x.prototype.requestFailure=x.prototype.requestFailure;p("wr.nav.ResponseType",{HTML:"html",JSON:"json",XML:"xml"});function qb(){}p("wr.nav.Router",qb);qb.prototype.route=q;qb.prototype.route=qb.prototype.route;qb.prototype.precompute=q;qb.prototype.precompute=qb.prototype.precompute;p("wr.ui.Attribute",{ENABLED:"enabled",VISIBLE:"visible",FOCUSED:"focused",SHOW_EFFECT:"showEffect",HIDE_EFFECT:"hideEffect",WIDTH:"width",HEIGHT:"height",RESIZABLE:"resizable",AUTO_RESIZE:"autoResize",DRAGGABLE:"draggable",CURSOR_TYPE:"cursorType",OPEN:"open",MODAL:"modal",MAXIMIZABLE:"maximizable",MINIMIZABLE:"minimizable",CLOSABLE:"closable"});function rb(){}p("wr.ui.ContextRegistry",rb);rb.prototype.addContext=q;rb.prototype.addContext=rb.prototype.addContext;rb.prototype.removeContext=q;rb.prototype.removeContext=rb.prototype.removeContext;function sb(){}p("wr.ui.ControlFactory",sb);sb.prototype.create=q;sb.prototype.create=sb.prototype.create;sb.prototype.destroy=q;sb.prototype.destroy=sb.prototype.destroy;p("wr.ui.CursorType",{POINTER:"pointer",WAIT:"wait"});p("wr.ui.EffectType",{FADE:"fade",BLIND:"blind",SLIDE:"slide",SCALE:"scale"});function tb(a,b,c){this._type=a;this._sourceControl=b;this._sourceView=c}p("wr.ui.Event",tb);tb.prototype.getType=n("_type");tb.prototype.getType=tb.prototype.getType;tb.prototype.getSourceControl=n("_sourceControl");tb.prototype.getSourceControl=tb.prototype.getSourceControl;tb.prototype.getSourceView=n("_sourceView");tb.prototype.getSourceView=tb.prototype.getSourceView;tb.prototype.toString=function(){return"Event:"+this._type+":("+this._sourceControl+","+this._sourceView+")"};
tb.prototype.toString=tb.prototype.toString;var ub={FOCUS:"focus",BLUR:"blur",CLICK:"click",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",CHANGE:"change",OPEN:"open",CLOSE:"close",CONTENT_CHANGE:"contentchange"};p("wr.ui.EventType",ub);function y(){}p("wr.ui.Viewer",y);y.prototype.getView=q;y.prototype.getView=y.prototype.getView;y.prototype.getIndexes=q;y.prototype.getIndexes=y.prototype.getIndexes;y.prototype.setup=q;y.prototype.setup=y.prototype.setup;y.prototype.destroy=q;y.prototype.destroy=y.prototype.destroy;y.prototype.isContextProvider=q;y.prototype.isContextProvider=y.prototype.isContextProvider;y.prototype.setContextRegistry=q;y.prototype.setContextRegistry=y.prototype.setContextRegistry;
y.prototype.getContextRegistry=q;y.prototype.getContextRegistry=y.prototype.getContextRegistry;y.prototype.refreshSubViews=q;y.prototype.refreshSubViews=y.prototype.refreshSubViews;y.prototype.writeAttributes=q;y.prototype.writeAttributes=y.prototype.writeAttributes;y.prototype.readAttributes=q;y.prototype.readAttributes=y.prototype.readAttributes;y.prototype.writeData=q;y.prototype.writeData=y.prototype.writeData;y.prototype.readData=q;y.prototype.readData=y.prototype.readData;
y.prototype.addEventListener=q;y.prototype.addEventListener=y.prototype.addEventListener;y.prototype.removeEventListener=q;y.prototype.removeEventListener=y.prototype.removeEventListener;var vb={fade:"fade",blind:"blind",slide:"slide",scale:"scale"},wb={fade:"fade",blind:"blind",slide:"slide",scale:"scale"};function xb(a){return(a=vb[a])?{effect:a,duration:150}:k}p("wr.ui.jquery.getJQueryEffect",xb);function yb(a){return wb[a.effect||a]}p("wr.ui.jquery.getEffectType",yb);function zb(a){this._error=a;this._name=a.name.valueOf();this._message=a.message?""+a.message.valueOf():k}p("wr.util.ErrorInfo",zb);zb.prototype.getError=n("_error");zb.prototype.getError=zb.prototype.getError;zb.prototype.getName=n("_name");zb.prototype.getName=zb.prototype.getName;zb.prototype.getMessage=n("_message");zb.prototype.getMessage=zb.prototype.getMessage;
zb.prototype.getStack=function(){if(this._stack===i){var a=this._error.stack;if(!a)return k;var b=Ab,c=[];jQuery.each([Bb,Cb],function(){XRegExp.forEach(a,this,function(a){var e=b(a,"line"),g=b(a,"char"),h=b(a,"params")||k,m=b(a,"name")||"",a=b(a,"url"),h=h!==k?h.split(/,/):k;c.push(new Db(m,h,a,e!==k?Number(e):k,g!==k?Number(g):k))})});this._stack=0<c.length?c:k}return this._stack};zb.prototype.getStack=zb.prototype.getStack;
var Bb=new XRegExp("^ +at (?:(?<name0>\\S+) \\((?:unknown source|(?<url0>[^)]+?):(?<line0>\\d+):(?<char0>\\d+))\\)|(?:unknown source|(?<url1>[^)]+?):(?<line1>\\d+):(?<char1>\\d+)))$","mg"),Cb=new XRegExp("^(?<name0>[^(@]*)(?:\\((?<params0>[^)]+)\\))?@(?<url0>.+?):(?<line0>\\d+)(?::(?<char0>\\d+))?$","mg");function Ab(a,b){for(var c=0,d=b+c;a.hasOwnProperty(d);c++,d=b+c)if(d=a[d],"string"===typeof d)return d;return k}
zb.prototype.toString=function(){var a=this._name+": "+this._message,b=this.getStack();return a=b===k?a+"\n\t[stack trace not available]":a+("\n"+b.join("\n"))};zb.prototype.toString=zb.prototype.toString;function Db(a,b,c,d,e){this._name=a;this._params=b;this._url=c;this._lineNumber=d;this._charNumber=e}o=Db.prototype;o.getName=n("_name");o.getParams=n("_params");o.getURL=n("_url");o.getLineNumber=n("_lineNumber");o.getCharNumber=n("_charNumber");
o.toString=function(){var a="\tat "+(this._name||"<anonymous>"),a=a+(this._params?"("+this._params.join(",")+")":"");return a=this._url?a+("("+this._url+(this._lineNumber?":"+this._lineNumber:"")+(this._charNumber?":"+this._charNumber:"")+")"):a+"(<unknown location>)"};function Eb(a){var b;Eb=b="function"===typeof GLOBAL.msSetImmediate?function(a){return GLOBAL.msSetImmediate(a)}:function(a){return GLOBAL.setTimeout(a,25)};b(a)}function Fb(a){var b;Fb=b="function"===typeof GLOBAL.msClearImmediate?function(a){GLOBAL.msClearImmediate(a)}:function(a){GLOBAL.clearTimeout(a)};b(a)};function Gb(a,b,c){this._postCallback=a;this._stepCallback=b;this._completeCallback=c||k;this._timer=this._state=k}Gb.prototype.post=function(a){a=this._postCallback.call(this,this._state,a);a=a===i?k:a;a!==k&&this._state===k&&(this.handleStart(),Hb(this));this._state=a};function Hb(a){a._timer=Eb(function(){a._timer=k;for(var b=(new Date).valueOf();a._state!==k&&100>(new Date).valueOf()-b;){var c=a._stepCallback.call(a,a._state);a._state=c===i?k:c}a._state!==k?Hb(a):a.handleComplete()})}
Gb.prototype.handleStart=ea;Gb.prototype.handleComplete=ea;function Ib(){var a=this;Gb.call(this,function(a,c){if(c)return a=a||[],a.unshift([c]),a},function(a){for(var c=a[0],d=10,e;0<d--&&(e=c.pop());){var g=e.childNodes;if(0==g.length)Jb(e,j);else{c.push(e);for(var h=0,m=g.length;h<m;h++)c.push(g[h])}}for(;c&&0>=c.length;)a.shift(),c=a[0];if(0<a.length)return a},function(a){for(var c;c=a.shift();)Jb(c[0],l)});this._unloadListener=function(){if(a._timer!==k){Fb(a._timer);if(a._completeCallback)a._completeCallback.call(a,a._state),a._state=k;else for(;a._state!==
k;){var b=a._completeCallback.call(a,a._state);a._state=b===i?k:b}a.handleComplete()}}}s(Ib,Gb);Ib.prototype.handleStart=function(){Ib._super.handleStart.call(this);jQuery(GLOBAL).one("unload",this._unloadListener)};Ib.prototype.handleComplete=function(){jQuery(GLOBAL).off("unload",this._unloadListener);Ib._super.handleComplete.call(this)};
function Jb(a,b){if(a){jQuery(a).remove();if(!b)try{a.innerHTML=""}catch(c){for(var d;d=a.lastChild;)Jb(d,l)}a.canHaveChildren&&"removeNode"in a&&a.removeNode(l)}};function Kb(a){Jb(a,l)}var Lb=k;function Mb(a,b){Nb(b,function(){jQuery(a).append(b)})}function Ob(a,b,c){Nb(b,function(){c?jQuery(c).before(b):jQuery(a).append(b)})}function Pb(a){return jQuery(a).find(":input:not(:submit)").filter(function(){return this.disabled?l:"checkbox"===this.type||"radio"===this.type?!!this.checked:j}).get()}
function Nb(a,b){if(a){var c=[];_.each(a,function(a){1===a.nodeType&&("script"===a.tagName.toLowerCase()?c.push(a):c.push.apply(c,jQuery.makeArray(a.getElementsByTagName("script"))))});_.each(c,function(a){a.type=(jQuery(a).attr("type")!==i)+"/"+a.type.replace("script","-script")});b();_.each(c,function(a){var b=/^true\/(.*)/.exec(a.type);b?a.type=b[1].replace("-script","script"):a.removeAttribute("type")});_.each(c,function(a){if((!a.type||/\/(java|ecma)script/i.test(a.type))&&!jQuery.data(a,"wr-executed"))a.src?
jQuery.ajax({type:"GET",global:l,url:a.src,async:l,dataType:"script"}):jQuery.globalEval((a.text||a.textContent||a.innerHTML||"").replace(/^\s*<!(?:\[CDATA\[|\-\-)/,"/*$0*/")),jQuery.data(a,"wr-executed",j)})}}function Qb(){if(!jQuery.globalEval._wr_orig){var a=jQuery.globalEval,b=function(b){try{return a.call(this,b)}catch(d){f(new pa(d.message,d,b))}};b._wr_orig=a;jQuery.globalEval=b}}function Rb(){var a=jQuery.globalEval._wr_orig;if(a)jQuery.globalEval=a}var Sb=[];
function Tb(){function a(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}var b=GLOBAL.document,c={openFunc:a(b,"open"),closeFunc:a(b,"close"),writeFunc:a(b,"write"),written:[]};Sb.push(c);b.open=ba();b.close=ba();b.write=function(a){c.written.push(a)}}function Ub(){var a=GLOBAL.document,b=Sb.pop();if(!b)return[];b.openFunc!==i?a.open=b.openFunc:delete a.open;b.closeFunc!==i?a.close=b.closeFunc:delete a.close;b.writeFunc!==i?a.write=b.writeFunc:delete a.write;return b.written};var Vb=[];Vb.push({accept:function(a){return GLOBAL.CKEDITOR&&!!GLOBAL.CKEDITOR.instances[a.name]},getter:function(a){return GLOBAL.CKEDITOR.instances[a.name].getData()},beforeRequest:function(){if(GLOBAL.CKEDITOR){var a=[];_.each(GLOBAL.CKEDITOR.instances,function(b){b instanceof GLOBAL.CKEDITOR.editor&&a.push(b)});_.each(a,function(a){jQuery(a.element.$).closest("html")[0]||a.destroy(j)})}}});
function Wb(){(function(){var a=GLOBAL.CKEDITOR;if(a&&!a._wr_patched)a._wr_patched=j,a.dom.window=a.tools.override(a.dom.window,function(a){return function(c){a.call(this,c);(c=this.getFrame())&&(this._frameElement=c)}}),a.dom.window.prototype.getFrame=a.tools.override(a.dom.window.prototype.getFrame,function(a){return function(){var c=a.call(this);if(!c)c=this._frameElement,this._frameElement=k;return c}}),a.editor.prototype.destroy=a.tools.override(a.editor.prototype.destroy,function(a){return function(c){this.removeAllListeners();
return a.call(this,c)}})})()}Wb();
function Xb(a,b,c,d){function e(){var a=h[0],d={},e=[];if(b)d.action=g.attr("action")||k,g.attr("action",Da(d.action||"",a.extraActionParams));c&&_.each(c,function(a,b){var c=jQuery("<input/>").attr("type","hidden").attr("name",b).val(a);c.appendTo(g);e.push(c[0])});if(a.target)d.target=g.attr("target")||k,g.attr("target",a.target);g[0].submit();Eb(function(){var a=h.shift();_.each(d,function(a,b){a!==k?g.attr(b,a):g.removeAttr(b)});_.each(e,function(a){Kb(a)});a.result.success()})}var g=jQuery(a),
a={extraActionParams:b,extraInputs:c,target:d,result:new v},h=g.data("wr-hijacks");h||g.data("wr-hijacks",h=[]);h.push(a);if(d=1<h.length?h[h.length-2]:k)d.result._promise.onComplete(e);else e();return a.result._promise};function Yb(a,b){this._maxSize="number"===typeof b?b:Number.MAX_VALUE;this._timeout=1E4;this._ensureDispatch=l;this._objects=[];this._objectAvailableCondition=jQuery.proxy(function(){return 0<this._objects.length},this);this._timeoutCommand=jQuery.proxy(function(){this._ensureDispatch&&f(Error("No object available to dispatch to"));return k},this)}o=Yb.prototype;o.getSize=function(){return this._objects.length};o.setTimeout=ca("_timeout");
o.add=function(a,b){var b=b||0,c=-1,d=-1;jQuery.each(this._objects,function(e,g){0>c&&g.priority>b&&(c=e);0>d&&g.object===a&&(d=e)});0<=d||(this._objects.length>=this._maxSize&&f(new RangeError("Unable to add more than "+this._maxSize+" object(s)")),this._objects.splice(0>c?this._objects.length:c,0,{object:a,priority:b}))};o.remove=function(a){var b=this;jQuery.each(this._objects,function(c,d){if(d.object===a)return b._objects.splice(c,1),l})};o.clear=function(){this._objects=[]};
function Zb(a,b,c){var b=b||i,c=c||k,d;d=c!==k?_.find(a._objects,function(a){return c.apply(a.object)}):0<a._objects.length?a._objects[0]:k;return!d?a._timeoutCommand():b.apply(d.object)}function $b(a,b){var c,b=b||i;c=c||k;var d=l,e=[];(c!==k||0<a._objects.length)&&jQuery.each(a._objects,function(a,h){if(c===k||c.apply(h.object)){var m=b.apply(h.object);"undefined"!==typeof m&&e.push(m);d=j}});!d&&a._timeoutCommand()}
o.find=function(a){var a=a||k,b;b=a!==k?_.find(this._objects,function(b){return a.apply(b.object)}):0<this._objects.length?this._objects[0]:k;return!b?this._timeoutCommand():b.object};p("wr.DEBUG",l);p("wr.VERSION","8.10.1.20180614110810");var ac;p("wr.getBase",function(){return ac});var bc;p("wr.getBootParams",function(){return bc});function cc(){"function"!==typeof jQuery&&f(Error("JQuery library not loaded. Please ensure that jQuery JavaScript file is fully loaded before loading the WebRatio Runtime."));var a=jQuery.fn.jquery;0>dc(a,"1.7.1")&&f(Error("Incompatible JQuery library version found: "+a+". The WebRatio Runtime requires JQuery 1.7.1 or later."))}
p("wr.checkEnvironment",cc);p("wr.getPlatform",function(){return ma()});function ec(){}p("wr.util.LifecycleListener",ec);ec.prototype.init=q;ec.prototype.init=ec.prototype.init;ec.prototype.start=q;ec.prototype.start=ec.prototype.start;ec.prototype.stop=q;ec.prototype.stop=ec.prototype.stop;ec.prototype.dispose=q;ec.prototype.dispose=ec.prototype.dispose;function fc(){}p("wr.util.StackEntry",fc);fc.prototype.getName=q;fc.prototype.getName=fc.prototype.getName;fc.prototype.getParams=q;fc.prototype.getParams=fc.prototype.getParams;fc.prototype.getURL=q;fc.prototype.getURL=fc.prototype.getURL;fc.prototype.getLineNumber=q;fc.prototype.getLineNumber=fc.prototype.getLineNumber;fc.prototype.getCharNumber=q;fc.prototype.getCharNumber=fc.prototype.getCharNumber;var gc=new XRegExp("(?<num>[0-9]+)|(?<str>[^\\.\\s0-9]+)");function dc(a,b){function c(a){var b=[];XRegExp.forEach(""+(a||""),gc,function(a){a.num?b.push(Number(a.num)):b.push(a.str)});return b}for(var d=c(a),e=c(b),g=0,h=Math.max(d.length,e.length);g<h;g++){var m=d[g],r=e[g];m===i&&(m="number"===typeof r?0:"");r===i&&(r="number"===typeof m?0:"");if(m>r)return 1;if(m<r)return-1}return 0}p("wr.util.compareVersions",dc);var hc=new sa;p("wr.util.emptyFunction",ea);
function ic(a){if(a===i)return ea;var b=hc.get(a);b||(b=function(){return a},hc.put(a,b));return b}p("wr.util.valueFunction",ic);p("wr.util.errorFunction",function(a,b){if("function"!==typeof a)a=GLOBAL.Error;var c=b?[b]:[];return function(){var b=ha(a.prototype);a.apply(b,c);f(b)}});function jc(a){a&&(a=a.replace(/([^a-zA-Z0-9\-_])/g,"\\$1"));return a}p("wr.util.escapeCss",jc);function kc(a){a&&(a=a.replace(/(['"\\])/g,"\\$1"));return a}p("wr.util.escapeCssString",kc);function lc(a){this._appenders=new Yb;this._rethrowErrors=l;this._categoryLevels={};this._preservedEvents=a?[]:k;this.setLevel("",1)}p("wr.log.Manager",lc);lc.prototype.addAppender=function(a){this._appenders.add(a);if(this._preservedEvents!==k){var b=this;jQuery.each(this._preservedEvents,function(){mc(b,this)});this._preservedEvents=k}};lc.prototype.addAppender=lc.prototype.addAppender;lc.prototype.removeAppender=function(a){this._appenders.remove(a)};lc.prototype.removeAppender=lc.prototype.removeAppender;
lc.prototype.setRethrowErrors=ca("_rethrowErrors");lc.prototype.setRethrowErrors=lc.prototype.setRethrowErrors;lc.prototype.stopPreserving=function(){this._preservedEvents=k};lc.prototype.stopPreserving=lc.prototype.stopPreserving;lc.prototype.setLevel=function(a,b){a=a||"";b?this._categoryLevels[a]=b:(""===a&&f(new t("Root category logging level cannot be removed")),delete this._categoryLevels[a])};lc.prototype.setLevel=lc.prototype.setLevel;
lc.prototype.getLog=function(a){var a=a||"",b=this;return{isErrorEnabled:function(){return nc(b,a,1)},error:function(c,d){b._log(a,1,c,d)},isWarnEnabled:function(){return nc(b,a,2)},warn:function(c,d){b._log(a,2,c,d)},isInfoEnabled:function(){return nc(b,a,3)},info:function(c,d){b._log(a,3,c,d)},isDebugEnabled:function(){return nc(b,a,4)},debug:function(c,d){b._log(a,4,c,d)}}};lc.prototype.getLog=lc.prototype.getLog;
lc.prototype._log=function(a,b,c,d){try{var e=new oc(a,b,c,d?new zb(d):k);if(this._preservedEvents!==k){this._preservedEvents.push(e);return}mc(this,e)}catch(g){}d&&this._rethrowErrors&&f(d)};function mc(a,b){try{var c=pc(a,b.getCategory());b.getLevel()<=c&&$b(a._appenders,function(){this.append(b)})}catch(d){}}function nc(a,b,c){a=pc(a,b);return c<=a?j:l}function pc(a,b){for(;;){var c=a._categoryLevels[b];if(c)return c;b=b.substring(0,b.lastIndexOf("."))}}
function oc(a,b,c,d){this._timestamp=new Date;this._category=a;this._level=b;this._message=c;this._errorInfo=d}o=oc.prototype;o.getTimestamp=n("_timestamp");o.getCategory=n("_category");o.getLevel=n("_level");o.getMessage=n("_message");o.getErrorInfo=n("_errorInfo");p("wr.log.ROOT_CATEGORY","");p("wr.log.CATEGORY_SEPARATOR",".");var qc={isErrorEnabled:ic(l),isWarnEnabled:ic(l),isInfoEnabled:ic(l),isDebugEnabled:ic(l),error:ea,warn:ea,info:ea,debug:ea};p("wr.log.NULL_LOG",qc);var z=new lc(j);p("wr.log.getManager",function(){return z});function rc(a){this._iframe=a;this._usePseudoXML=l;this._contents=this._contentType=k}rc.prototype._log=z.getLog("internal.util.IFrameAccessor");function sc(a){if(!a._contentType)a._contentType=tc(a,a._iframe);return a._contentType}
function uc(a){var b=sc(a),c=vc(a._iframe);"text/html"===b?(a=wc(c),a={value:a,text:a.documentElement.outerHTML?a.documentElement.outerHTML:"<"+a.documentElement.tagName+">"+a.documentElement.innerHTML+"</"+a.documentElement.tagName+">"}):"text/xml"===b||"application/xml"===b?(a=wc(c.XMLDocument||c),b=GLOBAL.XMLSerializer?(new GLOBAL.XMLSerializer).serializeToString(a):""+a.xml,a={value:a,text:b}):"text/x-pseudo-xml"===b?(b=c.documentElement.textContent||c.documentElement.innerText,a._log.debug("Parsing pseudo-XML"),
b="<"+b.substr(1),GLOBAL.DOMParser?a=(new GLOBAL.DOMParser).parseFromString(b,"text/xml"):(a=new GLOBAL.ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(b)),a={value:a,text:b}):"text/plain"===b?(a=c.documentElement.textContent||c.documentElement.innerText,a={value:a,text:a}):a={value:k,text:k};return a}var xc=/^<head><\/head>\s*<body><pre[^>]*>[^><]+<\/pre><\/body>$/i;
function tc(a,b){var c=vc(b),d=c.documentElement;if(c.contentType)return a._usePseudoXML&&"text/plain"===c.contentType&&0===(d.textContent||d.innerText).indexOf("#?xml")?"text/x-pseudo-xml":c.contentType;if(c.xmlVersion||c.XMLDocument)return"text/xml";if(a._usePseudoXML&&0===(d.textContent||d.innerText).indexOf("#?xml"))return"text/x-pseudo-xml";if(a._usePseudoXML)c=c.documentMode,"number"===typeof c&&6>Number(c)&&a._log.warn("A frame is using IE Qurks Mode, possibly resulting in XML parse errors. This may be caused by an X-UA-Compatible header or meta tag");
return xc.test(d.innerHTML)?"text/plain":"text/html"}function vc(a){var b=a.contentDocument;if(!b)b=a.contentWindow.document;return b}function wc(a){var b=a.cloneNode(j);b||(b=a.implementation.createDocument(a.documentElement.namespaceURI,a.documentElement.nodeName),b.replaceChild(b.importNode(a.documentElement,j),b.documentElement));return b};var Bc=function(){function a(a,b){var c={};_.each(b.useless||[],function(b){c[b]=function(){g.warn("Calling "+a+"."+b+" - Method has no more use")}});_.each(b.gone||[],function(b){c[b]=function(){g.warn("Calling "+a+"."+b+" - Method is no longer available")}});jQuery.extend(c,b.impl||{});return c}function b(a){"toObject"in a&&(a=a.toObject());return a||{}}function c(a,b){var c=GLOBAL.$H,d=GLOBAL.ajaxRequest;"function"!==typeof c||"function"!==typeof d?g.error("Functions '$H' and 'ajaxRequest' are required for using legacy utilities."):
(c=c(b||{}),d(a,c))}function d(a){return yc(function(b){var c=this,d=jQuery.makeArray(arguments),e=zc();e.isStarted()?a.apply(c,d):(g.debug("Delaying "+b.type+" handler fire to application startup"),e.addLifecycleListener({start:function(){e.removeLifecycleListener(this);a.apply(c,d)}}))})}function e(a){Ac.fireWith(GLOBAL,[a]);return a.isPropagationStopped()?(g.debug("Handling of "+a.type+" halted by custom interceptor"),j):l}var g=z.getLog("wr.LegacyUtils"),h=a("WRAjax",{useless:[],gone:["FrameRequest",
"XMLFrameTransport"],impl:{onReady:function(a){jQuery(GLOBAL.document).ready(yc(function(){var b=zc();b.isStarted()?a():b.addLifecycleListener({start:yc(a)})}))}}}),m=a("WRAjaxRequestQueue",{useless:[],gone:"add,submitForm,start,sendRequest,remove,DTO".split(","),impl:{}}),r=a("WRAjaxRequestUtils",{useless:[],gone:"addRequest,removeRequest,startRequest,changeCursor,getResponsePage,computeRequest,processElement,processElementContent,updateElement,addFieldHandler,showNotification,clearNotification,addDroppable".split(","),
impl:{requestsQueue:m}}),R=a("WREvent",{useless:[],gone:["doEvent"],impl:{observe:function(){function a(g,h,m,r){var r=b(r),R=jQuery(g.target),J=g.type;if(!(d[J]===j&&e[J]===j)){if(R.data("ui-wrAutocomplete")){if("change"===J)return;"wrautocompletechange"===J&&(J="change")}(function(){e[J]=j;c(h+"FormBean",jQuery.extend({sourcePage:h,isForm:j,pressedLink:"button:"+m},{onCompleteCallBack:function(){e[J]=l}},r))})()}}var d={focus:j,blur:j,focusin:j,focusout:j},e={};a.bindAsEventListener=function(a){var b=
this,c=jQuery.makeArray(arguments).slice(1);return function(d){return b.apply(a,[d].concat(c))}};return a}()}}),J=a("WREventUtils",{useless:["updateFocusedElement","getFocusedElement","getLastFocusedField","forgetForm","saveFieldValue"],gone:["fieldValueChanged","getActiveAutocompleter"],impl:{observe:function(a,b,c){a=jQuery("#"+jc(a));"change"===b&&a.is(":text, :password")&&(b+=" wrautocompletechange");a.on(b,d(function(a){return e(a)?i:c(a)}))}}}),Ka=a("Form",{useless:[],gone:[],impl:{Element:a("Form.Element",
{useless:[],gone:[],impl:function(){function a(b,c,g,h){jQuery("#"+jc(c)).find(b+"[name='"+kc(g)+"']").each(function(){var a=jQuery(this);a.click(d(function(b){e(b)||h(a[0],a.val())}))})}return{RadioEventObserver:function(b,c,d){a(":radio",b,c,d)},CheckboxEventObserver:function(b,c,d){a(":checkbox",b,c,d)}}}()})}});return{WRAjax:h,WRAjaxRequestUtils:r,WRAjaxRequestQueue:m,WREvent:R,WREventUtils:J,Form:Ka}}();p("wr.LegacyUtils",Bc);var Ac=jQuery.Callbacks("unique");function Cc(){}p("wr.app.Loader",Cc);Cc.prototype._log=z.getLog("wr.app.Loader");var Dc={};Cc.prototype.load=function(a,b){var c=this._log,d=Ec[b];d||f(Error("Invalid type "+b));var e=Dc[a];if(!e){c.debug("Loading resource "+a);d=d(a);e=new Va(d);if(c.isDebugEnabled())e.onSuccess(function(){c.debug("Loaded resource "+a)}).onFailure(function(b){c.error("Failed to load resource "+a,b)});Dc[a]=e}return e};Cc.prototype.load=Cc.prototype.load;
var Ec={script:function(a){return jQuery.ajax({url:a,dataType:"script",mimeType:"text/plain"})}};function A(){this._app=k;this._config={};this._handlers=new Yb;this._handlers._ensureDispatch=j;this._savedFiles={}}s(A,Ja);p("wr.config.ConfigPlugin",A);A.prototype._log=z.getLog("wr.config.ConfigPlugin");A.prototype.getConfig=n("_config");A.prototype.getConfig=A.prototype.getConfig;A.prototype.setConfig=ca("_config");A.prototype.setConfig=A.prototype.setConfig;A.prototype.configure=function(a){return this.configureObjectsList(a,"handlers",function(){this._handlers.clear()},function(a){this.addHandler(a)})};
A.prototype.configure=A.prototype.configure;A.prototype.addHandler=function(a){this._handlers.add(a)};A.prototype.addHandler=A.prototype.addHandler;A.prototype.removeHandler=function(a){this._handlers.remove(a)};A.prototype.removeHandler=A.prototype.removeHandler;
A.prototype.merge=function(a){var b=this._log,c=this,d=new v;try{var e=Fc(c,a,k),g=e.getRequiredFiles(a,k);if(0<g.length)c.mergeFiles.apply(c,g).onSuccess(function(){try{e.merge(c._config,a,k),d.success()}catch(b){d.failure(b)}}).onFailure(function(a){d.failure(a)});else e.merge(c._config,a,k),d.success()}catch(h){b.error("Error merging new configuration ",h),d.failure(h)}return d._promise};A.prototype.merge=A.prototype.merge;
A.prototype.mergeFiles=function(a){var b=this._log,c=this,d=jQuery.makeArray(arguments),e=[];b.debug("Loading files "+d);jQuery.each(d,function(a,d){var m=c._savedFiles[d];if(m)e.push(m);else{var r=new v,m=r._promise;c._savedFiles[d]=m;e.push(m);b.debug("Downloading file "+d);m=jQuery.ajax({url:d,mimeType:"text/plain"});(new Va(m)).onSuccess(function(a){try{var e=Fc(c,a,d),g=e.getRequiredFiles(a,d);if(0<g.length){var m=Aa(d,"..");jQuery.each(g,function(a,b){g[a]=Aa(m,b)});c.mergeFiles.apply(c,g).onSuccess(function(){b.debug("Merging file "+
d);try{e.merge(c._config,a,d),r.success()}catch(g){b.error("Error merging file "+d,g),r.failure(g)}}).onFailure(function(a){b.error("Error loading file "+d,a);r.failure(a)})}else b.debug("Merging file "+d),e.merge(c._config,a,d),r.success()}catch(Fd){b.error("Error loading file "+d,Fd),r.failure(Fd)}}).onFailure(function(a){b.error("Error downloading file "+d,a);r.failure(a)})}});return Na.apply(u,e)};A.prototype.mergeFiles=A.prototype.mergeFiles;
function Fc(a,b,c){return Zb(a._handlers,function(){return this},function(){return this.accept(b,c)})}A.prototype.readInstanceFactory=function(a,b){return cb(a,b||k,this.getApp()._loader)};A.prototype.readInstanceFactory=A.prototype.readInstanceFactory;A.prototype.readInstanceListFactory=function(a,b){return eb(a,b||k,this.getApp()._loader)};A.prototype.readInstanceListFactory=A.prototype.readInstanceListFactory;function Gc(){this._appenders=[]}s(Gc,Ja);p("wr.log.LogPlugin",Gc);Gc.prototype.configure=function(a){var b=a.categories||{},c=this.getLogManager();b[""]||(b[""]=1);B(b,function(a,b){c.setLevel(b,a)});return this.configureObjectsList(a,"appenders",function(){for(var a=-1,b=this._appenders.length;++a<b;)this.removeAppender(this._appenders[a])},function(a,b){a.setup(b);this.addAppender(a)})};Gc.prototype.configure=Gc.prototype.configure;Gc.prototype.init=function(){this.getLogManager().stopPreserving()};
Gc.prototype.init=Gc.prototype.init;Gc.prototype.addAppender=function(a){this.getLogManager().addAppender(a);this._appenders.push(a)};Gc.prototype.addAppender=Gc.prototype.addAppender;Gc.prototype.removeAppender=function(a){this.getLogManager().removeAppender(a);za(this._appenders,a)};Gc.prototype.removeAppender=Gc.prototype.removeAppender;Gc.prototype.getLog=function(a){return this.getLogManager().getLog(a)};Gc.prototype.getLog=Gc.prototype.getLog;Gc.prototype.getLogManager=function(){return z};
Gc.prototype.getLogManager=Gc.prototype.getLogManager;function C(){this._routers=new Yb;this._requests=[];this._serving=l;this._listeners=[]}s(C,Ja);p("wr.nav.NavPlugin",C);C.prototype._log=z.getLog("wr.nav.NavPlugin");C.prototype.configure=function(a){return this.configureObjectsList(a,"routers",function(){this._routers.clear()},function(a,c){this.addRouter(a,Number(c.priority)||i)})};C.prototype.configure=C.prototype.configure;C.DEFAULT_PRIORITY=0;C.prototype.addRouter=function(a,b){this._routers.add(a,-b||0)};C.prototype.addRouter=C.prototype.addRouter;
C.prototype.removeRouter=function(a){this._routers.remove(a)};C.prototype.removeRouter=C.prototype.removeRouter;C.prototype.getRouterOfType=function(a){var b=this._routers.find(function(){return this instanceof a});b||f(Error("No router of requested type was found"));return b};C.prototype.getRouterOfType=C.prototype.getRouterOfType;
C.prototype.navigate=function(a){var b=new v;this._requests.push({request:a,result:b});this._triggerListeners("requestEnqueue",a);if(!this._serving)this._serving=j,Hc(this);return b._promise};C.prototype.navigate=C.prototype.navigate;C.prototype.cancel=function(a){var b=this;_.find(this._requests,function(c,d){if(c.request===a)return b._requests.splice(d,1),b._log.debug("Canceling "+a),b._triggerListeners("requestCancel",a),c.result.failure(Error("Canceled")),j})};C.prototype.cancel=C.prototype.cancel;
C.prototype.precompute=function(a){var b=l;$b(this._routers,function(){b||(b=this.precompute(a))});b||f(Error("Found no router implementing "+a))};C.prototype.precompute=C.prototype.precompute;
function Hc(a){var b;do(b=a._requests[0])&&a._triggerListeners("requestBeforeServe",b.request);while(b&&b!==a._requests[0]);if(b){a._requests.shift();var c=b.request,d=b.result;a._log.isDebugEnabled()&&a._log.debug("Serving "+c);a._triggerListeners("requestServe",c);b=function(b,e,g){a._triggerListeners("requestSuccess",c,b,e,g);d.success(g);Hc(a)};var e=function(b,e){a._triggerListeners("requestFailure",c,b,e);d.failure(Error(b||"Failed"));Hc(a)};c.addSuccessListener(b);c.addFailureListener(e);try{var g=
l;$b(a._routers,function(){g||(a._triggerListeners("requestRoute",c,this),this.route(c),g=c.isStarted())});g||(a._log.error("Found no router implementing "+c),c.removeSuccessListener(b),c.removeFailureListener(e),f(Error("Not routed")));a._triggerListeners("requestStart",c)}catch(h){a._log.error("Error serving "+c,h),d.failure(h)}}else a._serving=l}C.prototype.addListener=function(a){a&&0>_.indexOf(this._listeners,a)&&this._listeners.push(a)};C.prototype.addListener=C.prototype.addListener;
C.prototype.removeListener=function(a){za(this._listeners,a)};C.prototype.removeListener=C.prototype.removeListener;C.prototype._triggerListeners=function(a,b){var c=this,d=jQuery.makeArray(arguments);d.shift();_.each(this._listeners,function(b){var g=b[a];if(g)try{g.apply(b,d)}catch(h){c._log.error("Error invoking '"+a+"' of navigation listener",h)}})};function D(a,b,c,d){a=Ic(a);this._url=a.url;this._params=jQuery.extend({},a.params)||{};jQuery.extend(this._params,b);this._inputs=jQuery.makeArray(c)||[];this._target=d;this._responseTypes=k;this._listeners={};this._completed=this._started=l}p("wr.nav.Request",D);D.prototype._log=z.getLog("wr.nav.Request");D.prototype.getURL=n("_url");D.prototype.getURL=D.prototype.getURL;D.prototype.setURL=function(a){a=Ic(a);this._url=a.url;jQuery.extend(this._params,a.params)};D.prototype.setURL=D.prototype.setURL;
function Ic(a){var a=parseUri(a),b=jQuery.deparam(a.query);a.query="";return{url:Ca(a),params:b}}D.prototype.getParams=n("_params");D.prototype.getParams=D.prototype.getParams;D.prototype.getInputs=n("_inputs");D.prototype.getInputs=D.prototype.getInputs;D.prototype.isDeparting=function(){return this._target!==i};D.prototype.isDeparting=D.prototype.isDeparting;D.prototype.getTarget=n("_target");D.prototype.getTarget=D.prototype.getTarget;
D.prototype.setTarget=function(a){this.isDeparting()||f(new t("Cannot change target of non-departing requests"));this._target=a!==i?a:k};D.prototype.setTarget=D.prototype.setTarget;D.prototype.getResponseTypes=function(){return this._responseTypes&&this._responseTypes.slice()};D.prototype.getResponseTypes=D.prototype.getResponseTypes;D.prototype.setResponseTypes=function(a){this._responseTypes=0<arguments.length?jQuery.makeArray(arguments):k};D.prototype.setResponseTypes=D.prototype.setResponseTypes;
D.prototype.isStarted=n("_started");D.prototype.isStarted=D.prototype.isStarted;D.prototype.addStartListener=function(a){Jc(this,"start",a)};D.prototype.addStartListener=D.prototype.addStartListener;D.prototype.removeStartListener=function(a){Kc(this,"start",a)};D.prototype.removeStartListener=D.prototype.removeStartListener;D.prototype.start=function(){Lc(this,l,k);this._started=j;this._triggerListeners("start")};D.prototype.start=D.prototype.start;D.prototype.isCompleted=n("_completed");
D.prototype.isCompleted=D.prototype.isCompleted;D.prototype.addSuccessListener=function(a){Jc(this,"success",a)};D.prototype.addSuccessListener=D.prototype.addSuccessListener;D.prototype.removeSuccessListener=function(a){Kc(this,"success",a)};D.prototype.removeSuccessListener=D.prototype.removeSuccessListener;D.prototype.success=function(a,b,c){Lc(this,j,l);this._completed=j;this._triggerListeners("success",[a,b,c])};D.prototype.success=D.prototype.success;
D.prototype.addFailureListener=function(a){Jc(this,"failure",a)};D.prototype.addFailureListener=D.prototype.addFailureListener;D.prototype.removeFailureListener=function(a){Kc(this,"failure",a)};D.prototype.removeFailureListener=D.prototype.removeFailureListener;D.prototype.failure=function(a,b){Lc(this,j,l);this._completed=j;this._triggerListeners("failure",[a,b])};D.prototype.failure=D.prototype.failure;function Jc(a,b,c){"function"===typeof c&&(a=a._getCallbacks(b,j),a.add(c),a._count++)}
function Kc(a,b,c){var d=a._getCallbacks(b);d&&(c&&(d.remove(c),d._count--),(!c||0>=d._count)&&a._removeCallbacks(b))}D.prototype._triggerListeners=function(a,b){var c=this._getCallbacks(a);if(c)try{c.fireWith(this,b)}catch(d){this._log.error("Error handling "+a+" of request "+this,d)}};D.prototype._getCallbacks=function(a,b){var c=this._listeners,d=c[a];if(!d&&b)c[a]=d=jQuery.Callbacks("unique"),d._count=0;return d};
D.prototype._removeCallbacks=function(a){var b=this._listeners,c=b[a];c&&(c.empty(),delete b[a])};function Lc(a,b,c){b!==k&&a._started!==b&&f(new t("Request "+(b?"not":"already")+" started"));c!==k&&a._completed!==c&&f(new t("Request "+(c?"not":"already")+" completed"))};var Mc=z.getLog("wr.ui.html"),Nc={blob:k,"boolean":"boolean",date:"Date",decimal:"number","float":"number",integer:"number",password:"string",string:"string",text:"string",time:"Date",timestamp:"Date",url:"string"};p("wr.ui.html.getScriptType",function(a){return Nc[a]});
function Oc(a){function b(a){return!jQuery(a).parents().addBack().filter(function(){var a=jQuery(this);return!(a.is("div")&&"inline"===a.css("display"))&&("hidden"===a.attr("type")||a.is(":hidden"))}).length}var c=!isNaN(jQuery(a).attr("tabindex")),d=a.nodeName.toLowerCase();if("area"===d){c=a.parentNode;d=c.name;if(!a.href||!d||"map"!==c.nodeName.toLowerCase())return l;a=jQuery("img[usemap=#"+d+"]")[0];return!!a&&b(a)}return(/input|select|textarea|button|object/.test(d)?!a.disabled:"a"==d?a.href||
c:c)&&b(a)}p("wr.ui.html.isFocusable",Oc);function Pc(a){Mc.isDebugEnabled()&&Mc.debug("Focusing element "+ka(a));try{a.focus()}catch(b){Mc.warn("Element "+ka(a)+" is not currently focusable")}}p("wr.ui.html.focus",Pc);
function Qc(a){var b=Rc(a);try{if("number"===typeof a.selectionStart)return{start:a.selectionStart};if("undefined"!==typeof b.selection&&"string"===typeof a.value){var c=b.selection.createRange();if(c&&c.parentElement()===a)return c.moveStart("character",-a.value.length),{start:c.text.length}}}catch(d){}return k}p("wr.ui.html.getSelectedRange",Qc);
function Sc(a,b){var c=Rc(a);try{if("number"===typeof a.selectionStart)a.setSelectionRange(b.start,b.start);else if("undefined"!==typeof c.selection&&"string"===typeof a.value){var d=c.selection.createRange();d&&d.parentElement()===a&&(d.move("character",-a.value.length),d.move("character",b.start),d.select())}}catch(e){}}p("wr.ui.html.setSelectedRange",Sc);
var Tc=function(){var a=/\W/g;return function(b,c,d){if(c.replace(a,"")!==d.replace(a,""))return b;for(var e=0,g=Math.min(b.start,c.length,d.length),h=0,m=0;h<=g&&m<=g;h++,m++){var r=a.test(c[h]),R=a.test(d[m]);r!==R&&(r&&!R?(m--,h<b.start&&e--):(h--,e++))}return{start:Math.max(0,b.start+e)}}}();p("wr.ui.html.recomputeRange",Tc);p("wr.ui.html.addRemoveListener",function(a,b){var c=GLOBAL.setInterval(function(){jQuery.contains(GLOBAL.document.documentElement,a)||(GLOBAL.clearInterval(c),b(a))},500)});
function Rc(a){a=a&&a.ownerDocument;(!a||9!==a.nodeType)&&f(Error("Element must be part of a document"));return a};var Uc=z.getLog("wr.ui.html.resx");function Vc(a,b){var c=jQuery(a),d=c.attr("src")||c.attr("href"),e=c.data("wr-resname");return e?(d=c.data("wr-resver")||k,{name:e,version:d!==k?""+d:k,unloadable:Wc(c)}):b&&d?{name:"_path-"+d,version:k,unloadable:Wc(c)}:k}p("wr.ui.html.resx.getInfo",Vc);function Wc(a){var b=a[0].nodeName.toLowerCase();return"style"===b?j:"link"===b?"stylesheet"===a.attr("rel"):l}
p("wr.ui.html.resx.getLoaded",function(a){var b=_.clone(Xc());a||_.each(_.keys(Yc),function(a){delete b[a]});return b});
function Zc(a){var b=Xc(),c=b[a.name];if(c)return c.version===a.version?Uc.debug("Skipping loading of resource '"+a.name+"' (version "+(a.version||"unknown")+") since it is already loaded"):Uc.warn("Blocked loading of conflicting resource '"+a.name+"': version "+(a.version||"unknown")+" was incoming, but version "+(c.version||"unknown")+" is already loaded"),l;b[a.name]=jQuery.extend({unloadable:l},a);return Yc[a.name]=j}p("wr.ui.html.resx.registerLoading",Zc);
function $c(a){Yc[a]!==j&&f(new t);delete Yc[a];ad(a)}p("wr.ui.html.resx.registerLoaded",$c);function bd(){Xc(j)}p("wr.ui.html.resx.refreshLoaded",bd);
var Xc=function(){var a=k;return function(b){if(!a||b){a||(a={});var c=_.clone(a);jQuery("script, link, style").each(function(){var d=Vc(this,j);if(d){if(!b||!a.hasOwnProperty(d.name))a[d.name]=d,ad(d.name);delete c[d.name]}});_.each(c,function(b){b.unloadable&&(Uc.debug("Unloading resource '"+b.name+"' (version "+(b.version||"unknown")+") which is no longer in the document"),delete a[b.name])})}return a}}(),Yc={},cd={};
p("wr.ui.html.resx.addListener",function(a,b,c){(cd[a]||(cd[a]=jQuery.Callbacks("unique"))).add(b);c&&ad(a,b)});p("wr.ui.html.resx.removeListener",function(a,b){var c=cd[a];c&&c.remove(b)});function ad(a,b){var c,d=Xc()[a];d&&(b?b.apply(GLOBAL,[d]):(c=cd[a])&&c.fireWith(GLOBAL,[d]))};function E(a){this._owner=a;this._objects=[];this._runningPhase=this._completedPhase=k;this._listeners=[]}p("wr.util.LifecycleManager",E);E.prototype._log=z.getLog("wr.util.LifecycleManager");E.prototype.getOwner=n("_owner");E.prototype.getOwner=E.prototype.getOwner;var dd={};dd[k]=["init"];dd.init=["start","dispose"];dd.start=["stop"];dd.stop=["dispose","start"];dd.dispose=[];
var ed={init:["init"],start:["init","start"],stop:["init"],dispose:[]},fd={init:["dispose"],start:["stop","dispose"],stop:["dispose"],dispose:[]};function gd(a,b){0>_.indexOf(dd[a._completedPhase],b)&&f(new t("Unable to transition to "+b+" phase after "+a._completedPhase+" phase"));a._log.debug("Running phase "+b);a._runningPhase=b;var c=a._objects.slice(0);return hd(a,[b],c).chain(function(){a._runningPhase=k;a._completedPhase=b;id(a,b);a._log.debug("Completed phase "+b)})}
function jd(a,b){var c=[b],d=Wa,e=ed[a._completedPhase];e&&(d=d.chain(function(){a._log.debug("Applying completed phases "+e+" to "+b);return hd(a,e,c)},i));a._runningPhase!==k&&(d=d.chain(function(){a._log.debug("Applying running phase "+a._runningPhase+" to "+b);return hd(a,[a._runningPhase],c)}));return d}function kd(a,b){var c=fd[a._completedPhase];return c?(a._log.debug("Applying future phases "+c+" to "+b),hd(a,c,[b])):Wa}
function hd(a,b,c){for(var d=[],e=-1,g=c.length;++e<g;){for(var h=c[e],m=Wa,r=-1,R=b.length;++r<R;){var J=b[r],Ka=h[J];"function"===typeof Ka&&(m=m.chain(function(){return Ra(Ka,h)}).onFailure(function(b){a._log.error("Error during "+J+" of "+h,b)}))}d.push(m)}return Na.apply(u,d)}E.prototype.register=function(a){var b=this;if(!a)return Wa;var c=l;jQuery.each(this._objects,function(b,e){if(e===a)return c=j,l});return c?Wa:jd(this,a).chain(function(){b._objects.push(a)})};E.prototype.register=E.prototype.register;
E.prototype.unregister=function(a){var b=this;if(!a)return Wa;var c=k;jQuery.each(this._objects,function(d,e){if(e===a)return b._objects.splice(d,1),c=a,l});return!c?Wa:kd(this,c)};E.prototype.unregister=E.prototype.unregister;E.prototype.addListener=function(a,b){if(a&&!_.contains(this._listeners,a)&&(this._listeners.push(a),b)){var c=ed[this._completedPhase];c&&_.each(c,function(b){ld(this,a,b)},this)}};E.prototype.addListener=E.prototype.addListener;
E.prototype.removeListener=function(a){a&&za(this._listeners,a)};E.prototype.removeListener=E.prototype.removeListener;function id(a,b){_.each(a._listeners,function(a){ld(this,a,b)},a)}function ld(a,b,c){c=b[c];if("function"===typeof c)try{c.call(b,a._owner)}catch(d){a._log.error("Error in lifecycle listener",d)}}E.prototype.init=function(){return gd(this,"init")};E.prototype.init=E.prototype.init;E.prototype.start=function(){return gd(this,"start")};E.prototype.start=E.prototype.start;
E.prototype.stop=function(){return gd(this,"stop")};E.prototype.stop=E.prototype.stop;E.prototype.dispose=function(){return gd(this,"dispose")};E.prototype.dispose=E.prototype.dispose;function F(a){this._data={};this._size=0;a!==i&&this.setRootData(a)}p("wr.util.coll.DataTree",F);F.prototype.getSize=n("_size");F.prototype.getSize=F.prototype.getSize;F.prototype.getData=function(a){return this._data[(a?a+".":"")+"__"]};F.prototype.getData=F.prototype.getData;F.prototype.setData=function(a,b){var c=(a?a+".":"")+"__",d=this._data.hasOwnProperty(c);b!==i?(this._data[c]=b,d||this._size++):d&&(delete this._data[c],this._size--)};F.prototype.setData=F.prototype.setData;
F.prototype.getRootData=function(){return this.getData(k)};F.prototype.getRootData=F.prototype.getRootData;F.prototype.setRootData=function(a){this.setData(k,a)};F.prototype.setRootData=F.prototype.setRootData;F.prototype.getTree=function(a){var b=(a||"")+".",c=b.length,d=this._data,a={},e=0,g;for(g in d)d.hasOwnProperty(g)&&md(d,g)&&0===g.indexOf(b)&&(a[g.substring(c)]=d[g],e++);g=new F;g._data=a;g._size=e;return g};F.prototype.getTree=F.prototype.getTree;
F.prototype.setTree=function(a,b){var c=(a||"")+".",d=this._data,e;for(e in d)d.hasOwnProperty(e)&&md(d,e)&&0===e.indexOf(c)&&(delete d[e],this._size--);if(b){var g=b._data;for(e in g)g.hasOwnProperty(e)&&md(g,e)&&(d[c+e]=g[e],this._size++)}};F.prototype.setTree=F.prototype.setTree;function nd(a,b){function c(a){var b=d.get(a);b||(b={o:[],n:[]},d.put(a,b));return b}var a=a||[],b=b||[],d=new sa;jQuery.each(a,function(a,b){c(b).o.push(a)});jQuery.each(b,function(a,b){c(b).n.push(a)});var e=[],g=[];d.each(function(a,b){for(;b.n.length>b.o.length;){var c=b.n.pop();e.push({value:a,newIndex:c})}for(;b.o.length>b.n.length;)c=b.o.pop(),g.push({value:a,oldIndex:c})});return{added:e,removed:g}}p("wr.util.coll.computeArrayDiffs",nd);
function od(a,b,c,d){if(c||d){var a=nd(a,b),e,g;if(c)for(b=-1,e=a.removed.length;++b<e;)g=a.removed[b],c(g.value,g.oldIndex);if(d)for(b=-1,e=a.added.length;++b<e;)g=a.added[b],d(g.value,g.newIndex)}}p("wr.util.coll.walkArrayDiffs",od);p("wr.util.coll.unmodifiableArray",function(a){return a||[]});function G(a,b,c){this._view=a;this._lastSubViews=k;this._indexes=b;this._subViewsSupported=c;this._eventListeners=this._contextRegistry=k}p("wr.ui.AbstractViewer",G);G.prototype.getView=n("_view");G.prototype.getView=G.prototype.getView;G.prototype.getIndexes=function(){return this._indexes||[]};G.prototype.getIndexes=G.prototype.getIndexes;G.prototype.setup=q;G.prototype.setup=G.prototype.setup;G.prototype.destroy=function(){this._contextRegistry=k};G.prototype.destroy=G.prototype.destroy;
G.prototype.isContextProvider=n("_subViewsSupported");G.prototype.isContextProvider=G.prototype.isContextProvider;G.prototype.setContextRegistry=function(a){this.isContextProvider()||f(new ga("Not a context provider"));this._contextRegistry=a};G.prototype.setContextRegistry=G.prototype.setContextRegistry;G.prototype.getContextRegistry=n("_contextRegistry");G.prototype.getContextRegistry=G.prototype.getContextRegistry;G.prototype.refreshSubViews=ba();G.prototype.refreshSubViews=G.prototype.refreshSubViews;
G.prototype.collectSubViewsDiffs=function(a){var a=a||this.getView().getViews(),b=[],c=[];od(this._lastSubViews,a,function(a){c.push(a)},function(a){b.push(a)});this._lastSubViews=a.slice();return{added:b,removed:c}};G.prototype.collectSubViewsDiffs=G.prototype.collectSubViewsDiffs;G.prototype.writeAttributes=ba();G.prototype.writeAttributes=G.prototype.writeAttributes;G.prototype.readAttributes=function(){return{}};G.prototype.readAttributes=G.prototype.readAttributes;G.prototype.writeData=ba();
G.prototype.writeData=G.prototype.writeData;G.prototype.readData=ba();G.prototype.readData=G.prototype.readData;G.prototype.addEventListener=function(a){if(a)(this._eventListeners||(this._eventListeners=jQuery.Callbacks("unique"))).add(a)};G.prototype.addEventListener=G.prototype.addEventListener;G.prototype.removeEventListener=function(a){this._eventListeners&&(a?this._eventListeners.remove(a):this._eventListeners.empty())};G.prototype.removeEventListener=G.prototype.removeEventListener;
G.prototype.raiseEvent=function(a,b){a&&this._eventListeners&&(b=b||this._view,this._eventListeners.fireWith(this,[a,b]))};G.prototype.raiseEvent=G.prototype.raiseEvent;function pd(a,b){G.call(this,a,b,j)}s(pd,G);p("wr.ui.AbstractDisplayViewer",pd);pd.prototype.setup=function(){qd(this)};pd.prototype.setup=pd.prototype.setup;pd.prototype.destroy=function(){qd(this);pd._super.destroy.call(this)};pd.prototype.destroy=pd.prototype.destroy;pd.prototype.refreshSubViews=function(){qd(this)};pd.prototype.refreshSubViews=pd.prototype.refreshSubViews;
function qd(a){var b=a.collectSubViewsDiffs();jQuery.each(b.removed,function(b,d){a.destroyWindow(d)});jQuery.each(b.added,function(b,d){a.createWindow(d)})}pd.prototype.createWindow=q;pd.prototype.createWindow=pd.prototype.createWindow;pd.prototype.destroyWindow=q;pd.prototype.destroyWindow=pd.prototype.destroyWindow;function rd(a,b){this._id=a;this._config=b;this._parent=k;this._views=[]}p("wr.ui.View",rd);rd.prototype.getId=n("_id");rd.prototype.getId=rd.prototype.getId;rd.prototype.getConfig=n("_config");rd.prototype.getConfig=rd.prototype.getConfig;rd.prototype.getParent=n("_parent");rd.prototype.getParent=rd.prototype.getParent;
rd.prototype.setParent=function(a){if(this._parent!==a&&!this._guard_setParent){this._guard_setParent=j;try{if(this._parent)this._parent.removeView(this),this._parent=k;if(a)a.addView(this),this._parent=a}finally{delete this._guard_setParent}}};rd.prototype.setParent=rd.prototype.setParent;rd.prototype.getViews=function(){return this._views||[]};rd.prototype.getViews=rd.prototype.getViews;
rd.prototype.addView=function(a){if(a&&!this._guard_addView){this._guard_addView=j;try{var b=a.getParent();b!==this&&(b&&f(new t("View has been already added to another view")),a.setParent(this),this._views.push(a))}finally{delete this._guard_addView}}};rd.prototype.addView=rd.prototype.addView;
rd.prototype.removeView=function(a){if(a&&!this._guard_removeView){this._guard_removeView=j;try{var b=a.getParent();if(b)b!==this&&f(new t("View is not part of this view")),a.setParent(k),this._views=jQuery.grep(this._views,function(b){return b!==a})||[]}finally{delete this._guard_removeView}}};rd.prototype.removeView=rd.prototype.removeView;function sd(a,b){G.call(this,a,b,j);this._box=k}s(sd,G);p("wr.ui.web.BoxViewer",sd);sd.prototype.setup=function(a,b){jQuery.isWindow(b)||f(Error("Context must be a browser window"));var c;var d=a.boxSelector,e=jQuery(b.document);e.find("html")[0]?(c=e.find(d).eq(0),c[0]||f(Error("No box element found")),c=c[0]):f(Error("Document type not supported"));this._box=c;this._refreshContexts(l)};sd.prototype.setup=sd.prototype.setup;sd.prototype.destroy=function(){this._refreshContexts(j);this._box=k};
sd.prototype.destroy=sd.prototype.destroy;sd.prototype._refreshContexts=function(){var a=this.getContextRegistry(),b=this._box,c=this.collectSubViewsDiffs(!b?[]:i);a&&($.each(c.removed,function(b,c){a.removeContext(c)}),b&&$.each(c.added,function(c,e){a.addContext(e,k,b)}))};sd.prototype.readAttributes=function(){var a=sd._super.readAttributes.call(this);a.open=!!this._box;return a};sd.prototype.readAttributes=sd.prototype.readAttributes;
sd.prototype.writeData=function(a){var b=this._box;if(b){var c=a&&a.title;c!==i&&jQuery(b).attr("title",c)}sd._super.writeData.call(this,a)};sd.prototype.writeData=sd.prototype.writeData;sd.prototype.readData=function(){var a=sd._super.readData.call(this)||{},b=this._box;b&&(a.title=jQuery(b).attr("title"));return a};sd.prototype.readData=sd.prototype.readData;function td(a,b){pd.call(this,a,b);this._window=k}s(td,pd);p("wr.ui.web.BrowserViewer",td);td.prototype.setup=function(a,b){jQuery.isWindow(b)||f(Error("Context must be a browser window"));this._window=b;td._super.setup.call(this,a,b)};td.prototype.setup=td.prototype.setup;td.prototype.destroy=function(){this._window=k;td._super.destroy.call(this)};td.prototype.destroy=td.prototype.destroy;td.prototype.createWindow=function(a){var b=this.getContextRegistry();b&&b.addContext(a,k,window)};
td.prototype.createWindow=td.prototype.createWindow;td.prototype.destroyWindow=function(a){var b=this.getContextRegistry();b&&b.removeContext(a)};td.prototype.destroyWindow=td.prototype.destroyWindow;function H(a,b){G.call(this,a,b,j);this._pendingAttributes=this._window=k;this._autoResize=l}s(H,G);p("wr.ui.web.WindowViewer",H);H.prototype.setup=function(a,b){jQuery.isWindow(b)||f(Error("Context must be a browser window"));this._window=b;this._refreshContexts(l)};H.prototype.setup=H.prototype.setup;H.prototype.destroy=function(){ud(this,l);this._refreshContexts(j);this._window=k;H._super.destroy.call(this)};H.prototype.destroy=H.prototype.destroy;
H.prototype._refreshContexts=function(a){var b=this.getContextRegistry(),c=this.getWindow(),d=this.collectSubViewsDiffs(!c?[]:i);if(b){jQuery.each(d.removed,function(a,c){b.removeContext(c)});var e=!a&&c&&c.document;e&&jQuery.each(d.added,function(a,c){b.addContext(c,k,e)})}};
H.prototype.writeAttributes=function(a){var b=this.getWindow(),c=a&&a.open;c!==i&&(ud(this,c),b=this.getWindow());if(b&&a){var c=a.width,d=a.height;if(c!==i||d!==i)b.resizeTo(c||b.outerWidth,d||b.outerHeight);b=a.autoResize;if(b!==i)this._autoResize=b}else if(a)this._pendingAttributes=this._pendingAttributes||{},jQuery.extend(this._pendingAttributes,a),delete this._pendingAttributes.open;H._super.writeAttributes.call(this,a)};H.prototype.writeAttributes=H.prototype.writeAttributes;
H.prototype.readAttributes=function(){var a=H._super.readAttributes.call(this),b=this.getWindow();b?(a.width=b.outerWidth,a.height=b.outerHeight,a.autoResize=this._autoResize):this._pendingAttributes&&jQuery.extend(a,this._pendingAttributes);a.open=!!b;return a};H.prototype.readAttributes=H.prototype.readAttributes;
H.prototype.writeData=function(a){var b=this.getWindow();if(b){var c=a&&a.title;if(c!==i){var d=b&&b.document;if(d&&"string"===typeof d.title)d.title=c||""}}H._super.writeData.call(this,a);this._autoResize&&"function"===typeof b.sizeToContent&&b.sizeToContent()};H.prototype.writeData=H.prototype.writeData;H.prototype.readData=function(){var a=H._super.readData.call(this)||{},b=this.getWindow();if(b)b=b&&b.document,a.title=b&&b.title||k;return a};H.prototype.readData=H.prototype.readData;
H.prototype.getWindow=n("_window");H.prototype.getWindow=H.prototype.getWindow;function ud(a,b){var c=!!a.getWindow();if(b!==c){if(b){if(a.openWindow(),a._pendingAttributes)a.writeAttributes(a._pendingAttributes),a._pendingAttributes=k}else a._pendingAttributes=a.readAttributes(),delete a._pendingAttributes.open,a.closeWindow();a._refreshContexts(l)}}H.prototype.openWindow=ba();H.prototype.openWindow=H.prototype.openWindow;H.prototype.closeWindow=ba();H.prototype.closeWindow=H.prototype.closeWindow;function I(a,b){G.call(this,a,b,j);this._name=[a._id,"_",b?b.join(","):"","_"].join("");this._$dialog=k;this._autoResize=this._focused=l}s(I,G);p("wr.ui.jquery.AbstractDialogViewer",I);I.prototype.setup=function(a,b){jQuery.isWindow(b)||f(Error("Context must be a browser window"));this._$dialog=this.createDialog();this._refreshContexts(l);this._$dialog.parent(".ui-dialog").on("focusin.wr focusout.wr",jQuery.proxy(this._stopEvent,this))};I.prototype.setup=I.prototype.setup;
I.prototype.destroy=function(){this.closeDialog();this._$dialog.parent(".ui-dialog").off("focusin.wr focusout.wr",this._stopEvent);this._refreshContexts(j);this._$dialog.dialog("destroy");Kb(this._$dialog[0]);this._$dialog=k};I.prototype.destroy=I.prototype.destroy;I.prototype.refreshSubViews=function(){this._refreshContexts(l)};I.prototype.refreshSubViews=I.prototype.refreshSubViews;
I.prototype._refreshContexts=function(a){var b=this.getContextRegistry(),c=this.getDialog(),d=this.collectSubViewsDiffs(!c.dialog("isOpen")?[]:i);if(b){jQuery.each(d.removed,function(a,c){b.removeContext(c)});var e=!a?c[0]:k;e&&jQuery.each(d.added,function(a,c){b.addContext(c,k,e)})}};I.prototype._stopEvent=function(a){a.stopPropagation()};I.prototype.getDialog=function(){this._$dialog||f(new t("Dialog not available"));return this._$dialog};I.prototype.getDialog=I.prototype.getDialog;
I.prototype.createDialog=function(){var a=this;return jQuery("<div/>").dialog({autoOpen:l,open:function(){a.raiseEvent("open")},close:function(){a.raiseEvent("close");a.closeDialog()},focus:function(){if(!a._focused)a._focused=j,a.raiseEvent("focus")}})};I.prototype.createDialog=I.prototype.createDialog;I.prototype.openDialog=function(){var a=this.getDialog();jQuery(a[0].ownerDocument).on("focusin.wr"+this._name+" click.wr"+this._name,jQuery.proxy(this._handleDocumentInteraction,this));a.dialog("open")};
I.prototype.openDialog=I.prototype.openDialog;I.prototype.closeDialog=function(){var a=this._$dialog;if(a)a.dialog("isOpen")&&a.dialog("close"),jQuery(a[0].ownerDocument).off("focusin.wr"+this._name+" click.wr"+this._name,this._handleDocumentInteraction),a.empty(),this._focused=l,this.raiseEvent("blur")};I.prototype.closeDialog=I.prototype.closeDialog;
I.prototype._handleDocumentInteraction=function(a){if(this._focused&&jQuery(a.target).closest(".ui-dialog")[0]!==this.getDialog().closest(".ui-dialog")[0])this._focused=l,this.raiseEvent("blur")};
I.prototype.writeAttributes=function(a){var b=this.getDialog(),c=a&&a.open;if(c!==i){var d=b.dialog("isOpen");c&&!d?this.openDialog():!c&&d&&this.closeDialog();this._refreshContexts(l)}c=a&&a.modal;c!==i&&b.dialog("option","modal",!!c);c=a&&a.showEffect;c!==i&&b.dialog("option","show",xb(c));c=a&&a.hideEffect;c!==i&&b.dialog("option","hide",xb(c));c=a&&a.autoResize;if(c!==i)this._autoResize=c,vd(this);this._autoResize||(c=a&&a.width,c!==i&&b.dialog("option","width",Number(c)),c=a&&a.height,c!==i&&
b.dialog("option","height",Number(c)));c=a&&a.resizable;c!==i&&b.dialog("option","resizable",!!c);c=a&&a.draggable;c!==i&&b.dialog("option","draggable",!!c);c=a&&a.className;c!=i&&b.dialog("option","dialogClass",c);I._super.writeAttributes.call(this,a)};I.prototype.writeAttributes=I.prototype.writeAttributes;
I.prototype.readAttributes=function(){var a=I._super.readAttributes.call(this),b=this.getDialog();a.open=!!b.dialog("isOpen");a.modal=b.dialog("option","modal");a.showEffect=yb(""+b.dialog("option","show"));a.hideEffect=yb(""+b.dialog("option","hide"));a.autoResize=this._autoResize;a.width=Number(b.dialog("option","width"));a.height=Number(b.dialog("option","height"));a.resizable=b.dialog("option","resizable");a.draggable=b.dialog("option","draggable");a.className=b.dialog("option","dialogClass");
return a};I.prototype.readAttributes=I.prototype.readAttributes;I.prototype.writeData=function(a){I._super.writeData(a);if(a){var b=this.getDialog(),c=a.title;c!==i&&b.dialog("option","title",c);a=a.content;a!==i&&(b.html(a),vd(this))}};I.prototype.writeData=I.prototype.writeData;I.prototype.readData=function(){var a=I._super.readData()||{},b=this.getDialog();a.title=b.dialog("option","title");return a};I.prototype.readData=I.prototype.readData;
function vd(a){if(a._autoResize){var b=a.getDialog();b.dialog("option",{width:10,height:"auto"});b.find("img").filter(function(){return!this.complete}).one("load",function(){vd(a)});for(var c=b.outerWidth()-b.width(),d=jQuery(GLOBAL).width(),e,g;;){e=b[0].scrollWidth;g=b.width();var h=Math.min(d,e+c);if(Math.abs(e-g)<=c||h>=d)break;b.dialog("option",{width:h,height:"auto"})}c=b.dialog("option","position");b.dialog("option","position",c)}};function wd(a,b){I.call(this,a,b);this._extendedAttributes={maximize:l,minimize:l}}s(wd,I);p("wr.ui.jquery.DialogViewer",wd);wd.prototype.createDialog=function(){var a=wd._super.createDialog.call(this);a.dialog("option",{width:200,height:300,resizable:l,draggable:l,closeOnEscape:l});a=a.dialogExtend(this._extendedAttributes);xd(a);yd(a).hide();return a};wd.prototype.createDialog=wd.prototype.createDialog;
function xd(a){var b=new function(a){function b(d){return a.test(d)?i:e.call(this,d)}var e=jQuery.error;this.enable=function(){jQuery.error=b};this.disable=function(){jQuery.error=e}}(/^cannot call methods on draggable prior to initialization\b.+$/);a.on("beforeMaximize.dialogExtend",jQuery.proxy(b.enable,b));a.on("maximize.dialogExtend",jQuery.proxy(b.disable,b));a.on("beforeMinimize.dialogExtend",jQuery.proxy(b.enable,b));a.on("minimize.dialogExtend",jQuery.proxy(b.disable,b))}
function yd(a){return a.parents(".ui-dialog").find(".ui-dialog-titlebar-close")}wd.prototype.writeAttributes=function(a){var b=this.getDialog(),c=a&&a.maximizable,d=a&&a.minimizable;if(c!==i||d!==i)c!==i&&(this._extendedAttributes.maximize=!!c),d!==i&&(this._extendedAttributes.minimize=!!d),b.dialogExtend(this._extendedAttributes);c=a&&a.closable;c!==i&&(d=yd(b),c?d.show():d.hide(),b.dialog("option","closeOnEscape",!!c));wd._super.writeAttributes.call(this,a)};wd.prototype.writeAttributes=wd.prototype.writeAttributes;
wd.prototype.readAttributes=function(){var a=wd._super.readAttributes.call(this),b=this.getDialog();a.maximizable=this._extendedAttributes.maximize;a.minimizable=this._extendedAttributes.minimize;a.closable=yd(b).is(":visible");return a};wd.prototype.readAttributes=wd.prototype.readAttributes;function zd(a,b){I.call(this,a,b)}s(zd,I);p("wr.ui.jquery.WaitDialogViewer",zd);zd.prototype.createDialog=function(){var a=zd._super.createDialog.call(this);a.siblings(".ui-dialog-titlebar").hide();a.prepend(jQuery("<div/>").addClass("progress"));a.dialog("option",{closeOnEscape:l,draggable:l,resizable:l,modal:j});return a};zd.prototype.createDialog=zd.prototype.createDialog;zd.prototype.writeData=function(a){zd._super.writeData.call(this,a);a&&a&&a.content&&this.getDialog().append(jQuery("<div/>").addClass("progress"))};
zd.prototype.writeData=zd.prototype.writeData;function Ad(a,b){H.call(this,a,b);this._secondaryWindowName=[a._id,"[",b?b.join(","):"","]"].join("");this._fixedAttributes=this._secondaryWindow=k;this.writeAttributes({width:200,height:300})}s(Ad,H);p("wr.ui.web.SecondaryWindowViewer",Ad);Ad.prototype.getWindow=n("_secondaryWindow");Ad.prototype.getWindow=Ad.prototype.getWindow;
Ad.prototype.openWindow=function(){var a=this,b=Ad._super.getWindow.call(this),c=this.readAttributes(),d=[];d.push("left=200");d.push("top=100");c.width&&d.push("width="+c.width);c.height&&d.push("height="+c.height);d.push("resizable="+(c.resizable?"yes":"no"));d.push("dialog="+(c.maximizable?"no":"yes"));d.push("minimizable="+(c.minimizable?"yes":"no"));this._fixedAttributes={};this._fixedAttributes.resizable=c.resizable;this._fixedAttributes.minimizable=c.minimizable;this._fixedAttributes.maximizable=
c.maximizable;var e=b.open(k,this._secondaryWindowName,d.join(","));jQuery(e).on("unload",function(){Eb(function(){if(e.closed)a.raiseEvent("close"),a._secondaryWindow=k,a._fixedAttributes=k})});jQuery(e).focus(function(){a.raiseEvent("focus")});this.raiseEvent("open");this._secondaryWindow=e};Ad.prototype.openWindow=Ad.prototype.openWindow;Ad.prototype.closeWindow=function(){this._secondaryWindow&&this._secondaryWindow.close()};Ad.prototype.closeWindow=Ad.prototype.closeWindow;
Ad.prototype.writeAttributes=function(a){a&&this._fixedAttributes&&B(this._fixedAttributes,function(b,c){var d=a&&a[c];d!==i&&d!==b&&f(new t("Cannot change attribute '"+c+"' at this time"))});Ad._super.writeAttributes.call(this,a)};Ad.prototype.writeAttributes=Ad.prototype.writeAttributes;Ad.prototype.readAttributes=function(){var a=Ad._super.readAttributes.call(this);this._fixedAttributes&&jQuery.extend(a,this._fixedAttributes);return a};Ad.prototype.readAttributes=Ad.prototype.readAttributes;function Bd(a){return 9===a.nodeType?j:l}p("wr.util.dom.isDocument",Bd);function Cd(a){return 1===a.nodeType?j:l}p("wr.util.dom.isElement",Cd);function Dd(a,b){var c=jQuery(a);return b?(c=c.find(b),c.not(c.find(b))):c.children()}p("wr.util.dom.findImmediateDescendants",Dd);function Ed(){sa.call(this);this._id="wr:"+Hd++ +":safeMap";this._elementKeys=[]}s(Ed,sa);var Hd=0;o=Ed.prototype;o.put=function(a,b){if(Cd(a)){var c=jQuery.data(a);"undefined"===typeof c[this._id]&&this._elementKeys.push(a);var d=c[this._id];c[this._id]=b;return d}return Ed._super.put.call(this,a,b)};
o.remove=function(a){if(Cd(a)){var b=jQuery.data(a,this._id);jQuery.removeData(a,this._id);this._elementKeys=jQuery.grep(this._elementKeys,function(b){return b!==a});return b}return Ed._super.remove.call(this,a)};o.clear=function(){for(var a=-1,b=this._elementKeys.length;++a<b;)jQuery.removeData(this._elementKeys[a],this._id);this._elementKeys=[];Ed._super.clear.call(this)};o.getSize=function(){return this._elementKeys.length+Ed._super.getSize.call(this)};
o.get=function(a){return Cd(a)?jQuery.data(a,this._id):Ed._super.get.call(this,a)};o.getValues=function(){for(var a=[],b=-1,c=this._elementKeys.length;++b<c;){var d=jQuery.data(this._elementKeys[b],this._id);a.push(d)}Array.prototype.push.apply(a,Ed._super.getValues.call(this));return a||[]};o.each=function(a){if(a){for(var b=-1,c=this._elementKeys.length;++b<c;){var d=this._elementKeys[b],e=jQuery.data(d,this._id);a(d,e)}Ed._super.each.call(this,a)}};function K(a,b,c){G.call(this,a,b,c);this._lastFocusedElementId=this._context=k;this._focused=l}s(K,G);p("wr.ui.html.AbstractHtmlViewer",K);K.prototype._log=z.getLog("wr.ui.html.AbstractHtmlViewer");K.prototype.setup=function(a,b){Cd(b)||f(Error("Context must be an HTML DOM element"));this._context=b;jQuery(this._context).on("focusin focusout click keypress",jQuery.proxy(this._handleFocusEvents,this))};K.prototype.setup=K.prototype.setup;
K.prototype.destroy=function(){jQuery(this._context).off("focusin focusout click keypress",this._handleFocusEvents);this._context=k;K._super.destroy.call(this)};K.prototype.destroy=K.prototype.destroy;K.prototype.getContext=function(){this._context||f(new t("Context not available"));return this._context};K.prototype.getContext=K.prototype.getContext;K.prototype.raiseEventForHtmlEvent=function(a,b,c){c&&Id(c,"uiEventRaised")&&this.raiseEvent(a,b)};K.prototype.raiseEventForHtmlEvent=K.prototype.raiseEventForHtmlEvent;
function Id(a,b){function c(a,b){var c=a.originalEvent||a;"string"===typeof c.data?c.data=(c.data?c.data+",":"")+b:(c.__wr_eventTags||(c.__wr_eventTags={}))[b]=j}return!function(a,b){var c=a.originalEvent||a;return"string"===typeof c.data?0<=_.indexOf(c.data.split(","),b):(c.__wr_eventTags||(c.__wr_eventTags={}))[b]===j}(a,b)?(c(a,b),j):l}
K.prototype._handleFocusEvents=function(a){if(Id(a,"focusTracked")){var b=jQuery(a.target),c=b.attr("id")||k,d="click"===a.type||"keypress"===a.type||"focusin"===a.type,e="focusin"==a.type||"focusout"==a.type;if(e||Oc(b[0]))if(this._focused=!!d,d)this._lastFocusedElementId=c||k,e?this.raiseEventForHtmlEvent("focus",this.getView(),a):this.raiseEvent("focus",this.getView())}};
K.prototype.getLastFocusedElement=function(){var a;if(this._lastFocusedElementId){a=jQuery("#"+jc(this._lastFocusedElementId));if(0<a.length)return a[0];this._lastFocusedElementId=k}return k};K.prototype.getLastFocusedElement=K.prototype.getLastFocusedElement;K.prototype.isFocused=n("_focused");K.prototype.isFocused=K.prototype.isFocused;
K.prototype.writeAttributes=function(a){if((a&&a.focused)===j){var b=this.getLastFocusedElement();b||jQuery(this._context).find(":input:not(:submit)").each(function(){if(Oc(this))return b=this,l});b&&Pc(b)}K._super.writeAttributes.call(this,a)};K.prototype.writeAttributes=K.prototype.writeAttributes;K.prototype.readAttributes=function(){var a=K._super.readAttributes.call(this);a.focused=this.isFocused();return a};K.prototype.readAttributes=K.prototype.readAttributes;function wa(a,b,c){var d;wa=d=ma().supportsPropertyDefinition()?function(a,b,c){(c.get||c.set)&&f(new TypeError("Accessor properties not supported"));Object.defineProperty(a,b,c)}:function(a,b,c){(!a||!c)&&f(new ReferenceError);(c.get||c.set)&&f(new TypeError("Accessor properties not supported"));var d=a.__wr_property_definitions;d||(a.__wr_property_definitions=d={});var r=d[b];r?r.configurable||f(new TypeError("Property is not configurable")):d[b]=r={writable:l,enumerable:l,configurable:l};jQuery.extend(r,
c);a[b]=r.value};d(a,b,c)}p("wr.util.obj.defineProperty",wa);function Jd(a,b){if(a===k||a===i||b===k||b===i)return j;b=""+b;if(!Object.prototype.hasOwnProperty.call(a,b))return j;var c;try{if(c=delete a[b],c!==Object.prototype.hasOwnProperty.call(a,b))return c}catch(d){}try{return a[b]=i,j}catch(e){return l}}p("wr.util.obj.deleteProperty",Jd);
function md(a,b){var c;md=c=ma().supportsPropertyDefinition()?da(j):function(a,b){if("__wr_property_definitions"===b)return l;var c=a&&a.__wr_property_definitions;return(c=c&&c[b])?!!c.enumerable:j};return c(a,b)}p("wr.util.obj.isLoopedPropertyEnumerable",md);function Kd(a,b){if(a){var c=a.split("."),d=b||GLOBAL;try{for(var e;c.length&&(e=c.shift());)d=d[e]}catch(g){g instanceof TypeError&&(g=new TypeError(""+a+" is undefined")),f(g)}return d}}p("wr.util.obj.lookup",Kd);
function Ld(a){var b;Ld=b="function"===typeof Object.keys?Object.keys:function(a){("object"!==typeof a&&"function"!==typeof a||a===k)&&f(new TypeError);var b=[],e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&md(a,e)&&b.push(e);return b};return b(a)}p("wr.util.obj.keys",Ld);function B(a,b){var c;B=c=ma().supportsPropertyDefinition()?function(a,b){_.each(a,b)}:function(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&md(a,c)&&b(a[c],c)};c(a,b)}p("wr.util.obj.each",B);
function Md(a,b,c){if(!a||!b||!jQuery.isPlainObject(a)||!jQuery.isPlainObject(b))return a;c===j?jQuery.extend(j,a,b):0<c?B(b,function(b,e){"undefined"!==typeof b&&(jQuery.isPlainObject(a[e])&&jQuery.isPlainObject(b)?Md(a[e],b,c-1):a[e]=b)}):jQuery.extend(a,b);return a}p("wr.util.obj.extend",Md);var Nd=new sa,Od={names:[],values:[],namesByValue:new sa};
function Pd(a){if(!a)return Od;var b=Nd.get(a);if(!b){var b=[],c=[],d=new sa,e;for(e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&md(a,e)){var g=a[e];"function"!==typeof g&&(b.push(e),c.push(g),d.put(g,e))}b={names:b,values:c,namesByValue:d};Nd.put(a,b)}return b}function Qd(a){return Pd(a).values}p("wr.util.obj.getEnumValues",Qd);p("wr.util.obj.getEnumNames",function(a){return Pd(a).names});function Rd(a,b){return Pd(a).namesByValue.get(b)||k}p("wr.util.obj.getEnumName",Rd);function Sd(a,b){this.readyState=0;this.onreadystatechange=k;this.status=0;this.statusText="";this.responseXML=this.responseText=k;this._$form=jQuery(a);this._formInputs=b;this._accessor=this._$iframe=k;this._error=this._complete=this._sending=l;this._responseHeaders=k;this._log.isDebugEnabled()&&this._log.debug("Constructed for form "+ka(a))}Sd.prototype._log=z.getLog("internal.logic.AjaxFrameTransport");
Sd.prototype.open=function(){var a=jQuery,b;b=jQuery("#wr-ajaxFramesDiv");0===b.length&&(b=jQuery("<div>",{id:"wr-ajaxFramesDiv"}).css({position:"absolute",display:"none",height:"0",width:"0"}).prependTo(GLOBAL.document.body));var c="wr-ajaxRequest"+Math.floor(2147483647*Math.random());b=jQuery(this._createFrame(c)).attr({name:c,id:c}).css({display:"none",height:"0",width:"0"}).appendTo(b)[0];this._$iframe=a(b);this._accessor=new rc(this._$iframe[0]);Td(this,1,j)};
Sd.prototype._createFrame=function(a){var b=k;try{b=GLOBAL.document.createElement('<div name="__test">')}catch(c){}b=b&&"DIV"===b.tagName.toUpperCase()&&"__test"===b.name?function(a){return GLOBAL.document.createElement('<iframe name="'+a+'">')}:function(a){return jQuery("<iframe>",{name:a})[0]};Sd.prototype._createFrame=b;return b(a)};Sd.prototype.setRequestHeader=ba();
Sd.prototype.send=function(a){var b=this._$iframe,c=this._accessor,d=this._$form;if(!this._sending){this._complete=l;this._sending=j;this._responseHeaders=k;for(var e=[],g={},h=/([^=&]+)=([^&]*)/g,m;m=h.exec(a);){var r=m[1];(g[r]||(g[r]=[])).push(m[2])}var R=this._formInputs;B(g,function(a,b){var c=R[b],d=c?c.values:[],g=c&&c.element;if(!(!g?0:_.find(Vb,function(a){return!!a.accept(g)})))c=Ud(a),d=Ud(d),d!=c&&jQuery.each(a,function(a,c){e.push(b+"="+c)})});if("undefined"===typeof GLOBAL.DOMParser)e.push("pxml=true"),
c._usePseudoXML=j;b.one("complete load",jQuery.proxy(this._onComplete,this,l));b.one("abort error",jQuery.proxy(this._onComplete,this,j));b.one("load",jQuery.proxy(this._destroyFrame,this));Xb(d[0],0<e.length?e.join("&"):k,k,b.prop("name"))}};function Ud(a){return a.join("&").replace(/%0D%0A/gi,"%0A").replace(/\+/g,"%20")}Sd.prototype.abort=function(){this._finish(j);Td(this,4,j);Td(this,0,l)};
Sd.prototype._onComplete=function(a){if(!this._complete)this._complete=j,this._error=a,this._finish(l),Td(this,4,j)};
Sd.prototype._finish=function(a){if(a)this._log.debug("Aborted"),this.status=0,this.responseText=this.statusText="",this._responseHeaders=this.responseXML=k;else{this._log.debug("Finished: extracting result");this.status=200;this.statusText="OK";var a=sc(this._accessor),a="text/x-pseudo-xml"===a?"text/xml":a,b=this._accessor;if(!b._contents)b._contents=uc(b);this.responseText=b._contents.text;if("text/xml"===a||"application/xml"===a){b=this._accessor;if(!b._contents)b._contents=uc(b);b=b._contents.value}else b=
k;this.responseXML=b;this._responseHeaders={"content-type":a}}this._sending=l};Sd.prototype._destroyFrame=function(){this._sending?Eb(jQuery.proxy(this._destroyFrame,this)):GLOBAL.setTimeout(jQuery.proxy(function(){this._$iframe&&(this._$iframe.off(),Kb(this._$iframe[0]));this._accessor=this._$iframe=k},this),5E3)};Sd.prototype.getResponseHeader=function(a){return this._responseHeaders&&this._responseHeaders[a.toLowerCase()]||k};
Sd.prototype.getAllResponseHeaders=function(){if(this._responseHeaders){var a=[];B(this._responseHeaders,function(b,c){a.push(c);a.push(": ");a.push(b);a.push("\r\n")});return a.join("")}return k};function Td(a,b,c){a._log.isDebugEnabled()&&a._log.debug("Ready state "+b);a.readyState=b;c&&(a.onreadystatechange||ea)()};function Vd(a,b){this._callback=a;this._finishOnInteraction=b;this._uniqueId=this._done=k;Wd(this)}var Xd=[];
function Wd(a){a._done!==k&&f(new t("Already started waiting"));a._done=l;Xd.push(a);if(1===Xd.length){if(a._finishOnInteraction)jQuery(GLOBAL).on("click focusin","a, area, :submit",Yd);jQuery(GLOBAL).on("unload",Yd)}a._uniqueId=0<Zd.length?Zd.shift():(""+(new Date).valueOf()).slice(-3)+(""+Math.floor(100*Math.random()));var b="wrReq"+a._uniqueId;jQuery.cookie(b,"waiting",{path:"/"});$d(b,function(b,d){(!d||"done"===d)&&a._finish()})}
Vd.prototype._finish=function(){this._done===k&&f(new t("Not waiting"));this._done=j;za(Xd,this);0===Xd.length&&(jQuery(GLOBAL).off("unload",Yd),this._finishOnInteraction&&jQuery(GLOBAL).off("click focusin","a, area, :submit",Yd));if(this._uniqueId){var a="wrReq"+this._uniqueId;ae.hasOwnProperty(a)&&(delete ae[a],0===--be&&GLOBAL.clearInterval(ce));jQuery.removeCookie(a,{path:"/"});Zd.push(this._uniqueId);this._uniqueId=k}this._callback.call(GLOBAL)};
function Yd(){_.each(Xd,function(a){a._finish()})}var ae={},be=0,ce=k;function $d(a,b){ae.hasOwnProperty(a)&&f(new t("Already observing"));0===be++&&(ce=GLOBAL.setInterval(de,100));ae[a]={lastValue:jQuery.cookie(a)||k,callback:b}}function de(){B(ae,function(a,b){var c=jQuery.cookie(b)||k,d=a.lastValue!==c;a.lastValue=c;d&&a.callback.call(GLOBAL,b,c)})}var Zd=[];function ee(){this._level=4;this._queue=[]}s(ee,jb);p("wr.log.ConsoleAppender",ee);var fe={1:["error"],2:["warn"],3:["info"],4:["debug","log"]};ee.prototype.appendFiltered=function(a){var b=this;this._queue.push(a);1<=this._queue.length&&Eb(function(){for(var a;a=b._queue.shift();)ge(a)})};ee.prototype.appendFiltered=ee.prototype.appendFiltered;
function ge(a){var b=GLOBAL.console;if(b){var c=a.getLevel(),d=a.getErrorInfo(),e=[];e.push(he(a.getTimestamp()));e.push(Rd(ib,c));e.push("["+a.getCategory()+"]");e.push(a.getMessage());d&&e.push(""+d);for(var g=e.join(" "),a=d&&1>=c?ha(d._error,{toString:function(){return g}}):g,c=fe[c],d=0;d<c.length;d++)if(e=b[c[d]]){"function"===typeof e?e.call(b,a):Function.prototype.call.call(e,b,a);break}}}
function he(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")};function ie(){this._level=4;this._autoShowLevel=2;this._historyVisible=this._loggerVisible=l;this._follow=j;this._highestLevel=4}s(ie,jb);p("wr.log.HtmlAppender",ie);
ie.prototype.appendFiltered=function(a){var b=a.getLevel(),c=a.getErrorInfo(),d,e=this._getStripe();if(e){var g=e.find(".wr-log-message"),h=e.find(".wr-log-history");d=[];d.push(je(a.getTimestamp()));d.push(Rd(ib,b));d.push("["+a.getCategory()+"]");d.push(a.getMessage());c&&d.push(""+c);c=d.join(" ");if(b<=this._highestLevel){if(b<this._highestLevel)this._highestLevel=b,this._setColors(e,this._highestLevel);g.text(a.getMessage())}e.css({"z-index":this._getMaxZIndex(".ui-dialog")+1});b<=this._autoShowLevel&&
!this._loggerVisible&&this._toggleLogger();a=jQuery("<div/>").addClass("wr-log-entry");a.attr("data-loglevel",Rd(ib,b).toLowerCase());this._setColors(a,b,j);a.text(c).appendTo(h);this._follow&&h.scrollTop(h[0].scrollHeight)}};ie.prototype.appendFiltered=ie.prototype.appendFiltered;
function je(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")}
var ke={1:["#FF0000","#FFFFFF"],2:["#FFFF00","#000000"],3:["#0000FF","#FFFFFF"],4:["#808080","#FFFFFF"]},le={1:["#FFB2B2","#000000"],2:["#FFFFB2","#000000"],3:["#B2B2FF","#000000"],4:["#D8D8D8","#000000"]},me={thickness:"1.5em",toggleShow:"<<",toggleHide:">>"},ne="#wr-log { position: fixed; top: 0; right: 0; overflow: hidden; text-align: center; font: 12px sans-serif; },.wr-log-toggle { float: right; width: ${thickness}; line-height: ${thickness}; text-align: center; font-weight: bold; cursor: pointer; },.wr-log-message { height: ${thickness}; margin-right: ${thickness}; line-height: ${thickness}; margin: 0; overflow: hidden; font-weight: bold; -moz-user-select: none; -ms-user-select: none; },.wr-log-history { max-height: 300px; margin: 5px; border: 3px solid #222222; border-bottom: 0; overflow: auto; background-color: #EEEEEE; text-align: left; white-space: pre-wrap; font: 90% monospace; },.wr-log-historyLinks { padding: 0 3px; margin: -5px 5px 5px; background-color: #111111; text-align: left; font-size: 80%; },.wr-log-historyLinks a { cursor: pointer; color: #FFFFFF; text-decoration: none; },.wr-log-historyLinks a ~ a { margin-left: 2em; },.wr-log-entry { border-bottom: 1px solid #222222; }".split(",");
o=ie.prototype;o._toggleLogger=function(){var a=this._getStripe();this._loggerVisible=!this._loggerVisible;a.animate({width:this._loggerVisible?"100%":me.thickness},200);a.find(".wr-log-toggle").text(this._loggerVisible?me.toggleHide:me.toggleShow);!this._loggerVisible&&this._historyVisible&&this._toggleHistory()};
o._toggleHistory=function(){var a=this._getStripe();this._historyVisible=!this._historyVisible;a.css({height:this._historyVisible?"auto":me.thickness});this._historyVisible&&a.find(".wr-log-history").each(function(){this.scrollTop=this.scrollHeight})};
o._getStripe=function(){var a=this,b=GLOBAL.document.body,c=k,d=k;b&&(d=jQuery("#wr-log-style"),d[0]||(c=ne.join("\r\n").replace(/\$\{([^}]+)}/g,function(a,b){return me[b]}),d=jQuery("<style id='wr-log-style'>"+c+"</style>").prependTo(b)),c=jQuery("#wr-log"),c[0]||(c=jQuery("<div id='wr-log'/>").css({width:me.thickness,height:me.thickness}).on("click keydown keyup keypress",l).prependTo(b).fadeIn(),jQuery("<div/>").addClass("wr-log-toggle").attr("title","Click to show/hide logger").text(me.toggleShow).appendTo(c),
jQuery("<p/>").addClass("wr-log-message").attr("title","Double-click to show/hide log history").appendTo(c),jQuery("<div/>").addClass("wr-log-history").appendTo(c),b=jQuery("<div/>").addClass("wr-log-historyLinks").appendTo(c),jQuery("<a/>").text("SELECT ALL").click(function(){a._selectText(jQuery(this).parent().siblings(".wr-log-history")[0])}).attr("title","Selects all log entries").appendTo(b),jQuery("<a/>").text("FOLLOW:"+(a._follow?"ON":"OFF")).click(function(){a._follow=!a._follow;jQuery(this).text("FOLLOW:"+
(a._follow?"ON":"OFF"))}).attr("title","Toggles automatic scrolling to the last log entry").appendTo(b),jQuery("<a/>").text("RETHROW").click(function(){var a=l;return function(){a=!a;z.setRethrowErrors(a);jQuery(this).text("RETHROW:"+(a?"ON":"OFF"))}}()).attr("title","Toggles re-throwing of errors, allowing browser tools to detect them").appendTo(b),this._setColors(c,this._highestLevel),c.find(".wr-log-toggle").click(jQuery.proxy(this._toggleLogger,this)),c.find(".wr-log-message").dblclick(jQuery.proxy(this._toggleHistory,
this))));return c};o._getMaxZIndex=function(a){if(!jQuery.fn.zIndex)return 999;var b=Number.MIN_VALUE;jQuery(a||"*").each(function(){b=Math.max(b,jQuery(this).zIndex())});return b>Number.MIN_VALUE?b:999};o._setColors=function(a,b,c){b=(c?le:ke)[b];a.css({"background-color":b[0],color:b[1]})};
o._selectText=function(a){var b;b=GLOBAL.getSelection?function(a){var b=GLOBAL.getSelection(),e=a.ownerDocument.createRange();e.selectNodeContents(a);b.removeAllRanges();b.addRange(e)}:a.ownerDocument.createTextRange?function(a){var b=a.ownerDocument.body.createTextRange();b.moveToElementText(a);b.select()}:function(){GLOBAL.alert("Text selection not supported")};ie.prototype._selectText=b;return b(a)};function oe(){this._level=4;this._useNotifies=j;this._notifyMessage="<strong>Log Status</strong>";this._notifyStats=j;this._notifyLevel=2;this._notifying=l;this._highestLevel=4;this._tempStats={};this._tempLines=[];this._refreshTimeout=k;this._maxSize=512E3;this._viewer=k;pe(this,_.str.repeat("=",80));pe(this,""+GLOBAL.document.location);pe(this,""+new Date);pe(this,""+GLOBAL.navigator.userAgent);pe(this,_.str.repeat("=",80));var a=this;jQuery(GLOBAL).on("unload",function(){a._viewer&&a._viewer.w.close()});
qe.push(this)}s(oe,jb);p("wr.log.LocalAppender",oe);var qe=[];oe.prototype.setup=function(a){oe._super.setup.call(this,a);this._useNotifies="boolean"===typeof a.notify?a.notify:j;this._notifyMessage=a.notifyMessage||"<strong>Log Status</strong>";this._notifyStats="boolean"===typeof a.notifyStats?a.notifyStats:j;this._notifyLevel=a.notifyLevel||2;this._maxSize=a.maxSize||512E3};oe.prototype.setup=oe.prototype.setup;
oe.prototype.appendFiltered=function(a){var b=a.getLevel(),c=a.getErrorInfo();if(b<this._highestLevel)this._highestLevel=b;if(b<=this._notifyLevel&&!this._notifying)this._notifying=j;var d=[];d.push(re(a.getTimestamp()));d.push(Rd(ib,b));d.push("["+a.getCategory()+"]");d.push(a.getMessage());c&&d.push(""+c);pe(this,d.join(" "),se[b])};oe.prototype.appendFiltered=oe.prototype.appendFiltered;
function re(a){var b=_.str.lpad,c=[];c.push(""+a.getFullYear());c.push("-");c.push(b(""+(a.getMonth()+1),2,"0"));c.push("-");c.push(b(""+a.getDate(),2,"0"));c.push(" ");c.push(b(""+a.getHours(),2,"0"));c.push(":");c.push(b(""+a.getMinutes(),2,"0"));c.push(":");c.push(b(""+a.getSeconds(),2,"0"));c.push(".");c.push(b(""+a.getMilliseconds(),3,"0"));return c.join("")}function pe(a,b,c){try{a._tempLines.push(te(b)),c&&(a._tempStats[c]=(a._tempStats[c]||0)+1),ue(a)}catch(d){ve(d)}}
function te(a){return a.replace(/[\u0000-\u0008\u000B-\u000C\u000E-\u001F]/g,function(a){return"[0x"+a.charCodeAt(0)+"]"})}function we(a){a._highestLevel=4;a._tempLines=[];a._tempStats={};xe()&&(GLOBAL.localStorage.removeItem("wr.clientLog.text"),GLOBAL.localStorage.removeItem("wr.clientLog.stats"));ue(a)}function ue(a){if(!a._refreshTimeout)a._refreshTimeout=GLOBAL.setTimeout(jQuery.proxy(a._refreshNow,a),100)}
oe.prototype._refreshNow=function(){this._refreshTimeout=k;try{var a=ye();a&&this._tempLines.unshift(a);a=this._tempLines.join("\n");if(a.length>this._maxSize)var b=a.indexOf("\n",a.length-this._maxSize),a=a.substring(0<=b?b+1:a.length);xe()&&GLOBAL.localStorage.setItem("wr.clientLog.text",a);this._tempLines=[];var c=ze(),d;for(d in this._tempStats)this._tempStats.hasOwnProperty(d)&&(c[d]=(c[d]||0)+this._tempStats[d]);xe()&&GLOBAL.localStorage.setItem("wr.clientLog.stats",GLOBAL.JSON.stringify(c));
this._tempStats={};Ae(this);Be(this)}catch(e){ve(e)}};function ve(a){var b=GLOBAL.console;"function"===typeof b.error&&b.error(a)}function ye(){if(xe())return GLOBAL.localStorage.getItem("wr.clientLog.text")||""}function ze(){if(xe())return GLOBAL.JSON.parse(GLOBAL.localStorage.getItem("wr.clientLog.stats")||"{}")}function xe(){return!!GLOBAL.localStorage&&!!GLOBAL.JSON}oe.openViewer=function(){_.each(qe,function(a){Ce(a)})};
function Ae(a){if(a._viewer){var b=jQuery(a._viewer.history),c=ye();b.text(c||"");a._viewer.follow&&b.scrollTop(b[0].scrollHeight)}}
function Ce(a){if(a._viewer)a._viewer.w.focus();else{var b=GLOBAL.open();b||f(Error("Unable to open viewer window: this may be caused by popup blocking."));var c=b.document;c.open("text/html","replace");c.write('<html><head><title></title><meta http-equiv="X-UA-Compatible" content="IE=8"></head><body></body></html>');c.close();var d=GLOBAL.document.location;c.title="Log - "+d.protocol+"//"+d.host;var e={};e.w=b;e.follow=j;e.history=jQuery(c.createElement("PRE")).css({position:"absolute",top:10,left:10,
right:10,bottom:25,padding:5,margin:0,overflow:"scroll",border:"3px solid #222222","background-color":"#EEEEEE"}).appendTo(c.body)[0];d=jQuery(c.createElement("DIV")).css({position:"absolute",left:10,right:10,bottom:5,height:16,padding:"2px 4px","background-color":"#111111","font-size":"14px","line-height":"16px"}).appendTo(c.body)[0];jQuery(c.createElement("A")).text("Follow:"+(e.follow?"ON":"OFF")).attr({title:"Toggles automatic scrolling to the last log entry"}).css({color:"#FFFFFF",cursor:"pointer"}).click(function(){e.follow=
!e.follow;jQuery(this).text("Follow:"+(e.follow?"ON":"OFF"))}).appendTo(d);jQuery(c.createElement("A")).text("Clear").attr({title:"Clears all recorded log entries"}).css({color:"#FFFFFF",cursor:"pointer","margin-left":"2em"}).click(function(){we(a)}).appendTo(d);a._viewer=e;jQuery(b).on("unload",function(){a._viewer=k});Ae(a)}}
var De={1:["#FF0000","#FFFFFF"],2:["#FFFF00","#000000"],3:["#0000FF","#FFFFFF"],4:["#808080","#FFFFFF"]},se={1:"Error",2:"Warn",3:"Info",4:"Debug"},Ee={thickness:"1.5em",dismiss:"X"},Fe="#wr-clientLog { position: fixed; top: 0; right: 0; max-width: 16em; padding: 0 5px 5px; overflow: hidden; box-shadow: 0 0 5px #000000; -ms-user-select: none; -moz-user-select: none; -webkit-user-select: none; cursor: default; text-align: left; font: 12px sans-serif; },.wr-clientLog-dismiss { float: right; width: ${thickness}; margin: 0 -5px 0 10px; line-height: ${thickness}; text-align: center; font-weight: bold; cursor: pointer; background-color: #111111; color: #FFFFFF; },.wr-clientLog-stats { width: 100%; margin-top: 5px; font-weight: normal; },.wr-clientLog-stats th { text-align: left; background-color: inherit !important; color: inherit !important; },.wr-clientLog-stats td { text-align: right; background-color: inherit !important; color: inherit !important; },.wr-clientLog-links { padding: 0 3px; margin-top: 5px; background-color: #111111; font-size: 80%; font-weight: normal; },.wr-clientLog-links a { cursor: pointer; color: #FFFFFF; text-decoration: none; },.wr-clientLog-links a ~ a { margin-left: 2em; }".split(",");
function Be(a){var b=a._getStripe();if(b){a._setColors(b,a._highestLevel);b.css({"z-index":a._getMaxZIndex(".ui-dialog")+1});a._notifying&&b.show();var c=b.find(".wr-clientLog-stats");if(c[0]){var d=ze(),e=se;_.each(Qd(ib),function(b){if(b<=a._notifyLevel){var h=e[b],b=c.find(".wr-clientLog-stats-"+b);b.find("th").text(h);b.find("td").text(d[h]||0)}})}}}
oe.prototype._getStripe=function(){var a=this;if(!this._useNotifies)return k;var b=GLOBAL.document.body,c=k,d=k,e;b&&(d=jQuery("#wr-clientLog-style"),d[0]||(d=Fe.join("\r\n").replace(/\$\{([^}]+)}/g,function(a,b){return Ee[b]}),d=jQuery("<style id='wr-clientLog-style'>"+d+"</style>").prependTo(b)),c=jQuery("#wr-clientLog"),c[0]||(c=jQuery("<div id='wr-clientLog'/>").html(this._notifyMessage).css({display:"none"}).on("click keydown keyup keypress",l).prependTo(b),jQuery("<div/>").addClass("wr-clientLog-dismiss").text(Ee.dismiss).click(function(){a._notifying=
l;c.hide()}).attr("title","Click to dismiss").prependTo(c),this._notifyStats&&(e=jQuery("<table/>").addClass("wr-clientLog-stats").appendTo(c),_.each(Qd(ib),function(a){jQuery("<tr><th></th><td></td></tr>").addClass("wr-clientLog-stats-"+a).appendTo(e)})),b=jQuery("<div/>").addClass("wr-clientLog-links").appendTo(c),jQuery("<a/>").text("SHOW").click(function(){Ce(a)}).attr("title","Shows the full log").appendTo(b),jQuery("<a/>").text("CLEAR").click(function(){we(a);a._notifying=l;c.hide()}).attr("title",
"Clears the log and dismisses this notification").appendTo(b),this._setColors(c,this._highestLevel)));return c};oe.prototype._getMaxZIndex=function(a){if(!jQuery.fn.zIndex)return 999;var b=Number.MIN_VALUE;jQuery(a||"*").each(function(){b=Math.max(b,jQuery(this).zIndex())});return b>Number.MIN_VALUE?b:999};oe.prototype._setColors=function(a,b){var c=De[b];a.css({"background-color":c[0],color:c[1]})};function Ge(){this._lastDepartureWaiter=k}s(Ge,pb);p("wr.nav.HttpWebRouter",Ge);Ge.prototype._log=z.getLog("wr.nav.HttpWebRouter");Ge.prototype.isRequestImplemented=function(){return He(j)!=k};Ge.prototype.isRequestImplemented=Ge.prototype.isRequestImplemented;
Ge.prototype.implementRequest=function(a){He();var b=a.getURL();if((b=b&&parseUri(b))&&(b.protocol||b.host||b.path||b.query))a.isDeparting()?0<a._inputs.length?Ie(this,a):Je(this,a):Ke(this,a);else{var b=a.getURL(),c=a._target;a.start();this._log.debug("Request to "+b+" with target "+c+" - Consumed");a.success("Consumed",k,k)}};Ge.prototype.implementRequest=Ge.prototype.implementRequest;function He(a){var b=GLOBAL.document;a!==j&&!b&&f(Error("Document DOM not available"));return b}
function Ke(a,b){var c=Le(a,b),d=c[0]?c[0].form:k,e={};_.each(c,function(a){var b=encodeURIComponent(a.name);(e[b]||(e[b]={element:a,values:[]})).values.push(encodeURIComponent(a.value))});var g=b.getURL(),h={};h.xhr=Me(d,e)||i;h.type="POST";h.data=Ne(b.getParams(),c);h.dataType=Oe(b.getResponseTypes())||i;var m=k;h.beforeSend=function(){a._log.debug("Request to "+g+" - Started");Pe();b.start();m=(new Date).valueOf()};h.success=function(c,d,h){var Ka=(new Date).valueOf()-m;a._log.isDebugEnabled()&&
a._log.debug("Request to "+g+" - Succeeded in "+Ka+" ms");b.success(d,h&&h.responseText,c);b=e=k};h.error=function(c,d,h){var Ka=(new Date).valueOf()-m,h=h&&(h.message||h),d=_.str.capitalize(d||"Generic error")+(h?" - "+h:"");a._log.isDebugEnabled()&&a._log.debug("Request to "+g+" - Failed in "+Ka+"ms, "+d);b.failure(d,c&&c.responseText);b=e=k};a._log.isDebugEnabled()&&a._log.debug("Request to "+g+" - Underway\nType: "+h.type+"\nData: "+ka(h.data)+"\nData type: "+h.dataType);jQuery.ajax(g,h)}
function Pe(){jQuery.each(Vb,function(a,b){b.beforeRequest()})}function Me(a,b){return a&&_.any(b,function(a){return jQuery(a.element).is(":file")})?function(){return new Sd(a,b)}:k}
function Ne(a,b){var c=[];c.push(jQuery.param(a));var d=jQuery(b),e={};d.each(function(a,b){var c=k;jQuery.each(Vb,function(a,d){if(d.accept(b))return c=d,l});if(c)e[b.id]=c.getter});d=d.filter(function(){return"submit"!=this.type&&"file"!=this.type&&"image"!=this.type&&!e[this.id]});c.push(d.serialize());B(e,function(a,b){var d=a(jQuery("#"+jc(b))[0]);c.push(encodeURIComponent(b)+"="+encodeURIComponent(d))});return _.filter(c,function(a){return!!a}).join("&")}var Qe={html:"html",json:"json",xml:"xml"};
function Oe(a){return!a?k:_.map(a,function(a){return Qe[a]}).join(" ")}
function Ie(a,b){var c=jQuery(Le(a,b)),d=jQuery(c[0].form);Re(a,b,l,function(){a._log.debug("Request to "+g+" - Form post complete");b.success("Form post complete",k,k)});var e={};jQuery.extend(e,b.getParams());c.filter(":submit").each(function(){var a=jQuery(this);e[a.prop("name")]=a.val()});var g=b.getURL(),c=b._target,h=Se(),c=c||h.target;a._log.isDebugEnabled()&&a._log.debug("Request to "+g+" - Form submit underway\nForm: "+ka(d[0])+"\nExtra parameters: "+ka(e)+"\nTarget: "+c);b.start();Xb(d[0],
k,e,c).onComplete(function(){a._log.debug("Request to "+g+" - Form submitted")})}
function Je(a,b){var c=b.getURL(),d=b._target,e=Te(c),g=Re(a,b,e,function(){a._log.debug("Request to "+c+" - Location get complete");b.success("Location get complete",k,k)}),c=Da(c,b.getParams()),c=_.str.strLeftBack(c,"#"),h=Se(),c=Aa(h.href,c),d=d||h.target;a._log.isDebugEnabled()&&a._log.debug("Request to "+c+" - Location change underway\nTarget: "+d);b.start();(h=Ue(d))?(d=h.location,d.href===c?d.reload(j):d.assign(c),a._log.debug("Request to "+c+" - Location changed"),(e||h!==GLOBAL)&&g._done===
l&&g._finish()):b.failure("Unable to open window for target "+d,k)}function Le(a,b){var c=[];_.each(b._inputs,function(b){if(jQuery(b).is(":input")){var e;var g=jQuery(b);!g.prop("disabled")&&!Ve(b)?e=b:(e=g.data("wr-originalId")||g.attr("id"),g=g.data("wr-originalName")||g.attr("name"),e=(e?jQuery("#"+jc(e))[0]:g?jQuery(":input[name='"+kc(g)+"']:not(:disabled)")[0]:k)||k);e?c.push(e):a._log.debug("No replacement found for input "+ka(b))}});return c}
function Ve(a){var b=a&&a.ownerDocument;if(!b)return j;do if(a===b)return l;while(a=a.parentNode);return j}function Te(a){var b=Se().href,c=parseUri(Aa(b,".")),a=parseUri(Aa(b,a));return c.authority!==a.authority}function Se(){var a=jQuery(He()).find("base").eq(0),b=GLOBAL.location.href,b=a[0]&&a.attr("href")||Aa(b,".."),a=a[0]&&a.attr("target")||"_self";return{href:b,target:a}}function Ue(a){var b=GLOBAL;return!a||"_self"===a?b:"_parent"===a?b.parent:"_top"===a?b.top:b.open("about:blank",a)}
Ge.CALLBACK_COOKIE_PARAM="cbck";function Re(a,b,c,d){if(a._lastDepartureWaiter){var e=a._lastDepartureWaiter;e._done===l&&e._finish();a._lastDepartureWaiter=k}a=new Vd(d,j);c||(b.getParams().cbck=a._uniqueId?"wrReq"+a._uniqueId:k);return a};function L(){this.linkInfosSelective={};this.linkInfos={};this._linkData={};this._keptHahsesPages={};this._keptHashes={}}s(L,pb);p("wr.nav.PropagationRouter",L);L.prototype._log=z.getLog("wr.nav.PropagationRouter");L.HASH_PARAMETER="CRC";
L.prototype.mergeLinkData=function(a,b){var c=this._linkData,d=c[a]||(c[a]={}),c=this._keptHashes,e=this._keptHahsesPages[a]!==l?c[a]||(c[a]={}):k;B(b,function(a,b){var c;if(a){if(c="object"===typeof a?{value:a.value,hash:a.hash}:{value:a,hash:k},d[b]=c,e&&c.hash)(e[b]||(e[b]={}))[c.value]=c.hash}else delete d[b]})};L.prototype.mergeLinkData=L.prototype.mergeLinkData;L.prototype.clearLinkData=function(a){a?delete this._linkData[a]:this._linkData={}};L.prototype.clearLinkData=L.prototype.clearLinkData;
L.prototype.getLinkData=n("_linkData");L.prototype.getLinkData=L.prototype.getLinkData;L.prototype.setKeepHashes=function(a,b){this._keptHahsesPages[a]=!!b};L.prototype.setKeepHashes=L.prototype.setKeepHashes;L.prototype.extendParameters=function(a,b,c){if(c){var d=k;B(this.linkInfos,function(a,b){a[c]&&(d=b)});if(d){var e=a.CRC?new qa(a.CRC):k,g={},h=this._keptHashes[d];if(b)B(b,function(b,c){g[c]={value:b};e=We(a,c,g,h,e)}),e&&(a.CRC=e.toString())}}};L.prototype.extendParameters=L.prototype.extendParameters;
L.prototype.alterRequest=function(a){L._super.alterRequest.call(this,a);var b=Xe(a);if(b){var c=k,d=k,e="true"===a.getParams().ajaxRefresh?this.linkInfosSelective:this.linkInfos;B(e,function(a,e){a[b]&&(c=a[b],d=e)});if(c&&d){var g=a.getParams(),h=g.CRC?new qa(g.CRC):k,m=this._linkData[d],r=this._keptHashes[d];if(m)this._log.isDebugEnabled()&&this._log.debug("Propagating link "+b),_.each(c,function(a){h=We(g,a,m,r,h)}),h&&(g.CRC=h.toString())}}};L.prototype.alterRequest=L.prototype.alterRequest;
function We(a,b,c,d,e){function g(a){if(e||a)if(a)if(a=new qa(a),e){var b=e;if(a){var c=a._bitSize;if(!(c<=b._bitSize)){for(var d=Math.ceil(c/28);b._chunks.length<d;)b._chunks.push(0);b._bitSize=c}for(c=0;c<b._chunks.length;c++)b._chunks[c]^=a._chunks[c]||0}}else e=a;else h.warn("Found missing hashes: request may fail validation")}var h=L.prototype._log,m=(c=c[b])&&c.value;if(m===i||m===k)return e;var r=a[b];r!==m&&(h.isDebugEnabled()&&h.debug("Propagating parameter "+b+" (old value: "+r+"): "+ka(c)),
r!==k&&r!==i&&g(d&&d[b]&&d[b][r]),g(c.hash));a[b]=m;return e}var Ye=new XRegExp("^!(?<fparams>.+)"),Ze=new XRegExp("^button:(?<id>.+?)(_.+)?$");function Xe(a){var b=parseUri(a.getURL()),b=XRegExp.exec(b.anchor,Ye),c=(b?jQuery.deparam(b.fparams):{}).link||a.getParams().link;c||B(a.getParams(),function(a,b){var g=XRegExp.exec(b,Ze);g&&(c=g.id)});c||jQuery.each(a._inputs,function(a,b){var g=jQuery(b);if(g.is(":input")&&(g=g.attr("name"),g=XRegExp.exec(g,Ze)))return c=g.id,l});return c||k};function M(){this._app=k}s(M,mb);p("wr.logic.AjaxRequestActor",M);M.prototype._log=z.getLog("wr.logic.AjaxRequestActor");M.prototype._responseLog=z.getLog("wr.logic.AjaxRequestActor._response");M.prototype.setApp=ca("_app");M.prototype.setApp=M.prototype.setApp;M.prototype.setup=function(a){M._super.setup.call(this,a);this._defaults=a};M.prototype.setup=M.prototype.setup;
M.prototype.execute=function(a,b,c){var d=this,e=c.getDisplay(),g;jQuery.extend(a,this._defaults);g=$e(this,a,e);g=g.chain(function(){try{af(e);try{return bf(d,a)}finally{cf(e)}}catch(b){return d._log.error("Error in core request execution",b),new Sa(b)}});g=g.chain(function(a){var b=(a="object"===typeof a?a:k)&&a.getElementsByTagName("parsererror")[0];if(!a||b)f(Error("Received a non-XML response from server (see log for full text)"+(b?"\r\n"+b.textContent:"")));return df(d,a,c)});b=function(b){ef(d,
a,e);return b};return g=g.chain(b,b)};M.prototype.execute=M.prototype.execute;function $e(a,b,c){var d=b.waitWin,e=b.indicator,a=d&&d.id?ff(a,d,c):Wa;e&&Cd(e)&&(a=a.chain(function(){jQuery(e).show()}));return a}function ef(a,b,c){var d=b.waitWin;(b=b.indicator)&&Cd(b)&&jQuery(b).hide();if(d&&d.id)d=d.id,a._log.debug("Closing waiting window "+d),c.closeWindow(d);return Wa}
function ff(a,b,c){var d=b.id,e={},g;a._log.debug("Opening waiting window "+d);b=jQuery.extend({},{width:200,height:100},b)||{};a=c.getWindow(d);e={};e.width=b.width;e.height=b.height;e.className="wr-waitDialog "+(b.className||"");a.setAttributes(e);gf(a,b.message);a.open();g=new v;GLOBAL.setTimeout(function(){g.success()},b.duration);return g._promise}function af(a){a.getOpenWindows()[0].getControls()[0].setAttribute("cursorType","wait")}
function cf(a){a.getOpenWindows()[0].getControls()[0].setAttribute("cursorType",k)}function bf(a,b){var c=hf(a,b.url,b.formPost,b.allowIgnoreFields||l);c.setResponseTypes("xml");var d=new v;c.addSuccessListener(function(b,c,h){try{d.success(h)}catch(m){jf(a,"Error at request success ("+b+")",c,m)}});c.addFailureListener(function(b,c){d.failure(jf(a,"Server request "+b,c,k))});a._app.getPlugin("nav").navigate(c);return d._promise}
function df(a,b,c){var d=c.getDisplay();_.each(b.getElementsByTagName("CloseWindow"),function(b){var b=b.getAttribute("name"),c;a._log.debug("Closing window "+b);(c=d.getWindow(b))?(gf(c,""),c.close()):a._log.warn("Window "+b+" not found for closing")});_.each(b.getElementsByTagName("OpenWindow"),function(b){var c=b.getElementsByTagName("UIConfig")[0],c=jQuery.parseJSON(c.textContent||c.text),e=b.getElementsByTagName("Params")[0],r=[];e&&_.each(e.attributes,function(a){r[a.name]=a.value});kf(a,b.getAttribute("name"),
c,r,d)});var b=jQuery(b).find("Content").eq(0),e=b.attr("location");return e?lf(a,e):mf(a,b,c)}function lf(a,b){var c=new D(b,i,i,k);c.addFailureListener(function(b,c){jf(a,"External content request "+b,c,k)});return a._app.getPlugin("nav").navigate(c)}
function mf(a,b,c){var d=c.getDisplay(),e=c._state,c=b.attr("window");(d=d.getWindow(c))||f(Error("Unable to find window "+c+" to update"));c=b.children("PageRefresh").eq(0);c[0]?(c.find("HiddenFields").each(function(){var a=jQuery(this);e.set(a.attr("page")+"HiddenFields",a.text())}),c.find("LinkData").each(function(){var b=_.str.trim(jQuery(this).text()),b=b?jQuery.parseJSON(b):{},c=a._app.getPlugin("nav").getRouterOfType(L);B(b,function(a,b){c.mergeLinkData(b,a)});a._log.isDebugEnabled()&&a._log.debug("Received new link data: "+
ka(b))}),c.find("ControlData").each(function(){var a=jQuery(this);e.set(a.attr("control"),a.text())})):(gf(d,b.text()),d.triggerEvent("contentchange"),d.setAttribute("autoResize",d.getAttribute("autoResize")));d.focus();return Wa}function jf(a,b,c,d){var e=d&&(d.message||d),b=b+(e?" - "+e:""),d=d instanceof Error?d:k;a._log.error(b,d);a._responseLog.isDebugEnabled()&&a._responseLog.debug("Server response was"+(c?":\r\n"+c:" still to be received"));return d||Error(b)}
function hf(a,b,c,d){var e={},g=[];e.ajax=j;if(c){Array.prototype.push.apply(g,jQuery(Pb(c.form)).filter(function(){var a=jQuery(this).attr("ignore");return!a&&a!=d}).get());e[c.button]="link";c.selectiveRefresh&&(e.ajaxRefresh="true");var h=/^button:(.+?)(_.+)?$/.exec(c.button)[1]+(c.selectiveRefresh?"_sr":""),h=jQuery(c.form).find(":input:hidden[name='"+jc(h)+"']")[0];0>_.indexOf(g,h)&&a._log.warn("Action URL input associated with button '"+c.button+"' was not sent along the request: this may disrupt application state")}return new D(b,
e,g)}
function kf(a,b,c,d,e){var g={};a._log.debug("Opening window "+b);a._app.getPlugin("ui").configureViews(k,c);c=e.getWindow(b);g={};g.modal="true"===d.modal;g.closable="true"===d.closable;g.draggable="true"===d.draggable;g.width=Number(d.width||"200");g.height=Number(d.height||"300");g.resizable="true"===d.resizable;g.autoResize="true"===d.autoResizing;g.maximizable="true"===d.maximizable;g.minimizable="true"===d.minimizable;g.showEffect=d.showEffect||k;g.hideEffect=d.hideEffect||k;g.className=d.className;
c.setAttributes(g);c.setData({title:d.title});c.isOpen()?a._log.warn("Window "+b+" is already open"):c.open()}function gf(a,b){var c=a.getControls()[0];c?c.setData({html:b}):a.setData({content:b})}M.prototype.precomputeRequest=function(a){jQuery.extend(a,this._defaults);var b=hf(this,a.url,a.formPost,a.allowIgnoreFields||l),a=_.str.strLeft(b.getURL(),"#"),b=jQuery.param(b.getParams());return{url:a,params:b}};M.prototype.precomputeRequest=M.prototype.precomputeRequest;
M.prototype.startFullWaitUX=function(a,b){return $e(this,a,b)};M.prototype.startFullWaitUX=M.prototype.startFullWaitUX;M.prototype.stopFullWaitUX=function(a,b){return ef(this,a,b)};M.prototype.stopFullWaitUX=M.prototype.stopFullWaitUX;M.prototype.startSendWaitUX=function(a,b){af(b)};M.prototype.startSendWaitUX=M.prototype.startSendWaitUX;M.prototype.stopSendWaitUX=function(a,b){cf(b)};M.prototype.stopSendWaitUX=M.prototype.stopSendWaitUX;M.prototype.processResponse=function(a,b){df(this,a,b)};
M.prototype.processResponse=M.prototype.processResponse;function N(a,b){this._id=a;this._viewer=b;this._viewerListener=this._listeners=this._parent=k;this.addViewerListener()}p("wr.ui.Control",N);N.prototype._log=z.getLog("wr.ui.Control");N.prototype.destroy=function(){if(this._viewer){this.removeEventListener(k,k);this.removeViewerListener();this.setParent(k);try{this._viewer.destroy()}catch(a){this._log.error("Error destroying viewer",a)}this._viewer=k}};N.prototype.destroy=N.prototype.destroy;N.prototype.getId=n("_id");N.prototype.getId=N.prototype.getId;
N.prototype.getViewer=n("_viewer");N.prototype.getViewer=N.prototype.getViewer;N.prototype.getParent=n("_parent");N.prototype.getParent=N.prototype.getParent;N.prototype.setParent=function(a){if(this._parent!==a&&!this._guard_setParent){this._guard_setParent=j;try{if(this._parent)this._parent.removeControl(this),this._parent=k;if(a)a.addControl(this),this._parent=a}finally{delete this._guard_setParent}}};N.prototype.setParent=N.prototype.setParent;
N.prototype.addEventListener=function(a,b){var c=this;if("function"===typeof b)if(a){var d=this._getCallbacks(a,j);d.add(b);d._count++}else jQuery.each(Qd(ub),function(a,d){c.addEventListener(d,b)})};N.prototype.addEventListener=N.prototype.addEventListener;N.prototype.removeEventListener=function(a,b){var c=this;if(a){var d=this._getCallbacks(a);d&&(b&&(d.remove(b),d._count--),(!b||0>=d._count)&&this._removeCallbacks(a))}else jQuery.each(Qd(ub),function(a,d){c.removeEventListener(d,b)})};
N.prototype.removeEventListener=N.prototype.removeEventListener;N.prototype.triggerEvent=function(a){nf(this,a,k)};N.prototype.triggerEvent=N.prototype.triggerEvent;function nf(a,b,c){b&&(c=c||a._viewer.getView(),of(a,new tb(b,a,c)))}function of(a,b){if(b){a._log.isDebugEnabled()&&a._log.debug("Dispatching "+b+" to "+a);var c=a._getCallbacks(b._type);if(c)try{c.fireWith(a,[b])}catch(d){a._log.error("Error handling "+b+" on "+a,d)}a._parent&&of(a._parent,b)}}
N.prototype._getCallbacks=function(a,b){var c=this._eventListeners;if(!c&&b)this._eventListeners=c={};var d=c&&c[a];if(!d&&b)c[a]=d=jQuery.Callbacks("unique"),d._count=0,this.addViewerListener();return d};N.prototype._removeCallbacks=function(a){var b=this._eventListeners,c=b&&b[a];c&&(c.empty(),delete b[a],this.removeViewerListener())};
N.prototype.addViewerListener=function(){var a=this,b=this._eventListeners;if(!b)this._eventListeners=b={};var c=b._count||0;if(0===c){var d=function(b,c){nf(a,b,c)};this._viewer.addEventListener(d);this._viewerListener=d}b._count=c+1};N.prototype.addViewerListener=N.prototype.addViewerListener;
N.prototype.removeViewerListener=function(){var a=this._eventListeners,b=a._count;if(0<b)a._count=b-1;else{if(this._viewerListener)this._viewer.removeEventListener(this._viewerListener),this._viewerListener=k;delete a._count}};N.prototype.removeViewerListener=N.prototype.removeViewerListener;N.prototype.isVisible=function(){return this.getAttribute("visible")!==l};N.prototype.isVisible=N.prototype.isVisible;N.prototype.setVisible=function(a){this.setAttribute("visible",a)};
N.prototype.setVisible=N.prototype.setVisible;N.prototype.isEnabled=function(){return this.getAttribute("enabled")!==l};N.prototype.isEnabled=N.prototype.isEnabled;N.prototype.setEnabled=function(a){this.setAttribute("enabled",a)};N.prototype.setEnabled=N.prototype.setEnabled;N.prototype.isFocused=function(){return this.getAttribute("focused")===j};N.prototype.isFocused=N.prototype.isFocused;N.prototype.focus=function(){this.setAttribute("focused",j)};N.prototype.focus=N.prototype.focus;
N.prototype.setAttribute=function(a,b){var c={};c[a]=b;this.writeAttributes(c)};N.prototype.setAttribute=N.prototype.setAttribute;N.prototype.setAttributes=function(a){this.writeAttributes(a)};N.prototype.setAttributes=N.prototype.setAttributes;N.prototype.writeAttributes=function(a){this._viewer.writeAttributes(a)};N.prototype.writeAttributes=N.prototype.writeAttributes;N.prototype.getAttribute=function(a){var b=this.readAttributes();return b?b[a]:i};N.prototype.getAttribute=N.prototype.getAttribute;
N.prototype.getAttributes=function(){return this.readAttributes()};N.prototype.getAttributes=N.prototype.getAttributes;N.prototype.readAttributes=function(){return this._viewer.readAttributes()};N.prototype.readAttributes=N.prototype.readAttributes;N.prototype.setData=function(a){a!==i&&this._viewer.writeData(a)};N.prototype.setData=N.prototype.setData;N.prototype.getData=function(){var a=this._viewer.readData();a===i&&f(new ga);return a};N.prototype.getData=N.prototype.getData;
N.prototype.setDataTree=function(a){this.setData(a?a.getRootData():k)};N.prototype.setDataTree=N.prototype.setDataTree;N.prototype.getDataTree=function(){var a=this._viewer.readData();return new F(a)};N.prototype.getDataTree=N.prototype.getDataTree;function O(a,b){N.call(this,a,b);this._controls=[];this._controlsById={}}s(O,N);p("wr.ui.Container",O);O.prototype.destroy=function(){_.each(this.getControls(),function(a){a.destroy()});O._super.destroy.call(this)};O.prototype.destroy=O.prototype.destroy;O.prototype.getControls=function(){return this._controls||[]};O.prototype.getControls=O.prototype.getControls;
O.prototype.addControl=function(a){if(a&&!this._guard_addControl){this._guard_addControl=j;try{var b=a.getParent();b!==this&&(b&&f(new t("Control has been already added to a container")),a.setParent(this),this._controls.push(a),this._controlsById[a._id]=a)}finally{delete this._guard_addControl}}};O.prototype.addControl=O.prototype.addControl;
O.prototype.removeControl=function(a){if(a&&!this._guard_removeControl){this._guard_removeControl=j;try{var b=a.getParent();if(b)b!==this&&f(new t("Control is not part of this container")),a.setParent(k),this._controls=jQuery.grep(this._controls,function(b){return b!==a})||[],delete this._controlsById[a._id]}finally{delete this._guard_removeControl}}};O.prototype.removeControl=O.prototype.removeControl;
O.prototype.getControl=function(a){return this._controlsById.hasOwnProperty(a)?this._controlsById[a]||k:k};O.prototype.getControl=O.prototype.getControl;O.prototype.lookupControl=function(a){var b=k;if(b=this.getControl(a))return b;jQuery.each(this._controls,function(c,d){if(d instanceof O&&(b=d.lookupControl(a)))return l});return b};O.prototype.lookupControl=O.prototype.lookupControl;
O.prototype.setAttributes=function(a){O._super.setAttributes.call(this,a);jQuery.each(this.getControls(),function(b,c){c.setAttributes(a)})};O.prototype.setAttributes=O.prototype.setAttributes;O.prototype.setDataTree=function(a){O._super.setDataTree.call(this,a);jQuery.each(this.getControls(),function(b,c){var d=a.getTree(c._id);c.setDataTree(d)})};O.prototype.setDataTree=O.prototype.setDataTree;
O.prototype.getDataTree=function(){var a=O._super.getDataTree.call(this);jQuery.each(this.getControls(),function(b,c){var d=c._id,e=c.getDataTree(d);e&&a.setTree(d,e)});return a};O.prototype.getDataTree=O.prototype.getDataTree;function pf(a,b){this._rootContainer=a;this._factoryProvider=b;this._contexts={}}p("wr.ui.ControlTreeBuilder",pf);pf.prototype._log=z.getLog("wr.ui.ControlTreeBuilder");pf.prototype.getRootContainer=n("_rootContainer");pf.prototype.getRootContainer=pf.prototype.getRootContainer;
pf.prototype.addContext=function(a,b,c){var d=this,e=a._id,g=b===k?"":b.join("_"),h=b===k?0:b.length,m=this._contexts[e];m||(this._contexts[e]=m={rank:h,ctxs:{},ctrls:{}});m.rank!==h&&f(new t("View '"+e+"' already has a context added with a different number of indexes"));var h=m.ctxs,r=m.ctrls;h.hasOwnProperty(g)&&f(new t("View '"+e+"' already has a context added with indexes "+ka(b)));h[g]=c;if(a=qf(this,a,b,c))if(r[g]=a,Pa(a))a.onSuccess(function(a){r[g]=a}).onFailure(function(a){d._log.error("Error creating '"+
e+"' control",a)})};pf.prototype.addContext=pf.prototype.addContext;pf.prototype.removeContext=function(a,b){var c=this,d=a._id,e=this._contexts[d];if(e){var g=e.ctxs,e=e.ctrls;if(b!==i){var h=b===k?"":b.join("_");if(g.hasOwnProperty(h)){var m=e[h];if(m)if(Pa(m))m.onSuccess(function(d){rf(c,a,b,d)});else rf(this,a,b,m);delete g[h]}}else{for(h in g)if(g.hasOwnProperty(h)&&md(g,h)){if(m=e[h])if(Pa(m))m.onSuccess(function(b){rf(c,a,sf(h),b)});else rf(this,a,sf(h),m);delete g[h]}delete this._contexts[d]}}};
pf.prototype.removeContext=pf.prototype.removeContext;function sf(a){return a?jQuery.map(a.split("_"),function(a){return Number(a)}):k}function qf(a,b,c,d){var e=a._factoryProvider(b);if(!e)return k;b=e.create(b,c,d,a._factoryProvider);Pa(b)?b=b.chain(function(b){a._rootContainer.addControl(b);return b}):a._rootContainer.addControl(b);return b}function rf(a,b,c,d){var e=a._factoryProvider(b);a._rootContainer.removeControl(d);e?e.destroy(b,c,d):d.destroy()};function P(a,b){O.call(this,a,b)}s(P,O);p("wr.ui.Display",P);P.prototype.setParent=function(a){a!==k&&f(new ga("Cannot set display parent"))};P.prototype.setParent=P.prototype.setParent;P.prototype.readAttributes=function(){var a=P._super.readAttributes.call(this);a.visible=j;a.enabled=j;a.focused=j;return a};P.prototype.readAttributes=P.prototype.readAttributes;
P.prototype.writeAttributes=function(a){a.visible!==i&&f(new ga("Cannot set display 'visible' attribute"));a.enabled!==i&&f(new ga("Cannot set display 'enabled' attribute"));a.focused!==i&&f(new ga("Cannot set display 'focused' attribute"));P._super.writeAttributes.call(this,a)};P.prototype.writeAttributes=P.prototype.writeAttributes;P.prototype.getWindows=function(){return this.getControls()};P.prototype.getWindows=P.prototype.getWindows;P.prototype.getWindow=function(a){return this.getControl(a)};
P.prototype.getWindow=P.prototype.getWindow;P.prototype.getOpenWindows=function(){var a=[];jQuery.each(this.getWindows(),function(b,c){c.isOpen()&&a.push(c)});return a||[]};P.prototype.getOpenWindows=P.prototype.getOpenWindows;P.prototype.openWindow=function(a){(a=a&&this.getWindow(a))&&a.open()};P.prototype.openWindow=P.prototype.openWindow;P.prototype.closeWindow=function(a){(a=a&&this.getWindow(a))&&a.close()};P.prototype.closeWindow=P.prototype.closeWindow;function tf(a,b){this._display=a;this._state=b}p("wr.logic.Context",tf);tf.prototype.getDisplay=n("_display");tf.prototype.getDisplay=tf.prototype.getDisplay;tf.prototype.getState=n("_state");tf.prototype.getState=tf.prototype.getState;function Q(a,b){this._id=a;this._actor=b;this._failureLink=this._successLinks=this._transportLinks=k}p("wr.logic.Action",Q);Q.prototype._log=z.getLog("wr.logic.Action");Q.prototype.destroy=function(){this._failureLink=this._successLinks=this._transportLinks=k;try{this._actor.destroy()}catch(a){this._log.error("Error destroying actor",a)}this._actor=k};Q.prototype.destroy=Q.prototype.destroy;Q.prototype.getId=n("_id");Q.prototype.getId=Q.prototype.getId;Q.prototype.getActor=n("_actor");
Q.prototype.getActor=Q.prototype.getActor;Q.prototype.addTransport=function(a,b){if(a)this._transportLinks?jQuery.each(this._transportLinks,function(b,d){d.action===a&&f(new t("Propagation for "+a+" already added"))}):this._transportLinks=[],this._transportLinks.push({action:a,couplings:b||k})};Q.prototype.addTransport=Q.prototype.addTransport;
Q.prototype.removeTransport=function(a){var b=this;a&&this._transportLinks&&jQuery.each(this._transportLinks,function(c,d){if(d.action===a)return b._transportLinks.splice(c,1),l})};Q.prototype.removeTransport=Q.prototype.removeTransport;Q.prototype.addSuccessHop=function(a,b,c){if(b)a=a||k,this._successLinks?this._successLinks.hasOwnProperty(a)&&f(new t("Success hop for '"+a+"' already added")):this._successLinks={},this._successLinks[a]={action:b,couplings:c||k}};Q.prototype.addSuccessHop=Q.prototype.addSuccessHop;
Q.prototype.removeSuccessHop=function(a){this._successLinks&&delete this._successLinks[a||k]};Q.prototype.removeSuccessHop=Q.prototype.removeSuccessHop;Q.prototype.addFailureHop=function(a,b){if(a)this._failureLink&&f(new t("Failure hop already added")),this._failureLink={action:a,couplings:b||k}};Q.prototype.addFailureHop=Q.prototype.addFailureHop;Q.prototype.removeFailureHop=function(){this._failureLink=k};Q.prototype.removeFailureHop=Q.prototype.removeFailureHop;
Q.prototype.execute=function(a,b){return uf(this,a,{},b)};Q.prototype.execute=Q.prototype.execute;function uf(a,b,c,d){var e={},b=Qa(a._actor.execute,a._actor,b||{},e,d);return b=b.chain(function(b){var h=a._successLinks&&a._successLinks[b||k];return h?vf(a,h,e,c,d):b},function(b){var h=a._failureLink;return h?vf(a,h,e,c,d):b})}function vf(a,b,c,d,e){a._transportLinks&&jQuery.each(a._transportLinks,function(a,b){wf(b,c,d)});wf(b,c,d);return uf(b.action,d[b.action._id]||{},d,e)}
function wf(a,b,c){var d=a.action._id,a=a.couplings,e;(e=c[d])||(e=c[d]={});jQuery.each(a,function(a,c){var d=i,r=c._sourceName,R=c._sourceValue;r&&(d=b[r]);d===i&&(d=R);d!==i&&(e[c._targetName]=d)})};function xf(){this._actions=this._app=k}s(xf,Ja);p("wr.logic.LogicPlugin",xf);xf.prototype._log=z.getLog("wr.logic.LogicPlugin");xf.prototype.configure=function(a){yf(this);if(a.actions)return zf(this,a.actions)};xf.prototype.configure=xf.prototype.configure;xf.prototype.dispose=function(){yf(this)};xf.prototype.dispose=xf.prototype.dispose;
function zf(a,b){var c=a.getApp().getConfigPlugin(),d={},e=[],g={};B(b,function(b,e){var g=Af(a,e,b,c);d[e]=g});B(b,function(a,b){var c=d[b],c=c.chain(function(b){return Bf(b,a,d)}),c=c.chain(function(a){g[b]=a});e.push(c)});return Na.apply(u,e).chain(function(){a._actions=g},i)}function yf(a){if(a._actions)B(a._actions,function(a){a.destroy()}),a._actions=k}
function Af(a,b,c,d){var e,d=d.readInstanceFactory(c.actor);e=c.actorConfig||{};return d.newInstance().chain(function(c){ja(c,La)===k&&c.setApp(a.getApp());c.setup(e);return new Q(b,c)})}
function Bf(a,b,c){var d=[];B(b,function(b,g){var h,m,r;if(h=/^(transport|success|failure)(?:_(.+))?$/.exec(g))m=h[1],r=h[2],B(b,function(b,e){var g=[],h;(h=c[e])||f(Error("Invalid target action '"+e+"'"));B(b,function(a,b){var c=k,d=i;"string"===typeof a?c=a:"object"===typeof a&&(d=a.value||i);g.push(new ob(b,c,d))});h=h.chain(function(b){"success"===m?a.addSuccessHop(r,b,g):"failure"===m?a.addFailureHop(b,g):"transport"===m&&a.addTransport(b,g)});d.push(h)})});return Na.apply(u,d).chain(function(){return a},
i)}xf.prototype.getAction=function(a){this._actions||f(new t("Actions are not available"));return this._actions[a]||k};xf.prototype.getAction=xf.prototype.getAction;xf.prototype.executeAction=function(a,b,c){var d=this.getAction(a);d||f(Error("Action '"+a+"' not found"));return d.execute(b,c)};xf.prototype.executeAction=xf.prototype.executeAction;function Cf(){this._app=k}p("wr.ui.ViewerBasedControlFactory",Cf);Cf.prototype.setApp=ca("_app");Cf.prototype.setApp=Cf.prototype.setApp;
Cf.prototype.create=function(a,b,c,d){var e=this;this._app||f(new t("Application not set"));var g=this._app.getConfigPlugin().readInstanceFactory(a._config.viewer,[a,b]),h=a._config.viewerConfig||{};g||f(Error("View does not have a configured viewer"));return g.newInstance().chain(function(g){var r;a.getViews();ja(g,La)===k&&g.setApp(e._app);g.isContextProvider()?(r=e.newContainer(a,b,g),d&&g.setContextRegistry(e.newContextRegistry(r,0,d))):r=e.newControl(a,b,g);g.setup(h,c,k);return r})};
Cf.prototype.create=Cf.prototype.create;Cf.prototype.destroy=function(a,b,c){c.destroy()};Cf.prototype.destroy=Cf.prototype.destroy;Cf.prototype.newContextRegistry=function(a,b,c){return new pf(a,c)};Cf.prototype.newContextRegistry=Cf.prototype.newContextRegistry;Cf.prototype.newControl=function(a,b,c){return new N(this.makeControlId(a,b),c)};Cf.prototype.newControl=Cf.prototype.newControl;Cf.prototype.newContainer=function(a,b,c){return new O(this.makeControlId(a,b),c)};
Cf.prototype.newContainer=Cf.prototype.newContainer;Cf.prototype.makeControlId=function(a,b){var c=[a._id];b&&jQuery.each(b,function(a,b){jQuery.merge(c,["[",b,"]"])});return c.join("")};Cf.prototype.makeControlId=Cf.prototype.makeControlId;function Df(){this._app=k}s(Df,Cf);p("wr.ui.DisplayControlFactory",Df);Df.prototype.newControl=function(a,b,c){return new P(this.makeControlId(a,b),c)};Df.prototype.newControl=Df.prototype.newControl;Df.prototype.newContainer=function(a,b,c){return new P(this.makeControlId(a,b),c)};Df.prototype.newContainer=Df.prototype.newContainer;function S(a,b){O.call(this,a,b);this._lastFocusedControlId=k;this.addEventListener("focus",jQuery.proxy(this._handleFocus,this))}s(S,O);p("wr.ui.Window",S);S.prototype.open=function(){this.setAttribute("open",j)};S.prototype.open=S.prototype.open;S.prototype.close=function(){this.setAttribute("open",l)};S.prototype.close=S.prototype.close;S.prototype.isOpen=function(){return this.getAttribute("open")===j};S.prototype.isOpen=S.prototype.isOpen;S.prototype.setTitle=function(a){this.setData({title:a})};
S.prototype.setTitle=S.prototype.setTitle;S.prototype.getTitle=function(){return this.getData().title||k};S.prototype.getTitle=S.prototype.getTitle;S.prototype.readAttributes=function(){var a=S._super.readAttributes.call(this);a.visible=a.open;a.enabled=j;return a};S.prototype.readAttributes=S.prototype.readAttributes;
S.prototype.writeAttributes=function(a){a.visible!==i&&f(new ga("Cannot set window 'visible' attribute directly"));a.enabled!==i&&f(new ga("Cannot set window 'enabled' attribute"));S._super.writeAttributes.call(this,a);a.focused===j&&Ef(this)};S.prototype.writeAttributes=S.prototype.writeAttributes;S.prototype._handleFocus=function(a){a=a._sourceControl;a===this?Ef(this):this._lastFocusedControlId=a._id};
function Ef(a){var b;(b=a._lastFocusedControlId?a.lookupControl(a._lastFocusedControlId):a.getControls()[0]||k)?b.focus():a._lastFocusedControlId=k};function Ff(){this._app=k}s(Ff,Cf);p("wr.ui.WindowControlFactory",Ff);Ff.prototype.newControl=function(a,b,c){return new S(this.makeControlId(a,b),c)};Ff.prototype.newControl=Ff.prototype.newControl;Ff.prototype.newContainer=function(a,b,c){return new S(this.makeControlId(a,b),c)};Ff.prototype.newContainer=Ff.prototype.newContainer;function T(a,b,c){K.call(this,a,b,c)}s(T,K);p("wr.ui.html.ElementViewer",T);T.prototype._log2=z.getLog("wr.ui.html.ElementViewer");T.prototype._codeLog=z.getLog("wr.ui.html.ElementViewer._code");T.prototype.setup=function(a,b){T._super.setup.call(this,a,b);jQuery(this.getContext()).on(Gf,jQuery.proxy(this.handleEvent,this))};T.prototype.setup=T.prototype.setup;T.prototype.destroy=function(){jQuery(this.getContext()).off(Gf,this.handleEvent);T._super.destroy.call(this)};T.prototype.destroy=T.prototype.destroy;
var Hf={focusin:"focus",focusout:"blur",click:"click",keypress:"keypress",keydown:"keydown",keyup:"keyup"},Gf=function(){var a=[];B(Hf,function(b,c){a.push(c+".wr")});return a.join(" ")}();T.prototype.handleEvent=function(a){var b=Hf[a.type];b&&this.raiseEventForHtmlEvent(b,k,a)};T.prototype.handleEvent=T.prototype.handleEvent;var If={pointer:"pointer",wait:"wait"},Jf={pointer:"pointer",wait:"wait"};
T.prototype.writeAttributes=function(a){var b=jQuery(this.getContext()),c=a&&a.visible;c!==i&&(c?b.show():b.hide());c=a&&a.cursorType;if(c!==i)b[0].style.cursor=Jf[c]||"";T._super.writeAttributes.call(this,a)};T.prototype.writeAttributes=T.prototype.writeAttributes;T.prototype.readAttributes=function(){var a=T._super.readAttributes.call(this),b=jQuery(this.getContext());a.visible=b.is(":visible");a.cursorType=If[b[0].style.cursor]||i;return a};T.prototype.readAttributes=T.prototype.readAttributes;
T.prototype.writeData=function(a){var b=a.html;if(b!==i){var c=jQuery(this.getContext()),d=jQuery(this.getLastFocusedElement()),e=this.isFocused()?d.attr("id"):i,a=d[0]&&Qc(d[0]),d=d.is(":text")?d.val():k;this.updateContent(b);e&&(b=c.find("#"+jc(e)),0<b.length?(Pc(b[0]),a&&(e=b.is(":text")?b.val():k,d&&e&&d!==e&&(a=Tc(a,d,e)),Sc(b[0],a))):this._log2.debug("["+this.getView()._id+"] "+("Focus not restored to disappeared element '"+e+"'")))}};T.prototype.writeData=T.prototype.writeData;
T.prototype.sanitizeHTML=function(a){var b,c;return(b=/<body(?:\s[^>]+)?>/i.exec(a))&&(c=/<\/body>/i.exec(a))?a.substring(b.index+b[0].length,c.index):a};T.prototype.sanitizeHTML=T.prototype.sanitizeHTML;T.prototype.extractResourceElements=function(a){var b,c,d=k;if((b=/<head[^>]*>/i.exec(a))&&(c=/<\/head>/i.exec(a)))d=_.str.trim(a.substring(b.index+b[0].length,c.index));return d?jQuery(jQuery.parseHTML(d,j)).filter("script, link, style").get():[]};T.prototype.extractResourceElements=T.prototype.extractResourceElements;
function Kf(a,b){"string"===typeof b&&(/<\/?html[\s>]/.test(b)||/<\/?head[\s>]/.test(b)||/<\/?body[\s>]/.test(b))&&a._log2.warn("HTML fragment appears to contain elements forbidden in document body: this may cripple UI behavior");var c=jQuery("<div/>")[0];if("string"===typeof b)a._setInnerHTML(c,b);else for(var d;d=b[0];)c.insertBefore(d,k);return c}
T.prototype._setInnerHTML=function(a,b){var c=l,d=jQuery("<div/>")[0];d.innerHTML='<script>"test";<\/script>';if(0>d.innerHTML.toLowerCase().indexOf("<script"))d.innerHTML='<form></form><script>"test";<\/script>',c=0<d.innerHTML.toLowerCase().indexOf("<script");Kb(d);c=c?function(a,b){a.innerHTML="<form id='_hack_form'></form>"+b;var c=a.firstChild;"_hack_form"===c.id&&Kb(c)}:function(a,b){a.innerHTML=b};T.prototype._setInnerHTML=c;return c(a,b)};
T.prototype.updateContent=function(a){var b=this.createOldContentFragment(),c=this.createNewContentFragment(this.sanitizeHTML(a)),a=jQuery(this.extractResourceElements(a)).filter(function(){var a=Vc(this,j);return a?Zc(a):j}),d=c.firstChild;a.each(function(){c.insertBefore(this,d)});Qb();try{this.replaceContent(b,c)}catch(e){e instanceof pa?(this._log2.error("["+this.getView()._id+"] Error caused by inline scripts in updated content (see log for full code)",e.cause||e),this._codeLog.isDebugEnabled()&&
this._codeLog.debug("["+this.getView()._id+"] "+("Executed code was:\r\n"+e.sourceCode))):this._log2.error("["+this.getView()._id+"] Error during content update",e)}finally{Rb()}a.each(function(){var a=Vc(this,j);a&&$c(a.name)});this.destroyFragments(b,c)};T.prototype.updateContent=T.prototype.updateContent;T.prototype.createOldContentFragment=function(){return Kf(this,this.getContext().childNodes)};T.prototype.createOldContentFragment=T.prototype.createOldContentFragment;
T.prototype.createNewContentFragment=function(a){return Kf(this,a)};T.prototype.createNewContentFragment=T.prototype.createNewContentFragment;T.prototype.destroyFragments=function(a,b){Lb||(Lb=new Ib);Lb.post(a);Lb||(Lb=new Ib);Lb.post(b)};T.prototype.destroyFragments=T.prototype.destroyFragments;
T.prototype.replaceContent=function(a,b){var c=jQuery(this.getContext());c.empty();Tb();try{Mb(c[0],jQuery.makeArray(b.childNodes))}finally{var d=Ub();0<d.length&&(d=jQuery("<div>"+d.join("")+"</div>")[0],Mb(c[0],jQuery.makeArray(d.childNodes)))}};T.prototype.replaceContent=T.prototype.replaceContent;function Lf(a,b){K.call(this,a,b,j);this._containersFilter=k;this._availableViews={}}s(Lf,T);p("wr.ui.html.ContainerElementViewer",Lf);Lf.prototype.setup=function(a,b){if(Bd(b))b=b.body,b==k&&f(Error("DOM Document context must contain a HTML body"));a.containersFilter||f(Error("Containers filter not specified"));this._containersFilter=a.containersFilter;Lf._super.setup.call(this,a,b);this._refreshContexts(k,Mf(this),l)};Lf.prototype.setup=Lf.prototype.setup;
Lf.prototype.destroy=function(){this._refreshContexts(Mf(this),k,j);Lf._super.destroy.call(this)};Lf.prototype.destroy=Lf.prototype.destroy;
Lf.prototype.replaceContent=function(a,b){function c(a){var b=[];jQuery.each(a,function(a,c){b.push(c.value)});return jQuery(b)}var d=Mf(this,a),e=Mf(this,b),e=e.map(function(){var a=jQuery(this),b=a.attr("id");return b&&a.is(":empty")&&(b=d.filter("#"+jc(b)).eq(0),b[0]&&a[0]!==b[0])?(a[0].parentNode.replaceChild(b[0],a[0]),b.find("script").filter(function(){return/^$|\/(?:java|ecma)script/i.test(this.type)}).each(function(){Kb(this)}),b[0]):k});jQuery(this.getContext()).is("body")&&(Nf(jQuery(b)),
Of(jQuery(a),jQuery(b)));Lf._super.replaceContent.call(this,a,b);e=nd(d,e);this._refreshContexts(c(e.removed),c(e.added),l)};Lf.prototype.replaceContent=Lf.prototype.replaceContent;function Nf(a){a.children().each(function(){jQuery.data(this,"wr-initial",j)})}function Of(a,b){var c=a.children(),d=[],e=[],g;for(g=0;g<c.length&&!jQuery.data(c[g],"wr-initial");g++)d.push(c[g]);for(g=c.length-1;0<g&&!jQuery.data(c[g],"wr-initial");g--)e.unshift(c[g]);b.prepend(jQuery(d)).append(jQuery(e))}
jQuery(function(){var a=jQuery("body");a[0]&&Nf(a)});Lf.prototype.refreshSubViews=function(){this._refreshContexts(k,k,l)};Lf.prototype.refreshSubViews=Lf.prototype.refreshSubViews;
Lf.prototype._refreshContexts=function(a,b,c){var d=this,e=this.getContextRegistry(),g=this.collectSubViewsDiffs();jQuery.each(g.removed,function(a,b){var c=b._id;e&&e.removeContext(b);delete d._availableViews[c]});e&&a&&a.each(function(){var a=d._availableViews[jQuery(this).attr("id")];a&&e.removeContext(a)});jQuery.each(g.added,function(a,b){d._availableViews[b._id]=b});!c&&b&&b.each(function(){var a=d._availableViews[jQuery(this).attr("id")];a&&e.addContext(a,k,this)})};
function Mf(a,b){return(b=b||a.getContext())&&a._containersFilter?jQuery(Dd(b,a._containersFilter)):k};function Pf(a,b){K.call(this,a,b,j)}s(Pf,T);p("wr.ui.html.OverloadedElementViewer",Pf);Pf.prototype.setup=function(a,b){Pf._super.setup.call(this,a,b);this._refreshContexts(l)};Pf.prototype.setup=Pf.prototype.setup;Pf.prototype.destroy=function(){this._refreshContexts(j);Pf._super.destroy.call(this)};Pf.prototype.destroy=Pf.prototype.destroy;Pf.prototype.refreshSubViews=function(){this._refreshContexts(l)};Pf.prototype.refreshSubViews=Pf.prototype.refreshSubViews;
Pf.prototype._refreshContexts=function(a){var b=this.getContextRegistry();if(b){var c=this.getContext(),d=this.collectSubViewsDiffs();if(a)d.added=[],d.removed=this.getView().getViews();jQuery.each(d.removed,function(a,c){b.removeContext(c)});jQuery.each(d.added,function(a,d){b.addContext(d,k,c)})}};function db(a,b,c,d){this._ctorName=a;this._ctorArgs=b||[];this._scriptURL=c?c:k;this._loader=c?d:k;this._loadPromise=k}p("wr.util.InstanceFactory",db);db.prototype.getConstructorName=n("_ctorName");db.prototype.getConstructorName=db.prototype.getConstructorName;
db.prototype.newInstance=function(){function a(){try{var a=Kd(b._ctorName);"function"!==typeof a&&f(new ReferenceError("Unable to find constructor '"+b._ctorName+"'"));var e=ha(a.prototype);a.apply(e,b._ctorArgs);c.success(e)}catch(g){c.failure(g)}}var b=this,c=new v;if(this._scriptURL&&this._loadPromise===k)this._loadPromise=this._loader.load(this._scriptURL,"script"),this._loader=this._scriptURL=k;if(this._loadPromise!==k)this._loadPromise.onSuccess(function(){a()}).onFailure(function(a){c.failure(a)});
else a();return c._promise};db.prototype.newInstance=db.prototype.newInstance;function fb(a){this._factories=a||[]}p("wr.util.InstanceListFactory",fb);fb.prototype.getSize=function(){return this._factories.length};fb.prototype.getSize=fb.prototype.getSize;fb.prototype.newInstance=function(){var a=[];jQuery.each(this._factories,function(b,c){a.push(c.newInstance())});return Na.apply(Na,a)};fb.prototype.newInstance=fb.prototype.newInstance;function U(){this._displayFactory=this._display=this._rootView=this._factoriesPromise=this._app=k;this._autoFocusFirstWindow=l}s(U,Ja);p("wr.ui.UIPlugin",U);U.prototype._log=z.getLog("wr.ui.UIPlugin");U.prototype.configure=function(a){Qf(this);this._autoFocusFirstWindow=!!a.autoFocusFirstWindow;this._factoriesPromise=Rf(this,a.factories);if(a.display)return Sf(this,a.display).chain(function(a){(a=a.getWindows()[0])&&a.open()})};U.prototype.configure=U.prototype.configure;
U.prototype.start=function(){var a;if(this._autoFocusFirstWindow&&(a=this._display&&this._display.getWindows()[0]))this._log.debug("Automatically focusing the first window"),a.focus()};U.prototype.start=U.prototype.start;U.prototype.dispose=function(){Qf(this)};U.prototype.dispose=U.prototype.dispose;U.prototype.getViewTree=function(){this._rootView||f(new t("View tree is not available"));return this._rootView};U.prototype.getViewTree=U.prototype.getViewTree;
U.prototype.configureViews=function(a,b){var c=this,d={};this.unconfigureViews(a,b);Tf(this,a,function(a){B(b,function(b,h){var m=Uf(c,h,b,d);a.addView(m);c._log.debug("Added view "+m+" to "+a)})})};U.prototype.configureViews=U.prototype.configureViews;U.prototype.unconfigureViews=function(a,b){var c=this;Tf(this,a,function(a){_.each(_.filter(a.getViews(),function(a){return b.hasOwnProperty(a._id)}),function(b){a.removeView(b);c._log.debug("Removed view "+b+" from "+a)})})};
U.prototype.unconfigureViews=U.prototype.unconfigureViews;function Tf(a,b,c){var d;b?(d=a.lookupControl(b))||f(Error("Parent control '"+b+"' not found")):d=a.getDisplay();b=d._viewer.getView();c.call(a,b);d._viewer.refreshSubViews()}U.prototype.getDisplay=function(){this._display||f(new t("Display is not available"));return this._display};U.prototype.getDisplay=U.prototype.getDisplay;U.prototype.getWindows=function(){return this.getDisplay().getControls()};U.prototype.getWindows=U.prototype.getWindows;
U.prototype.getMainWindow=function(){return this.getDisplay().getWindows()[0]||k};U.prototype.getMainWindow=U.prototype.getMainWindow;U.prototype.getWindow=function(a){return this.getDisplay().getControl(a)};U.prototype.getWindow=U.prototype.getWindow;U.prototype.lookupControl=function(a){var b=this.getDisplay();return a===b._id?b:b.lookupControl(a)};U.prototype.lookupControl=U.prototype.lookupControl;
function Sf(a,b){var c=k,c=Uf(a,"display",b,{});return a._factoriesPromise.chain(function(b){function e(a){var c=b[a._config.factory||"default"];c||f(Error("Missing factory for view "+a));return c}var g,h;g=a.getDisplayContext();h=e(c);return Qa(h.create,h,c,k,g,e).chain(function(b){a._rootView=c;a._display=b;a._displayFactory=h;return b})})}
function Qf(a){if(a._display)a._displayFactory&&a._rootView?a._displayFactory.destroy(a._rootView,k,a._display):a._display.destroy(),a._displayFactory=k,a._display=k;a._rootView=k}U.prototype.getDisplayContext=function(){return GLOBAL};U.prototype.getDisplayContext=U.prototype.getDisplayContext;
function Rf(a,b){var c=a.getApp().getConfigPlugin(),d=[],e=[];B(b,function(a,b){d.push(b);e.push(c.readInstanceFactory(a))});return(new fb(e)).newInstance().chain(function(b){var c={};jQuery.each(b,function(b,e){ja(e,La)===k&&e.setApp(a.getApp());c[d[b]]=e});return c})}function Uf(a,b,c,d){var e,g=c.views;e=Vf(b,c);g&&B(g,function(b,c){var g=Uf(a,c,b,d);e.addView(g)});d[b]&&f(Error("Duplicate view id '"+b+"'"));d[b]=c;return e}
function Vf(a,b){var c=/^views$/,d={};B(b,function(a,b){c.test(b)||(d[b]=a)});return new rd(a,d)};function V(){this._globals={};this._active=l;this._savedGlobals=k}p("wr.util.obj.ExecutionScope",V);var Wf=0;V.getActiveCount=function(){return Wf};V.prototype.isActive=n("_active");V.prototype.isActive=V.prototype.isActive;V.prototype.activate=function(){this._active&&f(new t("Already active"));this._active=j;Wf++;var a=this._savedGlobals={};_.each(this._globals,function(b,c){a[c]=GLOBAL[c];b!==i?GLOBAL[c]=b:Jd(GLOBAL,c)})};V.prototype.activate=V.prototype.activate;
V.prototype.deactivate=function(){this._active||f(new t("Not active"));this._active=l;Wf--;var a=this._savedGlobals||{};_.each(this._globals,function(b,c,d){b=a[c];d[c]=GLOBAL[c];b!==i?GLOBAL[c]=b:Jd(GLOBAL,c)});this._savedGlobals=k};V.prototype.deactivate=V.prototype.deactivate;V.prototype.run=function(a){if(this._active)return Xf(a);try{return this.activate(),Xf(a)}finally{this.deactivate()}};V.prototype.run=V.prototype.run;
function Xf(a){var b=Yf(a),c=[];_.each(b,function(a){c.push(Object.prototype.hasOwnProperty.call(GLOBAL,a)?GLOBAL[a]:i)});return a.apply(GLOBAL,c)}V.prototype.getGlobal=function(a){return this._globals[""+a]};V.prototype.getGlobal=V.prototype.getGlobal;V.prototype.setGlobal=function(a,b){var a=""+a,c=this._globals.hasOwnProperty(a);this._globals[a]=b;this._active&&this._savedGlobals&&(c||(this._savedGlobals[a]=GLOBAL[a]),GLOBAL[a]=b)};V.prototype.setGlobal=V.prototype.setGlobal;
V.prototype.deleteGlobal=function(a){var a=""+a,b=this._globals.hasOwnProperty(a);delete this._globals[a];this._active&&this._savedGlobals&&(b||(this._savedGlobals[a]=GLOBAL[a]),Jd(GLOBAL,a))};V.prototype.deleteGlobal=V.prototype.deleteGlobal;function Yf(a){return(a=/^function[^(]*\(\s*([^)]*?)\s*\)/.exec(Function.prototype.toString.call(a))[1])?a.split(/\s*,\s*/):[]};function Zf(a,b){V.call(this);this._includeSelector=a;this._excludeSelector=b;this._combinedSelector=a+", "+b;this._elements=k}s(Zf,V);Zf.prototype.activate=function(){Zf._super.activate.call(this);GLOBAL.document.getElementById=jQuery.proxy(this._getElementByScopedId,this)};Zf.prototype.deactivate=function(){Zf._super.deactivate.call(this);delete GLOBAL.document.getElementById;this._elements=k};
Zf.prototype._getElementByScopedId=function(a){var b=GLOBAL.document,b=(GLOBAL.HTMLDocument?GLOBAL.HTMLDocument.prototype:GLOBAL.Object.getPrototypeOf(b)).getElementById.call(b,a);if(!b)return k;var c=jQuery(b).closest(this._combinedSelector);return!c[0]||c.is(this._includeSelector)?b:jQuery(this._includeSelector).find("#"+jc(a))[0]||k};function W(){this._app=k;var a=this;this._context=this._requestAction=this._containersFilter=k;this._windowKeys=new $f;this._controlCloseListener=function(b){b=b._sourceControl;b instanceof S&&ag(a,b)};this._navListener={requestEnqueue:function(a){var c=a._inputs[0];a._wr_enqueuedForm=c&&c.form},requestBeforeServe:function(b){var c=b._wr_enqueuedForm;c&&!jQuery.contains(GLOBAL.document.documentElement,c)&&(a._log.isDebugEnabled()&&a._log.debug("Canceling request bound to post a removed form "+ka(c)),
a.getApp().getPlugin("nav").cancel(b))}};this._startListeners=[];this._started=l}s(W,Ja);p("wr.LegacyAjaxPlugin",W);W.prototype._log=z.getLog("wr.LegacyAjaxPlugin");W.prototype.configure=function(a){a.containersFilter||f(Error("Containers filter not specified"));this._containersFilter=a.containersFilter};W.prototype.configure=W.prototype.configure;
W.prototype.start=function(){var a=this,b=jQuery(GLOBAL.document),c=jQuery("[data-wr-appid]"),d=this.getApp().getPlugin("ui").getDisplay(),e=new bg(d,this);this._requestAction=cg(this);this._context=new tf(d,e);this.getApp().getPlugin("nav").addListener(this._navListener);this._hyperlinkActivationListener=dg(this,this._handleHyperlinkActivation);this._hyperlinkNavigationListener=dg(this,this._handleHyperlinkNavigation);this._formButtonActivationListener=dg(this,this._handleFormButtonActivation);this._formSubmissionListener=
dg(this,this._handleFormSubmission);b.on("focusin mouseenter","a, area",jQuery.proxy(this._hyperlinkActivationListener,this));b.on("click","a, area",jQuery.proxy(this._hyperlinkNavigationListener,this));b.on("click submit",":submit",jQuery.proxy(this._formButtonActivationListener,this));b.on("submit","form",jQuery.proxy(this._formSubmissionListener,this));c.on("submit","form",jQuery.proxy(this._formSubmissionListener,this));d.addEventListener("contentchange",eg);d.addEventListener("close",this._controlCloseListener);
fg(this,this._context.getDisplay());gg(this,d.getWindows()[0]);hg(this);_.each(this._startListeners,function(b){try{b()}catch(c){a.error("Error invoking start listener",c)}});this._started=j};W.prototype.start=W.prototype.start;
W.prototype.stop=function(){var a=jQuery(GLOBAL.document),b=jQuery("[data-wr-appid]"),c=this.getApp().getPlugin("ui").getDisplay(),d=this.getApp()._externalExecutionScope;d.deleteGlobal("WRAjaxRequest");d.deleteGlobal("ajaxRequest");ig(this,"Prototype")?this._log.debug("Skipping deletion of global $H Prototype's function"):d.deleteGlobal("$H");this._log.info("Compatibility interface disabled");this._windowKeys.clear();d=this.getApp().getPlugin("nav").getRouterOfType(L);d.linkInfos={};d.linkInfosSelective=
{};this._log.debug("Cleared link information");d.clearLinkData();this._log.debug("Cleared link data");c.removeEventListener("close",this._controlCloseListener);c.removeEventListener("contentchange",eg);a.off("focusin mouseenter","a, area",this._hyperlinkActivationListener);a.off("click","a, area",this._hyperlinkNavigationListener);a.off("click",":submit",this._formButtonActivationListener);a.off("submit","form",this._formSubmissionListener);b.off("submit","form",this._formSubmissionListener);this.getApp().getPlugin("nav").removeListener(this._navListener);
this._context=k;if(this._requestAction)this._requestAction.destroy(),this._requestAction=k;this._started=l};W.prototype.stop=W.prototype.stop;W.prototype.addStartListener=function(a){if(a&&(this._startListeners.push(a),this._started))try{a()}catch(b){this.error("Error invoking start listener",b)}};W.prototype.addStartListener=W.prototype.addStartListener;W.prototype.removeStartListener=function(a){if(a)this._startListeners=_.without(this._startListeners,a)};W.prototype.removeStartListener=W.prototype.removeStartListener;
W.addEventInterceptor=function(a){a&&Ac.add(a)};W.removeEventInterceptor=function(a){a&&Ac.remove(a)};var jg=[];W.addContentUpdateHandler=function(a){a&&jg.push(a)};W.removeContentUpdateHandler=function(a){a&&(jg=_.without(jg,a))};var kg=jQuery.Callbacks("unique");W.addContentUpdateListener=function(a){a&&kg.add(a)};W.removeContentUpdateListener=function(a){a&&kg.remove(a)};
function eg(a){var b;a=a._sourceControl;a instanceof S&&(b=(a=a.getControls()[0])&&a._viewer,a=b,a instanceof K&&kg.fireWith(GLOBAL,[a.getContext()]))}
W.navigateLocation=function(a,b){var c=zc().getPlugin("oldajax");lg(a)&&(!b||"_self"===b)?(c._log.isDebugEnabled()&&c._log.debug("Firing AJAX request for location change to "+a),c._compatAjaxRequest(a,c._compatNewHash({}))):(c._log.isDebugEnabled()&&c._log.debug("Queuing request for location change to "+a),c.getApp().getPlugin("nav").navigate(new D(a,k,k,b)))};W.exit=function(){var a=zc(),b=a.getPlugin("ui").getDisplay().getOpenWindows(),c;for(c=b.length-1;0<=c;c--)b[c].close();return a.stop().chain(function(){a.dispose()})};
function hg(a){function b(){d.setGlobal("$H",jQuery.proxy(c._compatNewHash,c))}var c=a,d=a.getApp()._externalExecutionScope;ig(a,"$H")?ig(a,"Prototype")?a._log.debug("Skipping re-definition of global $H Prototype's function"):(a._log.warn("Overwriting existing global $H function"),b()):b();(ig(a,"ajaxRequest")||ig(a,"WRAjaxRequest"))&&f(Error("Legacy interface conflict: check that WebRatio 6.x and earlier client runtime is not loaded"));d.setGlobal("ajaxRequest",jQuery.proxy(a._compatAjaxRequest,
a));d.setGlobal("WRAjaxRequest",jQuery.proxy(a._compatAjaxRequestCtor,a));a._log.info("Compatibility interface enabled")}function ig(a,b){var c=0<Wf;return"undefined"!==typeof a.getApp()._externalExecutionScope.getGlobal(b)||!c&&"undefined"!==typeof GLOBAL[b]}o=W.prototype;o._compatNewHash=function(a){a=a||{};return{get:function(b){return a[b]},toObject:function(){return a}}};
o._compatAjaxRequest=function(a,b){var c=this;try{this._log.debug("Queuing AJAX request to "+a);var d=mg(this,b),e=ng(a,d);bd();var g=this._context,h=g.getDisplay(),m=this._requestAction.execute(e,g),r=[],R=function(a){a._sourceControl instanceof S&&r.push(a._sourceControl)};h.addEventListener("open",R);h.addEventListener("contentchange",R);e=function(){h.removeEventListener("open",R);h.removeEventListener("contentchange",R);0<r.length&&_.each(r,function(a){var b=a.getControls()[0],b=b&&b._viewer;
(b=b instanceof K?b.getContext():k)&&jQuery(b).data("wr-appid",c.getApp()._id);gg(c,a);fg(c,a)})};m=m.chain(e,e);e=function(){bd()};m=m.chain(e,e);e=function(){Wb()};m=m.chain(e,e);if(d.onFailureCallBack)m.onFailure(function(){GLOBAL.eval(d.onFailureCallBack+"()")});if(d.onCompleteCallBack)m.onComplete(function(){d.onCompleteCallBack()})}catch(J){this._log.error("Error preparing request",J)}if((m=GLOBAL.event)&&("click"===m.type||"keypress"===m.type))if(jQuery(m.target||m.srcElement).closest("[href], :submit")[0])GLOBAL.event.returnValue=
l;return l};
o._compatAjaxRequestCtor=function(a,b){var c=this;this._log.debug("Legacy precomputed request to "+a);var d=mg(this,b),d=ng(a,d),e=this._requestAction._actor,g=this._context;d.allowIgnoreFields=l;var h=e.precomputeRequest(d);d.allowIgnoreFields=j;var m=e.precomputeRequest(d);return function(a,b){var d={};_.each(b.useless||[],function(b){d[b]=function(){c._log.warn("Calling "+a+"."+b+" - Method has no more use")}});_.each(b.gone||[],function(b){d[b]=function(){c._log.warn("Calling "+a+"."+b+" - Method is no longer available")}});
jQuery.extend(d,b.impl||{});return d}("WRAjaxRequest",{useless:["updateWindowSize"],gone:["sendRequest","openInfoDialog","createAndPrepareWindow"],impl:{getUrl:function(a){return c._compatNewHash(a===l?h:m)},computeResponse:function(a){e.processResponse(a,g)}}})};
function mg(a,b){var c={};if(b){c.isForm=b.get("isForm");c.pressedLink=b.get("pressedLink");c.selectiveRefresh=b.get("selectiveRefresh");c.onFailureCallBack=b.get("onFailureCallBack");c.onCompleteCallBack=b.get("onCompleteCallBack");c.extraQuery=b.get("extraQuery");c.sourcePage=b.get("sourcePage");b.get("window")!==i&&a._log.warn("Setting request window option - Option has no more use");b.get("closeWindow")!==i&&a._log.warn("Setting request closeWindow option - Option has no more use");var d=b.get("waitingWindow");
c.openWaitingWindow=!!d;c.waitWin={};if(c.openWaitingWindow)c.waitWin.message=d.get("message"),c.waitWin.width=d.get("width"),c.waitWin.height=d.get("height"),c.waitWin.duration=d.get("duration"),c.waitWin.className=d.get("className");c.indicator=b.get("indicator")}return c}
function ng(a,b){var c,d;b.isForm?((d=jQuery("#"+jc(a))[0]||jQuery("form[name='"+kc(a)+"']")[0])||f(Error("Form '"+a+"' not found for posting")),c=jQuery(d).attr("action"),d={form:d,button:b.pressedLink,selectiveRefresh:"boolean"===typeof b.selectiveRefresh?b.selectiveRefresh:j}):(c=a,d=k);b.extraQuery&&(c=c+(0>c.indexOf("?")?"?":"")+b.extraQuery);var e={};e.url=c;d&&(e.formPost={button:d.button,form:d.form,selectiveRefresh:d.selectiveRefresh});b.openWaitingWindow&&(e.waitWin={id:"_oldajax_ww",duration:b.waitWin.duration,
width:b.waitWin.width,height:b.waitWin.height,className:b.waitWin.className,message:b.waitWin.message});b.indicator&&(e.indicator="string"===typeof b.indicator?jQuery("#"+jc(b.indicator))[0]:b.indicator);return e}function cg(a){var b=new M;ja(b,La)===k&&b.setApp(a.getApp());b.setup({});return new Q("oldajax",b)}
o._handleHyperlinkActivation=function(a){a=jQuery(a.currentTarget);if(a.attr("href")){var b=this.getApp().getPlugin("nav"),c=og(a);b.precompute(c);b=c.getURL();b=parseUri(b);(!b.protocol||"http"===b.protocol||"https"===b.protocol)&&a.attr("href",Da(c.getURL(),c.getParams()))}};
o._handleHyperlinkNavigation=function(a){if(!a.isDefaultPrevented()){var b=jQuery(a.currentTarget);if(b.attr("href")&&pg(b.attr("href"))){a.preventDefault();var a=b.attr("href"),c=b.attr("target")||k;lg(a)&&(!c||"_self"===c)?(this._log.isDebugEnabled()&&this._log.debug("Firing AJAX request for hyperlink "+ka(b[0])),this._compatAjaxRequest(a,this._compatNewHash({}))):(this._log.isDebugEnabled()&&this._log.debug("Queuing request for hyperlink "+ka(b[0])),this.getApp().getPlugin("nav").navigate(og(b)))}}};
function og(a){var b=a.attr("href"),a=a.attr("target")||k;return new D(b,k,k,a)}o._handleFormButtonActivation=function(a){var a=jQuery(a.currentTarget),b=jQuery(a[0].form);b[0]&&b.data("_wr_submitButton",a.prop("name"))};
o._handleFormSubmission=function(a){if(!a.isDefaultPrevented()){var b=jQuery(a.currentTarget),c=b.data("_wr_submitButton");if(c&&(b.removeData("_wr_submitButton"),c=b.find(":submit[name='"+jc(c)+"']"),pg(b.attr("action")||""))){a.preventDefault();var a=b.attr("action")||"",d=b.attr("target")||k,e=c.attr("name"),g=b.find(":input:hidden[name='"+jc(/^button:(.+?)(_.+)?$/.exec(e)[1])+"']").attr("value");g||this._log.warn("Cannot find action URL associated with button '"+e+"'");lg(g)&&(!d||"_self"===d)?
(this._log.isDebugEnabled()&&this._log.debug("Firing AJAX request for submit of form "+ka(b[0])),(b=b.attr("id")||b.attr("name"))?this._compatAjaxRequest(b,this._compatNewHash({isForm:j,pressedLink:e,selectiveRefresh:l})):this._log.error("Cannot submit a form lacking both 'id' and 'name' attributes")):(this._log.isDebugEnabled()&&this._log.debug("Queuing request for submit of form "+ka(b[0])),b=jQuery(Pb(b[0])).add(c).get(),b=new D(a,k,b,d),this.getApp().getPlugin("nav").navigate(b))}}};var qg=new XRegExp("^!(?<fparams>.+)");
function lg(a){a=parseUri(a);a=XRegExp.exec(a.anchor,qg);return"true"===(a?jQuery.deparam(a.fparams):{}).ajax}function dg(a,b){var c=a.getApp()._id;return function(a){if(""+(jQuery(a.target).parents().filter(function(){return jQuery(this).data("wr-appid")}).data("wr-appid")||"default")===c)return b.call(this,a)}}function pg(a){(a=parseUri(a).protocol.toLowerCase())||(a=parseUri(GLOBAL.document.location.href).protocol.toLowerCase());return"http"===a||"https"===a}
function bg(a,b){this._display=a;this._parent=b}o=bg.prototype;o.get=da(k);o.set=function(a,b){var c=this._display.lookupControl(a);c?(this._parent._log.debug("Updating HTML data of control '"+a+"'"),c.setData({html:b}),fg(this._parent,c)):_.str.trim(""+b)&&this._parent._log.warn("Control '"+a+"' not found")};o.remove=ba();o.toObject=function(){return{}};o.addEventListener=ba();o.removeEventListener=ba();o.triggerEvent=ba();
function fg(a,b){if(b instanceof O){var c;c=b instanceof P?b:a.getApp().getPlugin("ui").getDisplay();b===c?_.each(c.getWindows(),function(b){rg(a,b)}):b instanceof S?rg(a,b):(c=b._viewer,c instanceof K&&sg(a,b,c.getContext(),k))}}
function rg(a,b){var c=a._containersFilter,d=b.getControls()[0],e=d&&d._viewer;if(e instanceof K){var d=b.getParent(),g=d.getWindows()[0],h=[];b===g&&_.each(d.getWindows(),function(a){var b=a.getControls()[0],b=b&&b._viewer;a!==g&&b instanceof K&&Array.prototype.push.apply(h,jQuery.makeArray(Dd(b.getContext(),c)))});d=b.getControls()[0];b===g?sg(a,d,e.getContext(),h):sg(a,d,e.getContext(),k)}}
function sg(a,b,c,d){var e=a._containersFilter,g=_.map(b.getControls(),function(a){return a._viewer.getContext()}),h=[];e&&(h=_.map(jQuery(Dd(c,e)).not(jQuery(d)),aa()));c=nd(g,h);_.each(c.removed,function(c){var c=c.value.id,d=b.getControl(c);a._log.debug("Removing control for removed container '"+c+"'");d&&(b.removeControl(d),d.destroy())});_.each(b.getControls(),function(b){var c=jQuery("#"+jc(b._id))[0];sg(a,b,c,k)});_.each(c.added,function(c){var c=c.value,d=c.id,g;a._log.debug("Adding control for added container '"+
d+"'");g=new tg(new rd(d,{}),k);d=new O(d,g);g.setup({containersFilter:e},c);b.addControl(d);sg(a,d,c,k)})}function tg(a,b){Lf.call(this,a,b)}s(tg,Lf);o=tg.prototype;o.setup=function(a,b){tg._super.setup.call(this,a,b);this._lazyRemove=!!jQuery(this.getContext()).children(".wr-ajaxContent")[0]};
o.updateContent=function(a){function b(a){if(0<=a){var d=b(a-1);return function(b,c){e[a](b,c,d)}}return function(a,b){g.call(c,b)}}var c=this,d=this.getContext(),e=jg,g=tg._super.updateContent;b(e.length-1)(d,a);kg.fireWith(GLOBAL,[d])};o.createOldContentFragment=function(){return this._lazyRemove?jQuery(this.getContext()).children(".wr-ajaxContent").hide()[0]:tg._super.createOldContentFragment.call(this)};
o.createNewContentFragment=function(a){a=tg._super.createNewContentFragment.call(this,a);if(this._lazyRemove){var b=jQuery(a).children(".wr-ajaxContent")[0];b||f(Error("Content holder element missing in new HTML."));b["wr-fragRoot"]=a;a=b}return a};
o.destroyFragments=function(a,b){function c(a){if(a.id)jQuery.data(a,"wr-originalId",a.id),a.id="___"+a.id;if(a.name)jQuery.data(a,"wr-originalName",a.name),a.name="___"+a.name;if(a.form)a.disabled=j;for(var b=0,a=a.childNodes,d=a.length;b<d;b++){var e=a[b];1==e.nodeType&&e.nodeName&&"SELECT"!=e.nodeName.toUpperCase()&&c(e)}}if(this._lazyRemove){c(a);var d=b["wr-fragRoot"];try{delete b["wr-fragRoot"]}catch(e){try{b.removeAttribute("wr-fragRoot")}catch(g){b["wr-fragRoot"]=k}}b=d}tg._super.destroyFragments.call(this,
a,b)};o.replaceContent=function(a,b){var c=[];jQuery(b).find(".ajaxPreservedMarkup script").each(function(){c.unshift({script:this,parent:this.parentNode,next:this.nextSibling})});if(this._lazyRemove){var d=this.getContext();Tb();try{Ob(d,[b],a)}finally{var e=Ub();0<e.length&&(e=jQuery("<div>"+e.join("")+"</div>")[0],Mb(d,jQuery.makeArray(e.childNodes)))}}else tg._super.replaceContent.call(this,a,b);_.each(c,function(a){a.parent.insertBefore(a.script,a.next)})};
function gg(a,b){var c=b.getControls()[0],c=c&&c._viewer;if(c=c instanceof K?c.getContext():k){var d=a._windowKeys,e=a.getApp().getPlugin("nav").getRouterOfType(L),g=ug(c,"linkInfos");g&&(vg(d,b,"info",Ld(g)),Md(e.linkInfos,g,1),a._log.isDebugEnabled()&&a._log.debug("Received new link information: "+ka(g)));if(g=ug(c,"linkInfosSelective"))vg(d,b,"infoSel",Ld(g)),Md(e.linkInfosSelective,g,1),a._log.isDebugEnabled()&&a._log.debug("Received new selective link information: "+ka(g));if(c=ug(c,"linkData"))B(c,
function(a,c){vg(d,b,"data",[c]);e.mergeLinkData(c,a)}),a._log.isDebugEnabled()&&a._log.debug("Received new link data: "+ka(c))}}
function ag(a,b){var c=a._windowKeys,d=wg(c,b,"info"),e=wg(c,b,"infoSel"),c=wg(c,b,"data");if(!(0>=d.length&&0>=c.length)){var g=a.getApp().getPlugin("nav").getRouterOfType(L);_.each(d,function(a){delete g.linkInfos[a]});a._log.debug("Cleared link information: "+ka(d));_.each(e,function(a){delete g.linkInfosSelective[a]});a._log.debug("Cleared selective link information: "+ka(e));_.each(c,function(a){g.clearLinkData(a)});a._log.debug("Cleared link data: "+ka(c))}}
function ug(a,b){if(!a||!b)return k;var c=jQuery(a).find("script[type='application/json'].wr-"+jc(b)).eq(0),c=_.str.trim(c.text()||c.html()||"");return!c?k:jQuery.parseJSON(c)}function $f(){this._usageKeys={};this._keyUsages={}}function vg(a,b,c,d){var e=b._id+"."+c,b=a._usageKeys[e]||(a._usageKeys[e]=[]);b.push.apply(b,d);var g=a._keyUsages;_.each(d,function(a){(g[a]||(g[a]=[])).push(e)})}
function wg(a,b,c){var d=b._id+"."+c,b=a._usageKeys[d]||[];delete a._usageKeys[d];var e=a._keyUsages;_.each(b,function(a){var a=e[a],b=-1;a&&0<=(b=_.indexOf(a,d))&&a.splice(b,1)});return b=_.filter(b,function(a){return!xg(this,c,a)},a)}$f.prototype.clear=function(){this._usageKeys={};this._keyUsages={}};function xg(a,b,c){return _.some(a._keyUsages[c]||[],function(a){return _.str.endsWith(a,"."+b)})};function X(a){this._id=a;this._plugins={};this._lifecycle=new E(this);this._configured=k;this._earlyConfigResult=new v;this._disposed=this._started=this._inited=k;var b=".wr-appui-"+jc(a);this._externalExecutionScope=jQuery(b)[0]?new Zf(b,".wr-appui"):new V;a in X._instances&&f(new t("There is already a known application with id '"+a+"'"));X._instances[a]=this;this._log.info("Creating application '"+a+"'");this._loader=new Cc;this._lifecycle.register(this._loader);var c=this._externalExecutionScope;
_.each(Bc,function(a,b){c.setGlobal(b,a)});_.each(yg,function(a){this.addLifecycleListener(a)},this)}p("wr.app.App",X);X.prototype._log=z.getLog("wr.App");X._instances={};function zg(){return _.values(X._instances)}X.getAll=zg;function Ag(a){return X._instances[a]||k}X.get=Ag;X.prototype.getId=n("_id");X.prototype.getId=X.prototype.getId;
X.prototype.init=function(){var a=this;this._configured!==j&&f(new t("Application not configured"));this._inited!==k&&f(new t("Application already initialized or initializing"));this._inited=l;this._log.info("Application lifecycle: init");var b=Bg(this,this.getConfigPlugin()._config).onFailure(function(b){a._log.error("Error applying final configuration",b)}),b=b.chain(function(){return a._lifecycle.init()}).onFailure(function(b){a._log.error("Error during lifecycle init",b)});return b.onSuccess(function(){a._inited=
j})};X.prototype.init=X.prototype.init;X.prototype.start=function(){var a=this;this._inited!==j&&f(new t("Application not initialized"));this._started!==k&&f(new t("Application already started or starting"));this._started=l;this._log.info("Application lifecycle: start");return this._lifecycle.start().onSuccess(function(){a._started=j;a._log.info("Application '"+a._id+"' started")}).onFailure(function(b){a._log.error("Error during lifecycle start",b)})};X.prototype.start=X.prototype.start;
X.prototype.stop=function(){var a=this;this._started!==j&&f(new t("Application not started or stopping"));this._started=l;this._log.info("Application lifecycle: stop");return this._lifecycle.stop().onSuccess(function(){a._started=k;a._log.info("Application '"+a._id+"' stopped")}).onFailure(function(b){a._log.error("Error during lifecycle stop",b)})};X.prototype.stop=X.prototype.stop;
X.prototype.dispose=function(){var a=this;this._started!==k&&f(new t("Application still started"));if(this._disposed!==k)return Wa;this._disposed=l;var b;this._inited===k?b=Wa:(this._log.info("Application lifecycle: dispose"),b=this._lifecycle.dispose().onSuccess(function(){a._disposed=j}).onFailure(function(b){a._log.error("Error during lifecycle dispose",b)}));b.onComplete(function(){delete X._instances[a._id]});return b};X.prototype.dispose=X.prototype.dispose;
X.prototype.isInitialized=function(){return this._inited===j};X.prototype.isInitialized=X.prototype.isInitialized;X.prototype.isStarted=function(){return this._started===j};X.prototype.isStarted=X.prototype.isStarted;X.prototype.addLifecycleListener=function(a,b){this._lifecycle.addListener(a,b)};X.prototype.addLifecycleListener=X.prototype.addLifecycleListener;X.prototype.removeLifecycleListener=function(a){this._lifecycle.removeListener(a)};X.prototype.removeLifecycleListener=X.prototype.removeLifecycleListener;
X.prototype.getLoader=n("_loader");X.prototype.getLoader=X.prototype.getLoader;X.prototype.registerPlugin=function(a,b){a in this._plugins&&f(new t("Plugin already registered with id '"+a+"'"));b.getApp()&&f(new t("Plugin instance already registered with an application"));this._plugins[a]=b;b.setApp(this);this._lifecycle.register(b);try{this.handlePluginRegistration()}catch(c){b.setApp(k),this._lifecycle.unregister(b),delete this._plugins[a],f(c)}};X.prototype.registerPlugin=X.prototype.registerPlugin;
X.prototype.unregisterPlugin=function(a){var b=this.getPlugin(a);this.handlePluginUnregistration(a);this._lifecycle.unregister(b);b.setApp(k);delete this._plugins[a]};X.prototype.unregisterPlugin=X.prototype.unregisterPlugin;X.prototype.getPlugin=function(a){var b=this._plugins[a];(b=this.handlePluginLookup(a,b))||f(new t("No plugin registered with id '"+a+"'"));return b};X.prototype.getPlugin=X.prototype.getPlugin;X.prototype.handlePluginRegistration=ba();X.prototype.handlePluginRegistration=X.prototype.handlePluginRegistration;
X.prototype.handlePluginUnregistration=function(a){"log"===a&&this._log.warn("Log plugin is being unregistered: it might not be possible to continue logging on some components")};X.prototype.handlePluginUnregistration=X.prototype.handlePluginUnregistration;X.prototype.handlePluginLookup=function(a,b){if(!b&&"config"===a)b=this._bootConfigManager;return b};X.prototype.handlePluginLookup=X.prototype.handlePluginLookup;X.PLUGIN_LOG="log";X.prototype.getLogPlugin=function(){return this.getPlugin("log")};
X.prototype.getLogPlugin=X.prototype.getLogPlugin;X.PLUGIN_CONFIG="config";X.prototype.getConfigPlugin=function(){return this._bootConfigManager||this.getPlugin("config")};X.prototype.getConfigPlugin=X.prototype.getConfigPlugin;
X.prototype.configure=function(a){var b=this;this._configured!==k&&f(new t("Application initial configuration already provided"));this._configured=l;this._bootConfigManager=new A;this._bootConfigManager.setApp(this);this._bootConfigManager.addHandler(new $a);this._bootConfigManager.addHandler(new bb);var c=jQuery.extend({},this.getDefaultConfig()||{},a=a||{})||{},a=Bg(this,c);return a=a.chain(function(){b._bootConfigManager=k;b.getConfigPlugin().merge(c);b._earlyConfigResult.success();b._earlyConfigResult=
k;b._configured=j},function(a){b._log.error("Error applying default configuration",a);b._earlyConfigResult.failure(a);return a})};X.prototype.configure=X.prototype.configure;X.prototype.getDefaultConfig=function(){return Ma};X.prototype.getDefaultConfig=X.prototype.getDefaultConfig;X.prototype.mergeConfig=function(a){return Cg(this,function(){return this.merge(a)})};X.prototype.mergeConfig=X.prototype.mergeConfig;
X.prototype.mergeConfigFiles=function(a){var b=arguments;return Cg(this,function(){return this.mergeFiles.apply(this,b)})};X.prototype.mergeConfigFiles=X.prototype.mergeConfigFiles;X.prototype.isConfigurable=function(){return this._inited===k};X.prototype.isConfigurable=X.prototype.isConfigurable;
function Cg(a,b){a._inited!==k&&f(new t("Unable to modify configuration at this time"));return a._earlyConfigResult?a._earlyConfigResult._promise.chain(function(){return Ra(b,a.getConfigPlugin())}):Ra(b,a.getConfigPlugin())}function Bg(a,b){if(!b)return Wa;var c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(Dg(a,d,b[d]));return Na.apply(u,c)}
function Dg(a,b,c){var d=a.getConfigPlugin().readInstanceFactory(c.implementation,k),e=new v,g=a._plugins[b];if(g){var h;try{h=Kd(d._ctorName)}catch(m){h=k}h!==g.constructor?e.failure(new t("A different implementation of '"+b+"' is already registered")):e.success(g)}else d.newInstance().onSuccess(function(c){try{a.registerPlugin(b,c),e.success(c)}catch(d){e.failure(d)}}).onFailure(function(a){e.failure(a)});return e._promise.chain(function(a){var b=jQuery.extend({},c);delete b.implementation;return Qa(a.configure,
a,b)})}var yg=[];X.addLifecycleListener=function(a,b){a&&!_.contains(yg,a)&&(yg.push(a),_.each(zg(),function(c){c.addLifecycleListener(a,b)}))};X.removeLifecycleListener=function(a){if(a){var b=_.indexOf(yg,a);0<=b&&(yg.splice(b,1),_.each(zg(),function(b){b.removeLifecycleListener(a)}))}};X.prototype.getExternalExecutionScope=n("_externalExecutionScope");X.prototype.getExternalExecutionScope=X.prototype.getExternalExecutionScope;var Eg=k;function zc(){var a=Eg||Ag("default");a||f(new t("Default application not available"));return a}p("wr.getApp",zc);p("wr.runScoped",function(a,b){var c=Fg(a),d=Ag(c);d||f(Error("Application '"+c+"' not found"));return Gg(d,b)});function yc(a){var b=Eg;return b?Hg(b._id,a):a}p("wr.keepScoped",yc);function Hg(a,b){var c=Fg(a);return function(){var a=this,e=jQuery.makeArray(arguments),g=Ag(c);g||f(Error("Application '"+c+"' not found"));return Gg(g,function(){return b.apply(a,e)})}}
p("wr.makeScoped",Hg);function Fg(a){"string"!==typeof a&&(a=""+(jQuery(a).parents().filter(function(){return jQuery(this).data("wr-appid")}).data("wr-appid")||""));return""+(a||"default")}function Gg(a,b){var c=Eg;try{return Eg=a,a._externalExecutionScope.run(b)}finally{Eg=c}}
(function(){cc();var a=jQuery("script").filter(function(){return"wr.js"===/^(.+?)(?:;jsessionid=[0-9A-Fa-f]+)?$/.exec(parseUri(jQuery(this).attr("src")).file)[1]});if(a[0]){a=parseUri(a.attr("src"));bc=jQuery.deparam(a.query);var b=parseUri(GLOBAL.location.href);ac=b.protocol+"://"+b.authority+b.directory+a.directory}a=z.getLog("wr");a.info("WebRatio Runtime (8.10.1.20180614110810, wr.js)");a.info("Platform: "+ma().getInfo()||"Unknown")})();
bc&&"true"===bc.createDocumentApp&&function(){var a=z.getLog("wr"),b=new X("default");window.onerror=function(b,c,d,e){"Script error."===b&&0===d&&0===e||a.error("Unexpected error occurred: "+b+"\n\tat <unknown>("+c+":"+d+")")};b._externalExecutionScope.activate();var c=new v;Eb(function(){b.configure({}).onSuccess(function(){c.success()}).onFailure(function(a){c.failure(a)})});var d=c._promise,e=bc,g=e.configFiles?e.configFiles.split(","):[];0<g.length&&(d=d.chain(function(){return b.mergeConfigFiles.apply(b,
g)}));var h=new v;jQuery(GLOBAL.document).ready(function(){try{cc(),h.success()}catch(b){a.error("Final environemnt check failed",b),h.failure(b)}});h._promise.onSuccess(function(){bd()});Na(h._promise,d).chain(function(){return Qa(b.init,b)},function(b){a.error("Error during default application init",b);return b}).chain(function(){return Qa(b.start,b)},function(b){a.error("Error during default application start",b);return b});jQuery(GLOBAL).one("unload",function(){Wa.chain(function(){return Qa(b.stop,
b)},i).chain(function(){return Qa(b.dispose,b)}).onFailure(function(b){a.error("Error during default application stop and dispose",b)}).onComplete(function(){window.onerror=k})})}();function Ig(a){if(a===k)return k;"boolean"!==typeof a&&f(new TypeError("Not a boolean value"));return a?"true":"false"}p("wr.util.str.formatBoolean",Ig);function Jg(a){if(a===k)return k;if("true"===a)return j;if("false"===a)return l;f(new TypeError("Invalid boolean string '"+a+"'"))}p("wr.util.str.parseBoolean",Jg);function Kg(a){"number"===typeof a&&0!==a%1&&f(new TypeError("Not a finite integral number"));return Lg(a)}p("wr.util.str.formatInteger",Kg);
function Mg(a){var b=Ng(a);b!==k&&0!==b%1&&f(new TypeError("Invalid integral number string '"+a+"'"));return b}p("wr.util.str.parseInteger",Mg);function Lg(a){if(a===k)return k;("number"!==typeof a||!isFinite(a))&&f(new TypeError("Not a finite number"));return""+a}p("wr.util.str.formatDecimal",Lg);function Ng(a){if(a===k)return k;var b=Number(""+a);isFinite(b)||f(new TypeError("Invalid number string '"+a+"'"));return b}p("wr.util.str.parseDecimal",Ng);var Og=new XRegExp("^(?<y>\\d{4})-(?<M>\\d{2})-(?<d>\\d{2})$");
function Pg(a){if(a===k)return k;a instanceof Date||f(new TypeError("Not a Date"));var b=[];b.push(""+a.getFullYear());b.push("-");b.push(_.str.lpad(""+(a.getMonth()+1),2,"0"));b.push("-");b.push(_.str.lpad(""+a.getDate(),2,"0"));return b.join("")}p("wr.util.str.formatDate",Pg);function Qg(a){if(a===k)return k;var b;if(b=XRegExp.exec(a,Og))return new Date(b.y,b.M-1,b.d,0,0,0,0);f(new TypeError("Invalid date string '"+a+"'"))}p("wr.util.str.parseDate",Qg);var Rg=new XRegExp("^(?<H>\\d{2}):(?<m>\\d{2}):(?<s>\\d{2})(?<S>\\.\\d{3})?$");
function Sg(a){if(a===k)return k;a instanceof Date||f(new TypeError("Not a Date"));var b=[];b.push(_.str.lpad(""+a.getHours(),2,"0"));b.push(":");b.push(_.str.lpad(""+a.getMinutes(),2,"0"));b.push(":");b.push(_.str.lpad(""+a.getSeconds(),2,"0"));a=a.getMilliseconds();0<a&&(b.push("."),b.push(_.str.lpad(""+a,3,"0")));return b.join("")}p("wr.util.str.formatTime",Sg);
function Tg(a){if(a===k)return k;var b;if(b=XRegExp.exec(a,Rg))return new Date(1970,0,1,b.H,b.m,b.s,b.S||"0");f(new TypeError("Invalid time string '"+a+"'"))}p("wr.util.str.parseTime",Tg);function Ug(a){if(a===k)return k;a instanceof Date||f(new TypeError("Not a date"));return[Pg(a),Sg(a)].join("T")}p("wr.util.str.formatTimestamp",Ug);
function Vg(a){if(a===k)return k;var b=a.split("T",2);if(2===b.length){var c=XRegExp.exec(b[0],Og),b=XRegExp.exec(b[1],Rg);if(c&&b)return new Date(c.y,c.M-1,c.d,b.H,b.m,b.s,b.S||"0")}f(new TypeError("Invalid timestamp string '"+a+"'"))}p("wr.util.str.parseTimestamp",Vg);function Y(a,b,c,d,e){K.call(this,a,b,c);this._idAttribute=d;this._filterSelector=e;this._selector=k}s(Y,K);p("wr.ui.html.DynamicElementsViewer",Y);
Y.prototype.setup=function(a,b){Y._super.setup.call(this,a,b);var c=this.getView()._id;this._selector="id"===this._idAttribute?"#"+jc(c):"["+jc(this._idAttribute)+"='"+kc(c)+"']";(c=this.findElements())||f(Error("No elements found for selectors "+this._selector+", "+this._filterSelector));this.validateElements(c);var c=jQuery(this.getContext()),d=c.data("__wr_ui_html_created");d?c.data("__wr_ui_html_created",d++):(this.bindListeners(c[0]),c.data("__wr_ui_html_created",1))};Y.prototype.setup=Y.prototype.setup;
Y.prototype.validateElements=ba();Y.prototype.validateElements=Y.prototype.validateElements;Y.prototype.destroy=function(){if(this._selector){var a=jQuery(this.getContext()),b=a.data("__wr_ui_html_created");1===b?(this.unbindListeners(a[0]),a.removeData("__wr_ui_html_created")):a.data("__wr_ui_html_created",b--);this._selector=k;Y._super.destroy.call(this)}};Y.prototype.destroy=Y.prototype.destroy;
var Wg={focusin:"focus",focusout:"blur",click:"click",keypress:"keypress",keydown:"keydown",keyup:"keyup"},Xg=function(){var a=[];B(Wg,function(b,c){a.push(c+".wr")});return a.join(" ")}();Y.prototype.bindListeners=function(a){var b=this,c=this.newListenerProxy(a,function(a){var c=Wg[a.type];c&&jQuery(a.target).is(b._selector)&&b.raiseEventForHtmlEvent(c,k,a)});jQuery(a).on(Xg,this._filterSelector,c)};Y.prototype.bindListeners=Y.prototype.bindListeners;
Y.prototype.unbindListeners=function(a){jQuery.each(this.getListenerProxies(a),function(b,c){jQuery(a).off(Xg,this._filterSelector,c)});this.destroyListenerProxies(a)};Y.prototype.unbindListeners=Y.prototype.unbindListeners;var Yg=new Ed;Y.prototype.newListenerProxy=function(a,b){function c(a){return b.call(this,a)}var d=Yg.get(a);d||Yg.put(a,d=new sa);d.put(b,c);return c};Y.prototype.newListenerProxy=Y.prototype.newListenerProxy;
Y.prototype.getListenerProxies=function(a){return(a=Yg.get(a))?a.getValues():[]};Y.prototype.getListenerProxies=Y.prototype.getListenerProxies;Y.prototype.destroyListenerProxies=function(a){Yg.remove(a)};Y.prototype.destroyListenerProxies=Y.prototype.destroyListenerProxies;Y.prototype.writeAttributes=function(a){var b=jQuery(this.findElements()),c=a&&a.visible;c!==i&&(c?b.show():b.hide());b.is(":input")&&(c=a&&a.enabled,c!==i&&b.prop("disabled",!c));Y._super.writeAttributes.call(this,a)};
Y.prototype.writeAttributes=Y.prototype.writeAttributes;Y.prototype.readAttributes=function(){var a=Y._super.readAttributes.call(this),b=jQuery(this.findElements());a.visible=b.is(":visible");b.is(":input")&&(a.enabled=!b.prop("disabled"));return a};Y.prototype.readAttributes=Y.prototype.readAttributes;
Y.prototype.findElements=function(){this._selector||f(new t("Cannot access elements before setup"));var a=jQuery(this._selector,this.getContext());this._filterSelector&&(a=a.filter(this._filterSelector));return 0<a.length?a:k};Y.prototype.findElements=Y.prototype.findElements;function Zg(a,b){Y.call(this,a,b,l,"id","a")}s(Zg,Y);p("wr.ui.html.DynamicAnchorViewer",Zg);function $g(a,b){Y.call(this,a,b,l,"name",":button, :submit")}s($g,Y);p("wr.ui.html.DynamicButtonViewer",$g);function Z(a,b,c,d){Y.call(this,a,b,l,"name",c);this._supportsOptions=d;this._valueType=k}s(Z,Y);p("wr.ui.html.DynamicFieldViewer",Z);Z.prototype.setup=function(a,b){a.valueType||f(Error("Value type not specified"));this._valueType=a.valueType;Z._super.setup.call(this,a,b)};Z.prototype.setup=Z.prototype.setup;Z.prototype.getValueType=function(){this._valueType||f(new t("Cannot access value type before setup"));return this._valueType};Z.prototype.getValueType=Z.prototype.getValueType;
Z.prototype.writeData=function(a){var b=this;Z._super.writeData.call(this,a);if(a){var c=this.findElements();if(c&&this._valueType){var d=a.value;if(d!==i){var e;jQuery.isArray(d)?(e=[],jQuery.each(d,function(a,c){e.push(b.formatValue(c,b._valueType))})):e=this.formatValue(d,this._valueType);this.writeRawValue(c,e)}a=a.valueOptions;if(a!==i&&this._supportsOptions){var g=[];jQuery.each(a,function(a,c){g.push(b.formatValue(c,b._valueType))});od(this.readOptionRawValues(c),g,function(a){b.removeOptionRawValue(c,
a)},function(a){b.addOptionRawValue(c,a)})}}}};Z.prototype.writeData=Z.prototype.writeData;
Z.prototype.readData=function(){var a=this,b=Z._super.readData.call(this)||{},c=this.findElements();if(c&&this._valueType){var d,e=this.readRawValue(c);jQuery.isArray(e)?(d=[],jQuery.each(e,function(b,c){d.push(a.parseValue(c,a._valueType))})):d=this.parseValue(e,this._valueType);var g;this._supportsOptions?(c=this.readOptionRawValues(c),g=[],jQuery.each(c,function(b,c){g.push(a.parseValue(c,a._valueType))})):g="boolean"===this._valueType?[l,j]:i;b.value=d;b.valueOptions=g}return b};
Z.prototype.readData=Z.prototype.readData;Z.prototype.readRawValue=fa;Z.prototype.readRawValue=Z.prototype.readRawValue;Z.prototype.writeRawValue=fa;Z.prototype.writeRawValue=Z.prototype.writeRawValue;Z.prototype.readOptionRawValues=fa;Z.prototype.readOptionRawValues=Z.prototype.readOptionRawValues;Z.prototype.addOptionRawValue=fa;Z.prototype.addOptionRawValue=Z.prototype.addOptionRawValue;Z.prototype.removeOptionRawValue=fa;Z.prototype.removeOptionRawValue=Z.prototype.removeOptionRawValue;
Z.prototype.parseValue=function(a,b){if(a===k)return k;var c=ah[b];if(c=c&&c.parse)return c(a);f(new ga("Value of type '"+b+"' not supported"))};Z.prototype.parseValue=Z.prototype.parseValue;Z.prototype.formatValue=function(a,b){if(a===k)return k;var c=ah[b];if(c=c&&c.format)return c(a);f(new ga("Value of type '"+b+"' not supported"))};Z.prototype.formatValue=Z.prototype.formatValue;var bh={format:aa(),parse:aa()},ah={};ah["boolean"]={format:Ig,parse:Jg};ah.date={format:Pg,parse:Qg};
ah.decimal={format:Lg,parse:Ng};ah["float"]={format:Lg,parse:Ng};ah.integer={format:Kg,parse:Mg};ah.password=bh;ah.string=bh;ah.text=bh;ah.time={format:Sg,parse:Tg};ah.timestamp={format:Ug,parse:Vg};ah.url=bh;function ch(a,b){Z.call(this,a,b,":checkbox",j)}s(ch,Z);p("wr.ui.html.DynamicCheckboxViewer",ch);ch.prototype.validateElements=function(a){dh._super.validateElements.call(this,a);var b=this.getValueType();("blob"===b||1===a.length&&"boolean"!==b)&&f(Error("Type "+b+" not supported"))};ch.prototype.validateElements=ch.prototype.validateElements;
ch.prototype.readRawValue=function(a){a=jQuery(a);if(1===a.length)return Ig(!!a.prop("checked"));var b=[];a.filter(":checked").each(function(a,d){b.push(jQuery(d).val())});return 0<b.length?b:k};ch.prototype.readRawValue=ch.prototype.readRawValue;
ch.prototype.writeRawValue=function(a,b){var c=jQuery(a);if(1===c.length){jQuery.isArray(b)&&f(new TypeError("Value cannot be an array"));var d=Jg(b)===j;c.prop("checked",d)}else{var e={};b!=k&&(jQuery.isArray(b)||f(new TypeError("Value must be an array")),jQuery.each(b,function(a,b){e[b]=(e[b]||0)+1}));c.each(function(a,b){var c=jQuery(b),d=c.val(),R=l,J=e[d];0<J&&(R=j,e[d]=J-1);c.prop("checked",R)})}};ch.prototype.writeRawValue=ch.prototype.writeRawValue;
ch.prototype.readOptionRawValues=function(a){if(1===a.length)return[Ig(l),Ig(j)];var b=[];jQuery(a).each(function(a,d){b.push(jQuery(d).val())});return b};ch.prototype.readOptionRawValues=ch.prototype.readOptionRawValues;ch.prototype.addOptionRawValue=function(a,b){1===a.length&&f(new ga);var c=jQuery(a),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};ch.prototype.addOptionRawValue=ch.prototype.addOptionRawValue;
ch.prototype.removeOptionRawValue=function(a,b){1===a.length&&f(new ga);jQuery(jQuery(a).get().reverse()).each(function(a,d){var e=jQuery(d);if(e.val()===b)return Kb(e[0]),l})};ch.prototype.removeOptionRawValue=ch.prototype.removeOptionRawValue;function eh(a,b){Z.call(this,a,b,":file",l)}s(eh,Z);p("wr.ui.html.DynamicFileViewer",eh);eh.prototype.validateElements=function(a){eh._super.validateElements.call(this,a);a=this.getValueType();"blob"!==a&&f(Error("Type "+a+" not supported"))};eh.prototype.validateElements=eh.prototype.validateElements;eh.prototype.readData=ba();eh.prototype.readData=eh.prototype.readData;eh.prototype.writeData=ba();eh.prototype.writeData=eh.prototype.writeData;function fh(a,b){Z.call(this,a,b,":radio",j)}s(fh,Z);p("wr.ui.html.DynamicRadioViewer",fh);fh.prototype.validateElements=function(a){fh._super.validateElements.call(this,a);var b=this.getValueType();"blob"===b&&f(Error("Type "+b+" not supported"));1>=a.length&&f(Error("At least two radio inputs are required"))};fh.prototype.validateElements=fh.prototype.validateElements;fh.prototype.readRawValue=function(a){a=jQuery(a).filter(":checked");return 0<a.length?a.val():k};fh.prototype.readRawValue=fh.prototype.readRawValue;
fh.prototype.writeRawValue=function(a,b){jQuery.isArray(b)&&f(new TypeError("Value cannot be an array"));var c=l;jQuery(a).each(function(a,e){var g=jQuery(e),h=l;!c&&g.val()===b&&(h=c=j);g.prop("checked",h)})};fh.prototype.writeRawValue=fh.prototype.writeRawValue;fh.prototype.readOptionRawValues=function(a){var b=[];jQuery(a).each(function(a,d){b.push(jQuery(d).val())});return b};fh.prototype.readOptionRawValues=fh.prototype.readOptionRawValues;
fh.prototype.addOptionRawValue=function(a,b){var c=jQuery(a),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};fh.prototype.addOptionRawValue=fh.prototype.addOptionRawValue;fh.prototype.removeOptionRawValue=function(a,b){jQuery(jQuery(a).get().reverse()).each(function(a,d){var e=jQuery(d);if(e.val()===b)return Kb(e[0]),l})};fh.prototype.removeOptionRawValue=fh.prototype.removeOptionRawValue;function gh(a,b){Z.call(this,a,b,"select",j)}s(gh,Z);p("wr.ui.html.DynamicSelectViewer",gh);gh.prototype.validateElements=function(a){gh._super.validateElements.call(this,a);a=this.getValueType();"blob"===a&&f(Error("Type "+a+" not supported"))};gh.prototype.validateElements=gh.prototype.validateElements;gh.prototype.readRawValue=function(a){return jQuery(a).val()};gh.prototype.readRawValue=gh.prototype.readRawValue;
gh.prototype.writeRawValue=function(a,b){var c=jQuery(a),d=c.attr("multiple")!==i,e={};b!=k&&(d?(jQuery.isArray(b)||f(new TypeError("Value must be an array")),jQuery.each(b,function(a,b){e[b]=(e[b]||0)+1})):(jQuery.isArray(b)&&f(new TypeError("Value cannot be an array")),e[b]=1));c.find("option").each(function(a,b){var c=jQuery(b),d=c.val(),R=l,J=e[d];0<J&&(R=j,e[d]=J-1);c.prop("selected",R)})};gh.prototype.writeRawValue=gh.prototype.writeRawValue;
gh.prototype.readOptionRawValues=function(a){var b=[];jQuery(a).find("option").each(function(a,d){b.push(jQuery(d).val())});return b};gh.prototype.readOptionRawValues=gh.prototype.readOptionRawValues;gh.prototype.addOptionRawValue=function(a,b){var c=jQuery(a).find("option"),d=c.eq(0).clone().removeAttr("id");d.val(b);c.parent().append(d)};gh.prototype.addOptionRawValue=gh.prototype.addOptionRawValue;
gh.prototype.removeOptionRawValue=function(a,b){jQuery(jQuery(a).find("option").get().reverse()).each(function(a,d){var e=jQuery(d);if(e.val()===b)return Kb(e[0]),l})};gh.prototype.removeOptionRawValue=gh.prototype.removeOptionRawValue;function dh(a,b){Z.call(this,a,b,":text, :password, textarea",l)}s(dh,Z);p("wr.ui.html.DynamicTextViewer",dh);dh.prototype.validateElements=function(a){dh._super.validateElements.call(this,a);a=this.getValueType();"blob"===a&&f(Error("Type "+a+" not supported"))};dh.prototype.validateElements=dh.prototype.validateElements;dh.prototype.writeAttributes=function(a){var b=jQuery(this.findElements()),c=a&&a.editable;c!==i&&b.prop("readOnly",!c);dh._super.writeAttributes.call(this,a)};
dh.prototype.writeAttributes=dh.prototype.writeAttributes;dh.prototype.readAttributes=function(){var a=dh._super.readAttributes.call(this),b=jQuery(this.findElements());a.editable=!b.prop("readOnly");return a};dh.prototype.readAttributes=dh.prototype.readAttributes;dh.prototype.readRawValue=function(a){a=jQuery(a).val();return""===a?k:a};dh.prototype.readRawValue=dh.prototype.readRawValue;
dh.prototype.writeRawValue=function(a,b){jQuery.isArray(b)&&f(new TypeError("Value cannot be an array"));jQuery(a).val(b||"")};dh.prototype.writeRawValue=dh.prototype.writeRawValue;})();})(this,jQuery);